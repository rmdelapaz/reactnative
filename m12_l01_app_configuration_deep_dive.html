<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Master app.json and app.config.js configuration for React Native Expo apps">
    <meta name="author" content="React Native & Expo Course">
    <title>App Configuration Deep Dive | Module 12: Production and Deployment | React Native & Expo Course</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>
</head>
<body>
    <a href="#main-content" class="skip-to-main">Skip to main content</a>

    <nav>
        <div class="nav-container">
            <a href="index.html" class="nav-logo">üì± RN Course</a>
            <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-expanded="false" aria-controls="nav-links">‚ò∞</button>
            <div class="nav-links" id="nav-links">
                <a href="index.html">Home</a>
                <a href="index.html#modules">Modules</a>
                <a href="index.html#appendices">Appendices</a>
                <button id="theme-toggle" aria-label="Toggle theme">üåô</button>
            </div>
        </div>
    </nav>

    <div class="breadcrumb">
        <div class="container">
            <a href="index.html">Home</a> &gt;
            <a href="index.html#modules">Modules</a> &gt;
            <a href="m12_l01_app_configuration_deep_dive.html">Module 12</a> &gt;
            <span>Lesson 12.1</span>
        </div>
    </div>

    <main id="main-content">
        <div class="container">
            <header>
                <p class="module-tag">Module 12: Production and Deployment</p>
                <h1>App Configuration Deep Dive</h1>
                <p class="lesson-subtitle">Master app.json and app.config.js for production-ready apps</p>
            </header>

            <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <h2 style="color: white; border: none; margin-top: 0;">üéØ Learning Objectives</h2>
                <ul style="color: white;">
                    <li>Understand the structure and purpose of app.json/app.config.js</li>
                    <li>Configure app metadata, icons, and splash screens</li>
                    <li>Set up platform-specific configurations</li>
                    <li>Use dynamic configuration with app.config.js</li>
                    <li>Configure permissions and entitlements</li>
                    <li>Prepare your app for store submission</li>
                </ul>
            </div>

            <div class="toc-container">
                <details class="toc-details" open>
                    <summary>üìë Table of Contents</summary>
                    <ul class="toc-list">
                        <li><a href="#config-basics">Configuration Basics</a></li>
                        <li><a href="#app-identity">App Identity</a></li>
                        <li><a href="#icons-splash">Icons and Splash Screens</a></li>
                        <li><a href="#platform-specific">Platform-Specific Configuration</a></li>
                        <li><a href="#dynamic-config">Dynamic Configuration</a></li>
                        <li><a href="#permissions">Permissions and Entitlements</a></li>
                        <li><a href="#exercises">Hands-On Exercises</a></li>
                        <li><a href="#summary">Summary</a></li>
                    </ul>
                </details>
            </div>

            <section id="config-basics">
                <h2>Configuration Basics</h2>

                <p>Every Expo app starts with a configuration file that defines how your app looks, behaves, and builds. Understanding this configuration is essential for production deployment.</p>

                <h3>app.json vs app.config.js</h3>

                <pre class="mermaid">
flowchart LR
    subgraph Static["app.json"]
        A[Static values only]
        B[JSON format]
        C[No environment access]
    end
    
    subgraph Dynamic["app.config.js"]
        D[Dynamic values]
        E[JavaScript/TypeScript]
        F[Environment variables]
        G[Conditional logic]
    end
    
    Static --> H{Build Time}
    Dynamic --> H
    H --> I[Final Config]
    
    style Dynamic fill:#4CAF50,stroke:#2e7d32
    style Static fill:#2196F3,stroke:#1976D2
</pre>

                <h3>Basic app.json Structure</h3>

                <pre><code>{
  "expo": {
    "name": "My Awesome App",
    "slug": "my-awesome-app",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/icon.png",
    "userInterfaceStyle": "automatic",
    "splash": {
      "image": "./assets/splash.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    "assetBundlePatterns": ["**/*"],
    "ios": {
      "supportsTablet": true,
      "bundleIdentifier": "com.yourcompany.myawesomeapp"
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/adaptive-icon.png",
        "backgroundColor": "#ffffff"
      },
      "package": "com.yourcompany.myawesomeapp"
    },
    "web": {
      "favicon": "./assets/favicon.png"
    },
    "extra": {
      "eas": {
        "projectId": "your-project-id"
      }
    }
  }
}</code></pre>

                <h3>Converting to app.config.js</h3>

                <pre><code>// app.config.js
export default {
  expo: {
    name: "My Awesome App",
    slug: "my-awesome-app",
    version: "1.0.0",
    // ... rest of config
  }
};

// Or with TypeScript: app.config.ts
import { ExpoConfig, ConfigContext } from 'expo/config';

export default ({ config }: ConfigContext): ExpoConfig => ({
  ...config,
  name: "My Awesome App",
  slug: "my-awesome-app",
  version: "1.0.0",
});</code></pre>
            </section>

            <section id="app-identity">
                <h2>App Identity</h2>

                <p>Your app's identity determines how it appears in app stores, on device home screens, and in system settings.</p>

                <h3>Essential Identity Fields</h3>

                <pre><code>{
  "expo": {
    // Display name shown under app icon
    "name": "TaskFlow",
    
    // URL-safe identifier (lowercase, no spaces)
    // Used for Expo URLs: exp://exp.host/@username/slug
    "slug": "taskflow",
    
    // Semantic version for users
    "version": "1.2.3",
    
    // Internal build number (increment for each build)
    "ios": {
      "buildNumber": "42"
    },
    "android": {
      "versionCode": 42
    },
    
    // App description for stores
    "description": "The best task management app",
    
    // Privacy policy URL (required for some permissions)
    "privacyPolicy": "https://yourapp.com/privacy"
  }
}</code></pre>

                <h3>Bundle Identifiers</h3>

                <div class="card" style="background: #fff3cd; border-left: 4px solid #ffc107;">
                    <h4>‚ö†Ô∏è Bundle ID Rules</h4>
                    <p>Bundle identifiers are <strong>permanent</strong> once your app is published. Choose carefully!</p>
                    <ul>
                        <li>Use reverse domain notation: <code>com.company.appname</code></li>
                        <li>Only lowercase letters, numbers, and dots</li>
                        <li>Must be unique across all apps in each store</li>
                        <li>iOS and Android can have different identifiers</li>
                    </ul>
                </div>

                <pre><code>{
  "expo": {
    "ios": {
      // Apple App Store identifier
      "bundleIdentifier": "com.acmecorp.taskflow"
    },
    "android": {
      // Google Play Store identifier
      "package": "com.acmecorp.taskflow"
    }
  }
}</code></pre>

                <h3>Version Management Strategy</h3>

                <pre><code>// app.config.js - Automated version management
const packageJson = require('./package.json');

export default {
  expo: {
    version: packageJson.version,
    ios: {
      buildNumber: process.env.BUILD_NUMBER || '1',
    },
    android: {
      versionCode: parseInt(process.env.BUILD_NUMBER || '1', 10),
    },
  }
};</code></pre>
            </section>

            <section id="icons-splash">
                <h2>Icons and Splash Screens</h2>

                <p>First impressions matter. Your app icon and splash screen are the first things users see.</p>

                <h3>App Icon Requirements</h3>

                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <thead>
                        <tr style="background: #f5f5f5;">
                            <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Asset</th>
                            <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Size</th>
                            <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Format</th>
                            <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Notes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">icon</td>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">1024x1024</td>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">PNG</td>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">No transparency for iOS</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">adaptiveIcon (foreground)</td>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">1024x1024</td>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">PNG</td>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">Android only, with transparency</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">splash</td>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">1284x2778</td>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">PNG</td>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">Or use resizeMode</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">favicon</td>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">48x48</td>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">PNG</td>
                            <td style="padding: 12px; border-bottom: 1px solid #eee;">Web only</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Icon Configuration</h3>

                <pre><code>{
  "expo": {
    // Universal icon (used as fallback)
    "icon": "./assets/icon.png",
    
    "ios": {
      // iOS-specific icon (optional)
      "icon": "./assets/ios-icon.png"
    },
    
    "android": {
      // Android adaptive icon
      "adaptiveIcon": {
        "foregroundImage": "./assets/adaptive-icon-foreground.png",
        "backgroundImage": "./assets/adaptive-icon-background.png",
        // Or use solid color
        "backgroundColor": "#2196F3"
      }
    }
  }
}</code></pre>

                <h3>Splash Screen Configuration</h3>

                <pre><code>{
  "expo": {
    "splash": {
      "image": "./assets/splash.png",
      
      // How image fits the screen
      // "contain" - fit within bounds
      // "cover" - fill screen (may crop)
      // "native" - platform default
      "resizeMode": "contain",
      
      // Background color behind image
      "backgroundColor": "#ffffff"
    },
    
    "ios": {
      "splash": {
        "image": "./assets/splash-ios.png",
        "resizeMode": "contain",
        "backgroundColor": "#ffffff",
        // Dark mode splash
        "dark": {
          "image": "./assets/splash-ios-dark.png",
          "backgroundColor": "#000000"
        }
      }
    },
    
    "android": {
      "splash": {
        "image": "./assets/splash-android.png",
        "resizeMode": "contain",
        "backgroundColor": "#ffffff",
        // Android 12+ splash
        "dark": {
          "image": "./assets/splash-android-dark.png",
          "backgroundColor": "#000000"
        }
      }
    }
  }
}</code></pre>

                <h3>Using expo-splash-screen for Control</h3>

                <pre><code>// App.tsx
import * as SplashScreen from 'expo-splash-screen';
import { useCallback, useEffect, useState } from 'react';

// Keep splash visible while loading
SplashScreen.preventAutoHideAsync();

export default function App() {
  const [appIsReady, setAppIsReady] = useState(false);

  useEffect(() => {
    async function prepare() {
      try {
        // Pre-load fonts, make API calls, etc.
        await loadFonts();
        await fetchInitialData();
      } catch (e) {
        console.warn(e);
      } finally {
        setAppIsReady(true);
      }
    }

    prepare();
  }, []);

  const onLayoutRootView = useCallback(async () => {
    if (appIsReady) {
      // Hide splash screen after layout
      await SplashScreen.hideAsync();
    }
  }, [appIsReady]);

  if (!appIsReady) {
    return null;
  }

  return (
    &lt;View style={{ flex: 1 }} onLayout={onLayoutRootView}&gt;
      &lt;RootNavigator /&gt;
    &lt;/View&gt;
  );
}</code></pre>
            </section>

            <section id="platform-specific">
                <h2>Platform-Specific Configuration</h2>

                <p>iOS and Android have unique requirements and capabilities. Configure each platform appropriately.</p>

                <h3>iOS Configuration</h3>

                <pre><code>{
  "expo": {
    "ios": {
      "bundleIdentifier": "com.company.app",
      "buildNumber": "1",
      
      // Device support
      "supportsTablet": true,
      "isTabletOnly": false,
      "requireFullScreen": false,
      
      // Capabilities
      "usesAppleSignIn": true,
      "usesIcloudStorage": false,
      
      // App Store category
      "appStoreUrl": "https://apps.apple.com/app/id123456789",
      
      // Info.plist values
      "infoPlist": {
        "NSCameraUsageDescription": "This app uses the camera to scan documents",
        "NSPhotoLibraryUsageDescription": "This app saves photos to your library",
        "NSLocationWhenInUseUsageDescription": "This app uses your location to show nearby places",
        "UIBackgroundModes": ["location", "fetch", "remote-notification"]
      },
      
      // Entitlements
      "entitlements": {
        "com.apple.developer.applesignin": ["Default"],
        "aps-environment": "production"
      },
      
      // Associated domains for universal links
      "associatedDomains": [
        "applinks:yourapp.com",
        "webcredentials:yourapp.com"
      ],
      
      // URL schemes
      "scheme": "myapp",
      
      // Privacy manifests (iOS 17+)
      "privacyManifests": {
        "NSPrivacyAccessedAPITypes": [
          {
            "NSPrivacyAccessedAPIType": "NSPrivacyAccessedAPICategoryUserDefaults",
            "NSPrivacyAccessedAPITypeReasons": ["CA92.1"]
          }
        ]
      }
    }
  }
}</code></pre>

                <h3>Android Configuration</h3>

                <pre><code>{
  "expo": {
    "android": {
      "package": "com.company.app",
      "versionCode": 1,
      
      // Adaptive icon
      "adaptiveIcon": {
        "foregroundImage": "./assets/adaptive-icon.png",
        "backgroundColor": "#ffffff"
      },
      
      // Permissions
      "permissions": [
        "CAMERA",
        "READ_EXTERNAL_STORAGE",
        "WRITE_EXTERNAL_STORAGE",
        "ACCESS_FINE_LOCATION",
        "ACCESS_COARSE_LOCATION",
        "RECEIVE_BOOT_COMPLETED",
        "VIBRATE"
      ],
      
      // Block certain permissions from being added
      "blockedPermissions": [
        "READ_PHONE_STATE"
      ],
      
      // Google Play Store
      "playStoreUrl": "https://play.google.com/store/apps/details?id=com.company.app",
      
      // Intent filters for deep links
      "intentFilters": [
        {
          "action": "VIEW",
          "autoVerify": true,
          "data": [
            {
              "scheme": "https",
              "host": "yourapp.com",
              "pathPrefix": "/app"
            }
          ],
          "category": ["BROWSABLE", "DEFAULT"]
        }
      ],
      
      // URL scheme
      "scheme": "myapp",
      
      // Google Services (for Firebase, Maps, etc.)
      "googleServicesFile": "./google-services.json",
      
      // Gradle properties
      "config": {
        "googleMaps": {
          "apiKey": "YOUR_GOOGLE_MAPS_API_KEY"
        }
      },
      
      // Soft input mode
      "softwareKeyboardLayoutMode": "pan",
      
      // Allow cleartext traffic (development only!)
      "usesCleartextTraffic": false
    }
  }
}</code></pre>

                <h3>Web Configuration</h3>

                <pre><code>{
  "expo": {
    "web": {
      "favicon": "./assets/favicon.png",
      "name": "My App",
      "shortName": "App",
      "description": "My awesome app",
      "lang": "en",
      "themeColor": "#2196F3",
      "backgroundColor": "#ffffff",
      
      // PWA configuration
      "bundler": "metro",
      "output": "single",
      
      // Meta tags
      "meta": {
        "apple-mobile-web-app-capable": "yes"
      }
    }
  }
}</code></pre>
            </section>

            <section id="dynamic-config">
                <h2>Dynamic Configuration</h2>

                <p>Use app.config.js for dynamic values based on environment, build profile, or other runtime conditions.</p>

                <h3>Environment-Based Configuration</h3>

                <pre><code>// app.config.js
const IS_DEV = process.env.APP_VARIANT === 'development';
const IS_PREVIEW = process.env.APP_VARIANT === 'preview';

const getUniqueIdentifier = () => {
  if (IS_DEV) return 'com.company.app.dev';
  if (IS_PREVIEW) return 'com.company.app.preview';
  return 'com.company.app';
};

const getAppName = () => {
  if (IS_DEV) return 'My App (Dev)';
  if (IS_PREVIEW) return 'My App (Preview)';
  return 'My App';
};

export default {
  expo: {
    name: getAppName(),
    slug: 'my-app',
    version: '1.0.0',
    
    ios: {
      bundleIdentifier: getUniqueIdentifier(),
    },
    android: {
      package: getUniqueIdentifier(),
    },
    
    extra: {
      // Make environment available at runtime
      appVariant: process.env.APP_VARIANT || 'production',
    },
  }
};</code></pre>

                <h3>Using EAS Build Profiles</h3>

                <pre><code>// eas.json
{
  "build": {
    "development": {
      "developmentClient": true,
      "distribution": "internal",
      "env": {
        "APP_VARIANT": "development"
      }
    },
    "preview": {
      "distribution": "internal",
      "env": {
        "APP_VARIANT": "preview"
      }
    },
    "production": {
      "env": {
        "APP_VARIANT": "production"
      }
    }
  }
}</code></pre>

                <h3>TypeScript Configuration</h3>

                <pre><code>// app.config.ts
import { ExpoConfig, ConfigContext } from 'expo/config';

const defineConfig = ({ config }: ConfigContext): ExpoConfig => {
  const isDev = process.env.APP_VARIANT === 'development';
  
  return {
    ...config,
    name: isDev ? 'My App (Dev)' : 'My App',
    slug: 'my-app',
    version: '1.0.0',
    
    ios: {
      bundleIdentifier: isDev ? 'com.company.app.dev' : 'com.company.app',
      buildNumber: process.env.BUILD_NUMBER || '1',
    },
    
    android: {
      package: isDev ? 'com.company.app.dev' : 'com.company.app',
      versionCode: parseInt(process.env.BUILD_NUMBER || '1', 10),
    },
    
    extra: {
      eas: {
        projectId: process.env.EAS_PROJECT_ID,
      },
      apiUrl: isDev 
        ? 'https://api-dev.yourapp.com'
        : 'https://api.yourapp.com',
    },
  };
};

export default defineConfig;</code></pre>

                <h3>Accessing Config at Runtime</h3>

                <pre><code>// Access via expo-constants
import Constants from 'expo-constants';

// Get extra config values
const apiUrl = Constants.expoConfig?.extra?.apiUrl;
const appVariant = Constants.expoConfig?.extra?.appVariant;

// Get manifest info
const appVersion = Constants.expoConfig?.version;
const appName = Constants.expoConfig?.name;

// Example usage
function ApiService() {
  const baseUrl = Constants.expoConfig?.extra?.apiUrl || 'https://api.default.com';
  
  return {
    fetch: (endpoint: string) => fetch(`${baseUrl}${endpoint}`),
  };
}</code></pre>
            </section>

            <section id="permissions">
                <h2>Permissions and Entitlements</h2>

                <p>Properly declaring permissions is crucial for app store approval and user trust.</p>

                <h3>iOS Permission Descriptions</h3>

                <pre><code>{
  "expo": {
    "ios": {
      "infoPlist": {
        // Camera
        "NSCameraUsageDescription": "$(PRODUCT_NAME) needs camera access to take photos for your profile",
        
        // Photos
        "NSPhotoLibraryUsageDescription": "$(PRODUCT_NAME) needs photo library access to select profile pictures",
        "NSPhotoLibraryAddUsageDescription": "$(PRODUCT_NAME) needs permission to save photos",
        
        // Location
        "NSLocationWhenInUseUsageDescription": "$(PRODUCT_NAME) needs your location to show nearby stores",
        "NSLocationAlwaysAndWhenInUseUsageDescription": "$(PRODUCT_NAME) needs background location for delivery tracking",
        "NSLocationAlwaysUsageDescription": "$(PRODUCT_NAME) tracks your location in background for navigation",
        
        // Microphone
        "NSMicrophoneUsageDescription": "$(PRODUCT_NAME) needs microphone access for voice messages",
        
        // Contacts
        "NSContactsUsageDescription": "$(PRODUCT_NAME) needs contacts to help you find friends",
        
        // Calendar
        "NSCalendarsUsageDescription": "$(PRODUCT_NAME) needs calendar access to schedule events",
        
        // Face ID
        "NSFaceIDUsageDescription": "$(PRODUCT_NAME) uses Face ID for secure authentication",
        
        // Bluetooth
        "NSBluetoothAlwaysUsageDescription": "$(PRODUCT_NAME) uses Bluetooth to connect to devices",
        "NSBluetoothPeripheralUsageDescription": "$(PRODUCT_NAME) uses Bluetooth for device communication",
        
        // Motion
        "NSMotionUsageDescription": "$(PRODUCT_NAME) uses motion data for fitness tracking",
        
        // Health
        "NSHealthShareUsageDescription": "$(PRODUCT_NAME) reads health data to track your progress",
        "NSHealthUpdateUsageDescription": "$(PRODUCT_NAME) saves workout data to Health"
      }
    }
  }
}</code></pre>

                <h3>Android Permissions</h3>

                <pre><code>{
  "expo": {
    "android": {
      "permissions": [
        // Camera
        "CAMERA",
        
        // Storage
        "READ_EXTERNAL_STORAGE",
        "WRITE_EXTERNAL_STORAGE",
        "READ_MEDIA_IMAGES",
        "READ_MEDIA_VIDEO",
        
        // Location
        "ACCESS_FINE_LOCATION",
        "ACCESS_COARSE_LOCATION",
        "ACCESS_BACKGROUND_LOCATION",
        
        // Audio
        "RECORD_AUDIO",
        
        // Contacts
        "READ_CONTACTS",
        "WRITE_CONTACTS",
        
        // Calendar
        "READ_CALENDAR",
        "WRITE_CALENDAR",
        
        // Bluetooth
        "BLUETOOTH",
        "BLUETOOTH_ADMIN",
        "BLUETOOTH_SCAN",
        "BLUETOOTH_CONNECT",
        
        // Notifications
        "RECEIVE_BOOT_COMPLETED",
        "VIBRATE",
        "POST_NOTIFICATIONS",
        
        // Biometrics
        "USE_BIOMETRIC",
        "USE_FINGERPRINT"
      ],
      
      // Remove unwanted auto-added permissions
      "blockedPermissions": [
        "READ_PHONE_STATE",
        "READ_CALL_LOG"
      ]
    }
  }
}</code></pre>

                <h3>iOS Entitlements</h3>

                <pre><code>{
  "expo": {
    "ios": {
      "entitlements": {
        // Apple Sign In
        "com.apple.developer.applesignin": ["Default"],
        
        // Push Notifications
        "aps-environment": "production",
        
        // iCloud
        "com.apple.developer.icloud-container-identifiers": [
          "iCloud.com.company.app"
        ],
        "com.apple.developer.icloud-services": ["CloudDocuments"],
        
        // App Groups (for sharing data with extensions)
        "com.apple.security.application-groups": [
          "group.com.company.app"
        ],
        
        // Associated Domains
        "com.apple.developer.associated-domains": [
          "applinks:yourapp.com",
          "webcredentials:yourapp.com"
        ],
        
        // HealthKit
        "com.apple.developer.healthkit": true,
        "com.apple.developer.healthkit.access": [],
        
        // Background Modes
        "UIBackgroundModes": [
          "audio",
          "location",
          "fetch",
          "remote-notification",
          "processing"
        ]
      }
    }
  }
}</code></pre>
            </section>

            <section id="exercises">
                <h2>Hands-On Exercises</h2>

                <div class="exercise-card">
                    <h3>Exercise 1: Complete App Configuration</h3>
                    <p>Create a complete app.config.ts for a fitness tracking app with the following requirements:</p>
                    <ul>
                        <li>Different bundle IDs for dev/preview/production</li>
                        <li>Custom app names per environment</li>
                        <li>Camera, location, and health permissions</li>
                        <li>Deep linking support</li>
                    </ul>

                    <details>
                        <summary>Show Solution</summary>
                        <pre><code>// app.config.ts
import { ExpoConfig, ConfigContext } from 'expo/config';

type AppVariant = 'development' | 'preview' | 'production';

const getVariant = (): AppVariant => {
  const variant = process.env.APP_VARIANT;
  if (variant === 'development' || variant === 'preview') {
    return variant;
  }
  return 'production';
};

const variant = getVariant();

const envConfig = {
  development: {
    name: 'FitTrack (Dev)',
    bundleId: 'com.fittrack.app.dev',
    apiUrl: 'https://api-dev.fittrack.com',
  },
  preview: {
    name: 'FitTrack (Beta)',
    bundleId: 'com.fittrack.app.preview',
    apiUrl: 'https://api-staging.fittrack.com',
  },
  production: {
    name: 'FitTrack',
    bundleId: 'com.fittrack.app',
    apiUrl: 'https://api.fittrack.com',
  },
};

const config = envConfig[variant];

export default ({ config: expoConfig }: ConfigContext): ExpoConfig => ({
  ...expoConfig,
  name: config.name,
  slug: 'fittrack',
  version: '1.0.0',
  orientation: 'portrait',
  icon: './assets/icon.png',
  scheme: 'fittrack',
  
  splash: {
    image: './assets/splash.png',
    resizeMode: 'contain',
    backgroundColor: '#4CAF50',
  },
  
  ios: {
    bundleIdentifier: config.bundleId,
    buildNumber: process.env.BUILD_NUMBER || '1',
    supportsTablet: true,
    
    infoPlist: {
      NSCameraUsageDescription: 'FitTrack uses camera to scan food barcodes',
      NSLocationWhenInUseUsageDescription: 'FitTrack tracks your workout routes',
      NSLocationAlwaysAndWhenInUseUsageDescription: 'FitTrack tracks outdoor activities in background',
      NSHealthShareUsageDescription: 'FitTrack reads health data to track your progress',
      NSHealthUpdateUsageDescription: 'FitTrack saves workout data to Health',
      NSMotionUsageDescription: 'FitTrack uses motion for step counting',
      UIBackgroundModes: ['location', 'fetch', 'remote-notification'],
    },
    
    entitlements: {
      'com.apple.developer.healthkit': true,
      'com.apple.developer.healthkit.access': [],
      'aps-environment': variant === 'production' ? 'production' : 'development',
    },
    
    associatedDomains: ['applinks:fittrack.com'],
  },
  
  android: {
    package: config.bundleId,
    versionCode: parseInt(process.env.BUILD_NUMBER || '1', 10),
    
    adaptiveIcon: {
      foregroundImage: './assets/adaptive-icon.png',
      backgroundColor: '#4CAF50',
    },
    
    permissions: [
      'CAMERA',
      'ACCESS_FINE_LOCATION',
      'ACCESS_COARSE_LOCATION',
      'ACCESS_BACKGROUND_LOCATION',
      'ACTIVITY_RECOGNITION',
      'POST_NOTIFICATIONS',
      'VIBRATE',
    ],
    
    intentFilters: [
      {
        action: 'VIEW',
        autoVerify: true,
        data: [{ scheme: 'https', host: 'fittrack.com', pathPrefix: '/app' }],
        category: ['BROWSABLE', 'DEFAULT'],
      },
    ],
  },
  
  extra: {
    eas: { projectId: process.env.EAS_PROJECT_ID },
    apiUrl: config.apiUrl,
    appVariant: variant,
  },
});</code></pre>
                    </details>
                </div>

                <div class="exercise-card">
                    <h3>Exercise 2: Icon and Splash Screen Setup</h3>
                    <p>Configure proper icons and splash screens for all platforms including dark mode support.</p>

                    <details>
                        <summary>Show Solution</summary>
                        <pre><code>{
  "expo": {
    "icon": "./assets/icon.png",
    
    "splash": {
      "image": "./assets/splash-logo.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    
    "ios": {
      "icon": "./assets/ios-icon.png",
      "splash": {
        "image": "./assets/splash-logo.png",
        "resizeMode": "contain",
        "backgroundColor": "#ffffff",
        "dark": {
          "image": "./assets/splash-logo-dark.png",
          "backgroundColor": "#1a1a1a"
        }
      }
    },
    
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/adaptive-icon-fg.png",
        "backgroundImage": "./assets/adaptive-icon-bg.png",
        "monochromeImage": "./assets/adaptive-icon-mono.png"
      },
      "splash": {
        "image": "./assets/splash-logo.png",
        "resizeMode": "contain",
        "backgroundColor": "#ffffff",
        "dark": {
          "image": "./assets/splash-logo-dark.png",
          "backgroundColor": "#1a1a1a"
        }
      }
    },
    
    "web": {
      "favicon": "./assets/favicon.png"
    }
  }
}</code></pre>
                    </details>
                </div>
            </section>

            <section id="summary">
                <h2>Summary</h2>

                <p>Proper app configuration is the foundation of a successful production app. Taking time to set it up correctly saves headaches later.</p>

                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h4 style="color: white;">üéØ Key Takeaways</h4>
                    <ul style="color: white;">
                        <li><strong>app.config.js over app.json</strong> ‚Äî Use dynamic config for flexibility</li>
                        <li><strong>Bundle IDs are permanent</strong> ‚Äî Choose carefully before first submission</li>
                        <li><strong>Icons matter</strong> ‚Äî Follow size requirements exactly</li>
                        <li><strong>Platform-specific config</strong> ‚Äî iOS and Android have unique needs</li>
                        <li><strong>Environment variants</strong> ‚Äî Separate dev/preview/production configs</li>
                        <li><strong>Permissions require descriptions</strong> ‚Äî Be clear about why you need them</li>
                        <li><strong>Use expo-constants</strong> ‚Äî Access config at runtime</li>
                    </ul>
                </div>

                <p>In the next lesson, we'll explore environment management ‚Äî handling API keys, secrets, and environment-specific configurations securely.</p>
            </section>

            <div class="lesson-nav">
                <a href="m11_l05_profiling_debugging.html" class="prev-link">‚Üê Previous: Profiling and Debugging</a>
                <a href="index.html" class="home-link">üè† Home</a>
                <a href="m12_l02_environment_management.html" class="next-link">Next: Environment Management ‚Üí</a>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 React Native & Expo Course. All rights reserved.</p>
        </div>
    </footer>

    <script src="js/clipboard.js"></script>
    <script src="js/course-enhancements.js"></script>
</body>
</html>
