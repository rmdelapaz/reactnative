<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Understand mobile navigation patterns and concepts before implementing them with Expo Router in React Native">
    <meta name="author" content="React Native & Expo Course">
    <title>Navigation Concepts | Module 6: Navigation with Expo Router | React Native & Expo Course</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-to-main">Skip to main content</a>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="index.html" class="nav-logo">üì± RN Course</a>
            <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-expanded="false" aria-controls="nav-links">
                ‚ò∞
            </button>
            <div class="nav-links" id="nav-links">
                <a href="index.html">Home</a>
                <a href="index.html#modules">Modules</a>
                <a href="index.html#appendices">Appendices</a>
                <button id="theme-toggle" aria-label="Toggle theme">üåô</button>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="breadcrumb">
        <div class="container">
            <a href="index.html">Home</a> &gt;
            <a href="index.html#modules">Modules</a> &gt;
            <a href="m06_l01_navigation_concepts.html">Module 6</a> &gt;
            <span>Lesson 6.1</span>
        </div>
    </div>

    <!-- Main Content -->
    <main id="main-content">
        <div class="container">
            <!-- Lesson Header -->
            <header>
                <p class="module-tag">Module 6: Navigation with Expo Router</p>
                <h1>Navigation Concepts</h1>
                <p class="lesson-subtitle">Understanding how users move through mobile apps before we build it</p>
            </header>

            <!-- Learning Objectives -->
            <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <h2 style="color: white; border: none; margin-top: 0;">üéØ Learning Objectives</h2>
                <ul style="color: white;">
                    <li>Understand why mobile navigation differs fundamentally from web navigation</li>
                    <li>Learn the four core navigation patterns: Stack, Tab, Drawer, and Modal</li>
                    <li>Visualize the navigation stack and how screens layer on top of each other</li>
                    <li>Recognize platform-specific navigation conventions for iOS and Android</li>
                    <li>Understand navigation state and how it drives what users see</li>
                    <li>Know why navigation libraries exist and what problems they solve</li>
                    <li>Preview the navigation architecture we'll build throughout this module</li>
                </ul>
            </div>

            <!-- Table of Contents -->
            <div class="toc-container">
                <details class="toc-details" open>
                    <summary>üìë Table of Contents</summary>
                    <ul class="toc-list">
                        <li><a href="#web-vs-mobile">Web vs Mobile Navigation</a></li>
                        <li><a href="#stack-navigation">Stack Navigation: The Foundation</a></li>
                        <li><a href="#tab-navigation">Tab Navigation: Parallel Destinations</a></li>
                        <li><a href="#drawer-navigation">Drawer Navigation: Hidden Menus</a></li>
                        <li><a href="#modal-navigation">Modal Navigation: Focused Interactions</a></li>
                        <li><a href="#combining-patterns">Combining Navigation Patterns</a></li>
                        <li><a href="#navigation-state">Navigation State: The Source of Truth</a></li>
                        <li><a href="#platform-conventions">Platform Conventions</a></li>
                        <li><a href="#why-libraries">Why Navigation Libraries?</a></li>
                        <li><a href="#expo-router-preview">Preview: Expo Router</a></li>
                        <li><a href="#exercises">Hands-On Exercises</a></li>
                        <li><a href="#summary">Summary</a></li>
                    </ul>
                </details>
            </div>

            <!-- Web vs Mobile Navigation -->
            <section id="web-vs-mobile">
                <h2>Web vs Mobile Navigation</h2>

                <p>If you're coming from web development, you need to fundamentally rewire how you think about navigation. On the web, navigation is simple: URLs map to pages, the browser handles the back button, and every page exists independently. Mobile is different‚Äîdramatically different.</p>

                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h4 style="color: white;">üìñ The Core Difference</h4>
                    <p style="color: white;"><strong>Web navigation is URL-based and stateless. Mobile navigation is state-based and hierarchical.</strong> On the web, you navigate BY changing the URL. On mobile, you navigate BY manipulating a stack of screens, each maintaining its own state.</p>
                </div>

                <p>Let's visualize this mental shift:</p>

                <!-- SVG: Web vs Mobile Navigation Comparison -->
                <div class="svg-container" style="text-align: center; margin: 2rem 0;">
                    <svg viewBox="0 0 700 400" style="max-width: 100%; height: auto; font-family: system-ui, sans-serif;">
                        <!-- Background -->
                        <rect width="700" height="400" fill="#f8f9fa"/>
                        
                        <!-- Title -->
                        <text x="350" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#333">Navigation Mental Models</text>
                        
                        <!-- Web Side -->
                        <text x="175" y="65" text-anchor="middle" font-size="14" font-weight="bold" fill="#2196F3">üåê Web Navigation</text>
                        
                        <!-- Browser with URL bar -->
                        <rect x="50" y="85" width="250" height="180" fill="#fff" stroke="#e0e0e0" stroke-width="2" rx="8"/>
                        <!-- URL bar -->
                        <rect x="60" y="95" width="230" height="25" fill="#f5f5f5" stroke="#ddd" stroke-width="1" rx="4"/>
                        <text x="175" y="112" text-anchor="middle" font-size="10" fill="#666">/products/shoes/nike-123</text>
                        
                        <!-- Page content representation -->
                        <rect x="70" y="130" width="210" height="125" fill="#e3f2fd" stroke="#2196F3" stroke-width="1" rx="4"/>
                        <text x="175" y="155" text-anchor="middle" font-size="11" fill="#1976D2" font-weight="bold">Product Page</text>
                        <text x="175" y="175" text-anchor="middle" font-size="9" fill="#666">Each URL = One Page</text>
                        <text x="175" y="195" text-anchor="middle" font-size="9" fill="#666">Page is destroyed on navigate</text>
                        <text x="175" y="215" text-anchor="middle" font-size="9" fill="#666">State resets unless persisted</text>
                        <text x="175" y="235" text-anchor="middle" font-size="9" fill="#666">Browser handles back button</text>
                        
                        <!-- Arrow showing URL change -->
                        <path d="M175,275 L175,310" stroke="#2196F3" stroke-width="2" marker-end="url(#arrowBlue)"/>
                        <text x="175" y="330" text-anchor="middle" font-size="10" fill="#2196F3">Navigate = Change URL</text>
                        <text x="175" y="345" text-anchor="middle" font-size="9" fill="#666">Old page gone, new page loads</text>
                        
                        <!-- Mobile Side -->
                        <text x="525" y="65" text-anchor="middle" font-size="14" font-weight="bold" fill="#4CAF50">üì± Mobile Navigation</text>
                        
                        <!-- Phone outline -->
                        <rect x="430" y="85" width="190" height="280" fill="#fff" stroke="#333" stroke-width="3" rx="20"/>
                        <!-- Notch -->
                        <rect x="495" y="90" width="60" height="12" fill="#333" rx="4"/>
                        <!-- Screen area -->
                        <rect x="440" y="110" width="170" height="230" fill="#f5f5f5"/>
                        
                        <!-- Stacked screens visualization -->
                        <g>
                            <!-- Bottom screen (Home) -->
                            <rect x="450" y="260" width="150" height="70" fill="#c8e6c9" stroke="#4CAF50" stroke-width="1" rx="4" opacity="0.5"/>
                            <text x="525" y="300" text-anchor="middle" font-size="9" fill="#2e7d32">Home Screen</text>
                            
                            <!-- Middle screen (Products) -->
                            <rect x="455" y="200" width="150" height="70" fill="#a5d6a7" stroke="#4CAF50" stroke-width="1" rx="4" opacity="0.7"/>
                            <text x="530" y="240" text-anchor="middle" font-size="9" fill="#1b5e20">Products List</text>
                            
                            <!-- Top screen (Product Detail) - current -->
                            <rect x="460" y="140" width="150" height="70" fill="#81c784" stroke="#4CAF50" stroke-width="2" rx="4"/>
                            <text x="535" y="170" text-anchor="middle" font-size="10" fill="#1b5e20" font-weight="bold">Product Detail</text>
                            <text x="535" y="185" text-anchor="middle" font-size="8" fill="#333">‚Üê Visible Screen</text>
                        </g>
                        
                        <!-- Stack indicator -->
                        <text x="525" y="355" text-anchor="middle" font-size="10" fill="#4CAF50">Screens stack on top</text>
                        <text x="525" y="370" text-anchor="middle" font-size="9" fill="#666">Previous screens preserved</text>
                        
                        <!-- Defs for arrow markers -->
                        <defs>
                            <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#2196F3"/>
                            </marker>
                        </defs>
                    </svg>
                </div>

                <p>This difference has profound implications for how you build apps:</p>

                <div class="card">
                    <h4>üîÑ Key Differences</h4>
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f5f5f5;">
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Aspect</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Web</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Mobile</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Navigation trigger</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">URL change</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Stack manipulation</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Previous screen</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Destroyed (usually)</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Preserved in memory</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Screen state</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Lost unless saved</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Maintained while in stack</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Back button</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Browser history</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Pops current screen off stack</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Animations</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Page reload (or SPA fade)</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Native slide/fade transitions</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px;"><strong>Deep linking</strong></td>
                                <td style="padding: 12px;">Natural (URLs exist)</td>
                                <td style="padding: 12px;">Requires configuration</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="card" style="background: #e3f2fd; border-left: 4px solid #2196F3;">
                    <h4>üí° The SPA Connection</h4>
                    <p>If you've built Single Page Applications (SPAs) with React Router, you're closer to mobile navigation than traditional web developers. SPAs also manage navigation state in JavaScript rather than relying solely on the browser. However, even SPAs typically don't preserve previous "pages" the way mobile does‚Äîthey mount and unmount components as routes change.</p>
                </div>

                <h3>Why Mobile Navigation Is Stateful</h3>

                <p>Mobile navigation evolved this way for good reasons:</p>

                <ol>
                    <li><strong>Limited screen real estate:</strong> You can only show one "page" at a time, so you need a system to manage what's visible</li>
                    <li><strong>Touch-based interaction:</strong> Gestures like swiping to go back require screens to exist (you're literally dragging the current screen aside)</li>
                    <li><strong>Memory and performance:</strong> Creating/destroying complex UIs is expensive; keeping screens in memory enables instant back navigation</li>
                    <li><strong>User expectations:</strong> When users go back, they expect to see exactly what they left, not a fresh reload</li>
                </ol>

                <p>This statefulness is both powerful and challenging. It enables fluid, native-feeling navigation, but it also means you need to think carefully about screen lifecycle, memory usage, and state management.</p>
            </section>

            <!-- Stack Navigation -->
            <section id="stack-navigation">
                <h2>Stack Navigation: The Foundation</h2>

                <p>Stack navigation is the most fundamental navigation pattern in mobile apps. Think of it like a deck of cards: you can add cards to the top (push), remove the top card (pop), or see what's on top (the current screen).</p>

                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h4 style="color: white;">üìñ Stack Navigation Defined</h4>
                    <p style="color: white;"><strong>Stack navigation</strong> organizes screens in a last-in-first-out (LIFO) structure. When you navigate to a new screen, it's "pushed" onto the stack. When you go back, the current screen is "popped" off, revealing the screen beneath it.</p>
                </div>

                <p>This is the navigation pattern you encounter constantly:</p>

                <ul>
                    <li>Email app: Inbox ‚Üí Email Detail ‚Üí Attachment Preview</li>
                    <li>Shopping app: Product List ‚Üí Product Detail ‚Üí Add to Cart</li>
                    <li>Settings: Settings ‚Üí Wi-Fi ‚Üí Network Details</li>
                </ul>

                <!-- SVG: Stack Navigation Visualization -->
                <div class="svg-container" style="text-align: center; margin: 2rem 0;">
                    <svg viewBox="0 0 700 350" style="max-width: 100%; height: auto; font-family: system-ui, sans-serif;">
                        <!-- Background -->
                        <rect width="700" height="350" fill="#f8f9fa"/>
                        
                        <!-- Title -->
                        <text x="350" y="30" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">Stack Navigation: Push and Pop</text>
                        
                        <!-- Initial State -->
                        <text x="100" y="60" text-anchor="middle" font-size="12" fill="#666">1. Initial</text>
                        <rect x="50" y="75" width="100" height="200" fill="#e8f5e9" stroke="#4CAF50" stroke-width="2" rx="4"/>
                        <rect x="60" y="220" width="80" height="45" fill="#81c784" stroke="#4CAF50" stroke-width="2" rx="4"/>
                        <text x="100" y="248" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Home</text>
                        
                        <!-- After Push 1 -->
                        <text x="230" y="60" text-anchor="middle" font-size="12" fill="#666">2. Push "Products"</text>
                        <rect x="180" y="75" width="100" height="200" fill="#e8f5e9" stroke="#4CAF50" stroke-width="2" rx="4"/>
                        <rect x="190" y="220" width="80" height="45" fill="#a5d6a7" stroke="#4CAF50" stroke-width="1" rx="4" opacity="0.7"/>
                        <text x="230" y="248" text-anchor="middle" font-size="10" fill="#2e7d32">Home</text>
                        <rect x="195" y="165" width="80" height="45" fill="#81c784" stroke="#4CAF50" stroke-width="2" rx="4"/>
                        <text x="235" y="193" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Products</text>
                        
                        <!-- Arrow -->
                        <path d="M155,175 L175,175" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowGreen)"/>
                        
                        <!-- After Push 2 -->
                        <text x="360" y="60" text-anchor="middle" font-size="12" fill="#666">3. Push "Detail"</text>
                        <rect x="310" y="75" width="100" height="200" fill="#e8f5e9" stroke="#4CAF50" stroke-width="2" rx="4"/>
                        <rect x="320" y="220" width="80" height="45" fill="#c8e6c9" stroke="#4CAF50" stroke-width="1" rx="4" opacity="0.5"/>
                        <text x="360" y="248" text-anchor="middle" font-size="9" fill="#2e7d32">Home</text>
                        <rect x="325" y="165" width="80" height="45" fill="#a5d6a7" stroke="#4CAF50" stroke-width="1" rx="4" opacity="0.7"/>
                        <text x="365" y="193" text-anchor="middle" font-size="9" fill="#2e7d32">Products</text>
                        <rect x="330" y="110" width="80" height="45" fill="#81c784" stroke="#4CAF50" stroke-width="2" rx="4"/>
                        <text x="370" y="138" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Detail</text>
                        
                        <!-- Arrow -->
                        <path d="M285,175 L305,175" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowGreen)"/>
                        
                        <!-- After Pop -->
                        <text x="490" y="60" text-anchor="middle" font-size="12" fill="#666">4. Pop (Go Back)</text>
                        <rect x="440" y="75" width="100" height="200" fill="#e8f5e9" stroke="#4CAF50" stroke-width="2" rx="4"/>
                        <rect x="450" y="220" width="80" height="45" fill="#a5d6a7" stroke="#4CAF50" stroke-width="1" rx="4" opacity="0.7"/>
                        <text x="490" y="248" text-anchor="middle" font-size="10" fill="#2e7d32">Home</text>
                        <rect x="455" y="165" width="80" height="45" fill="#81c784" stroke="#4CAF50" stroke-width="2" rx="4"/>
                        <text x="495" y="193" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Products</text>
                        
                        <!-- Pop arrow -->
                        <path d="M415,140 Q430,100 460,110" stroke="#f44336" stroke-width="2" fill="none" stroke-dasharray="4"/>
                        <text x="430" y="95" text-anchor="middle" font-size="9" fill="#f44336">Detail removed</text>
                        
                        <!-- Arrow -->
                        <path d="M415,175 L435,175" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowGreen)"/>
                        
                        <!-- Final State -->
                        <text x="620" y="60" text-anchor="middle" font-size="12" fill="#666">5. Pop Again</text>
                        <rect x="570" y="75" width="100" height="200" fill="#e8f5e9" stroke="#4CAF50" stroke-width="2" rx="4"/>
                        <rect x="580" y="220" width="80" height="45" fill="#81c784" stroke="#4CAF50" stroke-width="2" rx="4"/>
                        <text x="620" y="248" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Home</text>
                        
                        <!-- Arrow -->
                        <path d="M545,175 L565,175" stroke="#4CAF50" stroke-width="2" marker-end="url(#arrowGreen)"/>
                        
                        <!-- Legend -->
                        <rect x="50" y="295" width="600" height="45" fill="white" stroke="#e0e0e0" stroke-width="1" rx="4"/>
                        <rect x="70" y="310" width="20" height="15" fill="#81c784" stroke="#4CAF50" stroke-width="1" rx="2"/>
                        <text x="100" y="322" font-size="11" fill="#333">Current (visible) screen</text>
                        <rect x="250" y="310" width="20" height="15" fill="#a5d6a7" stroke="#4CAF50" stroke-width="1" rx="2" opacity="0.7"/>
                        <text x="280" y="322" font-size="11" fill="#333">Screen in stack (preserved)</text>
                        <text x="500" y="322" font-size="11" fill="#666">Stack grows upward ‚Üí</text>
                        
                        <!-- Defs -->
                        <defs>
                            <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#4CAF50"/>
                            </marker>
                        </defs>
                    </svg>
                </div>

                <h3>Stack Operations in Code</h3>

                <p>Here's what stack navigation looks like conceptually (we'll see the real Expo Router implementation soon):</p>

                <pre><code class="language-tsx">// Conceptual stack operations

// 1. Push a new screen onto the stack
navigation.push('ProductDetail', { productId: 123 });
// Stack: [Home, Products, ProductDetail]

// 2. Go back (pop current screen)
navigation.goBack();
// Stack: [Home, Products]

// 3. Pop to a specific screen
navigation.popTo('Home');
// Stack: [Home]

// 4. Replace current screen (no stack change)
navigation.replace('Login');
// Stack: [Login] (if Home was the only screen)

// 5. Reset entire stack
navigation.reset({
  routes: [{ name: 'Home' }]
});
// Stack: [Home] (fresh start)</code></pre>

                <div class="card" style="background: #e8f5e9; border-left: 4px solid #4CAF50;">
                    <h4>‚úÖ Key Stack Behaviors</h4>
                    <ul>
                        <li><strong>Push:</strong> Adds a new screen on top, animates in from the right (iOS) or bottom (Android)</li>
                        <li><strong>Pop:</strong> Removes the top screen, animates out, reveals the screen below</li>
                        <li><strong>Replace:</strong> Swaps the current screen without adding to history (useful for auth flows)</li>
                        <li><strong>Reset:</strong> Clears the entire stack and starts fresh (useful after login/logout)</li>
                    </ul>
                </div>

                <h3>Screen Lifecycle in a Stack</h3>

                <p>Understanding when screens mount and unmount is crucial for managing data and effects:</p>

                <pre class="mermaid">
sequenceDiagram
    participant User
    participant Home
    participant Products
    participant Detail
    
    Note over Home: Home mounts (first screen)
    User->>Products: Navigate to Products
    Note over Products: Products mounts
    Note over Home: Home stays mounted (hidden)
    
    User->>Detail: Navigate to Detail
    Note over Detail: Detail mounts
    Note over Products: Products stays mounted (hidden)
    
    User->>Products: Go back
    Note over Detail: Detail unmounts
    Note over Products: Products becomes visible
    
    User->>Home: Go back
    Note over Products: Products unmounts
    Note over Home: Home becomes visible
                </pre>

                <p>This behavior has important implications:</p>

                <ul>
                    <li><strong>Data fetching:</strong> Screens might not refetch when you return to them (they're still mounted)</li>
                    <li><strong>State persistence:</strong> Form inputs, scroll positions‚Äîall preserved while in the stack</li>
                    <li><strong>Memory usage:</strong> Deep navigation hierarchies keep multiple screens in memory</li>
                    <li><strong>Side effects:</strong> Be careful with effects that should only run when the screen is visible</li>
                </ul>

                <div class="card" style="background-color: #fff3cd; border-left: 4px solid #ffc107;">
                    <h4>‚ö†Ô∏è Common Gotcha: Stale Data</h4>
                    <p>Since screens stay mounted, you might navigate back to a screen with outdated data. For example, you edit a product's details, go back to the list, and the list still shows old data. You'll need patterns like focus listeners or global state to handle this‚Äîwe'll cover solutions later in this module.</p>
                </div>
            </section>

            <!-- Tab Navigation -->
            <section id="tab-navigation">
                <h2>Tab Navigation: Parallel Destinations</h2>

                <p>While stack navigation is hierarchical (one screen leads to another), tab navigation is parallel‚Äîmultiple top-level destinations that users can switch between freely. Think of it as having multiple stacks, one per tab.</p>

                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h4 style="color: white;">üìñ Tab Navigation Defined</h4>
                    <p style="color: white;"><strong>Tab navigation</strong> provides a persistent bar (usually at the bottom) that lets users switch between distinct sections of your app. Each tab can contain its own navigation stack, allowing independent navigation within each section.</p>
                </div>

                <p>You've used tab navigation in virtually every app:</p>

                <ul>
                    <li>Instagram: Home, Search, Reels, Shop, Profile</li>
                    <li>Spotify: Home, Search, Your Library</li>
                    <li>Phone app: Favorites, Recents, Contacts, Keypad, Voicemail</li>
                </ul>

                <!-- SVG: Tab Navigation Visualization -->
                <div class="svg-container" style="text-align: center; margin: 2rem 0;">
                    <svg viewBox="0 0 700 380" style="max-width: 100%; height: auto; font-family: system-ui, sans-serif;">
                        <!-- Background -->
                        <rect width="700" height="380" fill="#f8f9fa"/>
                        
                        <!-- Title -->
                        <text x="350" y="30" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">Tab Navigation: Parallel Stacks</text>
                        
                        <!-- Phone outline -->
                        <rect x="250" y="50" width="200" height="320" fill="#fff" stroke="#333" stroke-width="3" rx="25"/>
                        <!-- Notch -->
                        <rect x="310" y="55" width="80" height="15" fill="#333" rx="5"/>
                        <!-- Screen area -->
                        <rect x="260" y="80" width="180" height="250" fill="#fafafa"/>
                        
                        <!-- Content area showing Home tab content -->
                        <rect x="270" y="90" width="160" height="190" fill="#e3f2fd" stroke="#2196F3" stroke-width="1" rx="4"/>
                        <text x="350" y="120" text-anchor="middle" font-size="14" font-weight="bold" fill="#1976D2">Home Feed</text>
                        <rect x="280" y="135" width="140" height="30" fill="#bbdefb" rx="4"/>
                        <rect x="280" y="170" width="140" height="30" fill="#bbdefb" rx="4"/>
                        <rect x="280" y="205" width="140" height="30" fill="#bbdefb" rx="4"/>
                        <rect x="280" y="240" width="140" height="30" fill="#bbdefb" rx="4"/>
                        
                        <!-- Tab bar -->
                        <rect x="260" y="285" width="180" height="45" fill="#fff" stroke="#e0e0e0" stroke-width="1"/>
                        
                        <!-- Tabs -->
                        <g>
                            <!-- Home tab (active) -->
                            <rect x="265" y="290" width="40" height="35" fill="#e3f2fd" rx="4"/>
                            <text x="285" y="305" text-anchor="middle" font-size="14">üè†</text>
                            <text x="285" y="318" text-anchor="middle" font-size="8" fill="#2196F3" font-weight="bold">Home</text>
                            
                            <!-- Search tab -->
                            <rect x="310" y="290" width="40" height="35" fill="transparent" rx="4"/>
                            <text x="330" y="305" text-anchor="middle" font-size="14">üîç</text>
                            <text x="330" y="318" text-anchor="middle" font-size="8" fill="#999">Search</text>
                            
                            <!-- Cart tab -->
                            <rect x="355" y="290" width="40" height="35" fill="transparent" rx="4"/>
                            <text x="375" y="305" text-anchor="middle" font-size="14">üõí</text>
                            <text x="375" y="318" text-anchor="middle" font-size="8" fill="#999">Cart</text>
                            
                            <!-- Profile tab -->
                            <rect x="400" y="290" width="40" height="35" fill="transparent" rx="4"/>
                            <text x="420" y="305" text-anchor="middle" font-size="14">üë§</text>
                            <text x="420" y="318" text-anchor="middle" font-size="8" fill="#999">Profile</text>
                        </g>
                        
                        <!-- Home indicator -->
                        <rect x="320" y="340" width="60" height="5" fill="#333" rx="2"/>
                        
                        <!-- Stacks diagram on right -->
                        <text x="550" y="70" text-anchor="middle" font-size="12" fill="#666">Each tab has its own stack</text>
                        
                        <!-- Home stack -->
                        <rect x="480" y="90" width="50" height="25" fill="#2196F3" rx="3"/>
                        <text x="505" y="107" text-anchor="middle" font-size="8" fill="white">Home</text>
                        <rect x="483" y="118" width="50" height="20" fill="#64b5f6" rx="3" opacity="0.7"/>
                        <text x="508" y="132" text-anchor="middle" font-size="7" fill="white">Detail</text>
                        <text x="505" y="155" text-anchor="middle" font-size="9" fill="#2196F3" font-weight="bold">‚Üê Active</text>
                        
                        <!-- Search stack -->
                        <rect x="545" y="90" width="50" height="25" fill="#9e9e9e" rx="3"/>
                        <text x="570" y="107" text-anchor="middle" font-size="8" fill="white">Search</text>
                        <text x="570" y="130" text-anchor="middle" font-size="8" fill="#999">(preserved)</text>
                        
                        <!-- Cart stack -->
                        <rect x="610" y="90" width="50" height="25" fill="#9e9e9e" rx="3"/>
                        <text x="635" y="107" text-anchor="middle" font-size="8" fill="white">Cart</text>
                        <rect x="613" y="118" width="50" height="20" fill="#bdbdbd" rx="3" opacity="0.7"/>
                        <text x="638" y="132" text-anchor="middle" font-size="7" fill="white">Checkout</text>
                        <text x="635" y="155" text-anchor="middle" font-size="8" fill="#999">(preserved)</text>
                        
                        <!-- Profile stack -->
                        <rect x="545" y="175" width="50" height="25" fill="#9e9e9e" rx="3"/>
                        <text x="570" y="192" text-anchor="middle" font-size="8" fill="white">Profile</text>
                        <rect x="548" y="203" width="50" height="20" fill="#bdbdbd" rx="3" opacity="0.7"/>
                        <text x="573" y="217" text-anchor="middle" font-size="7" fill="white">Settings</text>
                        <rect x="551" y="226" width="50" height="20" fill="#e0e0e0" rx="3" opacity="0.5"/>
                        <text x="576" y="240" text-anchor="middle" font-size="7" fill="#666">Privacy</text>
                        <text x="570" y="260" text-anchor="middle" font-size="8" fill="#999">(preserved)</text>
                        
                        <!-- Explanation -->
                        <rect x="480" y="280" width="190" height="70" fill="white" stroke="#e0e0e0" stroke-width="1" rx="4"/>
                        <text x="575" y="300" text-anchor="middle" font-size="10" font-weight="bold" fill="#333">Key Behavior</text>
                        <text x="575" y="315" text-anchor="middle" font-size="9" fill="#666">‚Ä¢ Each tab maintains its stack</text>
                        <text x="575" y="330" text-anchor="middle" font-size="9" fill="#666">‚Ä¢ Switching tabs preserves state</text>
                        <text x="575" y="345" text-anchor="middle" font-size="9" fill="#666">‚Ä¢ Tab bar always visible</text>
                    </svg>
                </div>

                <h3>Tab Navigation Characteristics</h3>

                <div class="card">
                    <h4>üìã Tab Navigation Rules</h4>
                    <ul>
                        <li><strong>Persistence:</strong> Each tab's navigation state is preserved when switching tabs</li>
                        <li><strong>Independence:</strong> Navigating within one tab doesn't affect other tabs</li>
                        <li><strong>Visibility:</strong> The tab bar typically stays visible (but can be hidden for immersive experiences)</li>
                        <li><strong>Reset behavior:</strong> Tapping an already-active tab often scrolls to top or pops to root</li>
                        <li><strong>Badge indicators:</strong> Tabs can show badges for notifications (like unread counts)</li>
                    </ul>
                </div>

                <pre><code class="language-tsx">// Tab navigation mental model

// User is in Home tab, navigates deep
// Stack: { home: [Feed, PostDetail, Comments], search: [], cart: [], profile: [] }

// User switches to Profile tab
// Stack: { home: [Feed, PostDetail, Comments], search: [], cart: [], profile: [Profile] }
// Home tab's stack is preserved!

// User navigates in Profile
// Stack: { home: [Feed, PostDetail, Comments], search: [], cart: [], profile: [Profile, Settings] }

// User switches back to Home
// Stack: { home: [Feed, PostDetail, Comments], search: [], cart: [], profile: [Profile, Settings] }
// They're back exactly where they left off in the Home tab!</code></pre>

                <div class="card" style="background: #e3f2fd; border-left: 4px solid #2196F3;">
                    <h4>üí° Design Guideline: Tab Count</h4>
                    <p>Both iOS and Android recommend 3-5 tabs maximum. More than 5 tabs creates a cluttered interface and makes targets too small on phone screens. If you have more destinations, consider using a drawer navigation or reorganizing your information architecture.</p>
                </div>
            </section>

            <!-- Drawer Navigation -->
            <section id="drawer-navigation">
                <h2>Drawer Navigation: Hidden Menus</h2>

                <p>Drawer navigation (also called "hamburger menu" or "side menu") hides navigation options in a panel that slides in from the edge of the screen. It's useful when you have many destinations but don't want them always visible.</p>

                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h4 style="color: white;">üìñ Drawer Navigation Defined</h4>
                    <p style="color: white;"><strong>Drawer navigation</strong> provides a sliding panel (typically from the left) that contains navigation options. It's hidden by default and revealed by tapping a menu icon or swiping from the screen edge.</p>
                </div>

                <p>You'll find drawer navigation in:</p>

                <ul>
                    <li>Gmail (switch between Inbox, Sent, Drafts, labels)</li>
                    <li>Google Drive (switch between My Drive, Shared, Starred)</li>
                    <li>Many Android apps (Android's Material Design emphasizes drawers)</li>
                </ul>

                <!-- SVG: Drawer Navigation -->
                <div class="svg-container" style="text-align: center; margin: 2rem 0;">
                    <svg viewBox="0 0 700 320" style="max-width: 100%; height: auto; font-family: system-ui, sans-serif;">
                        <!-- Background -->
                        <rect width="700" height="320" fill="#f8f9fa"/>
                        
                        <!-- Title -->
                        <text x="350" y="25" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">Drawer Navigation</text>
                        
                        <!-- Phone 1: Drawer closed -->
                        <text x="150" y="55" text-anchor="middle" font-size="11" fill="#666">Drawer Closed</text>
                        <rect x="75" y="65" width="150" height="240" fill="#fff" stroke="#333" stroke-width="2" rx="15"/>
                        <rect x="85" y="85" width="130" height="200" fill="#f5f5f5"/>
                        
                        <!-- Header with hamburger -->
                        <rect x="85" y="85" width="130" height="35" fill="#2196F3"/>
                        <text x="100" y="107" font-size="16" fill="white">‚ò∞</text>
                        <text x="150" y="108" text-anchor="middle" font-size="12" fill="white" font-weight="bold">Inbox</text>
                        
                        <!-- Content -->
                        <rect x="95" y="130" width="110" height="20" fill="#e0e0e0" rx="2"/>
                        <rect x="95" y="155" width="110" height="20" fill="#e0e0e0" rx="2"/>
                        <rect x="95" y="180" width="110" height="20" fill="#e0e0e0" rx="2"/>
                        
                        <!-- Arrow -->
                        <path d="M235,185 L265,185" stroke="#333" stroke-width="2" marker-end="url(#arrowBlack)"/>
                        <text x="250" y="175" text-anchor="middle" font-size="9" fill="#666">tap ‚ò∞</text>
                        
                        <!-- Phone 2: Drawer open -->
                        <text x="350" y="55" text-anchor="middle" font-size="11" fill="#666">Drawer Open</text>
                        <rect x="275" y="65" width="150" height="240" fill="#fff" stroke="#333" stroke-width="2" rx="15"/>
                        <rect x="285" y="85" width="130" height="200" fill="#f5f5f5"/>
                        
                        <!-- Drawer overlay -->
                        <rect x="285" y="85" width="130" height="200" fill="rgba(0,0,0,0.3)"/>
                        
                        <!-- Drawer panel -->
                        <rect x="285" y="85" width="90" height="200" fill="white" stroke="#e0e0e0" stroke-width="1"/>
                        
                        <!-- Drawer items -->
                        <rect x="290" y="95" width="80" height="30" fill="#e3f2fd"/>
                        <text x="330" y="115" text-anchor="middle" font-size="10" fill="#2196F3" font-weight="bold">üì• Inbox</text>
                        
                        <rect x="290" y="128" width="80" height="25" fill="transparent"/>
                        <text x="330" y="145" text-anchor="middle" font-size="10" fill="#666">üì§ Sent</text>
                        
                        <rect x="290" y="156" width="80" height="25" fill="transparent"/>
                        <text x="330" y="173" text-anchor="middle" font-size="10" fill="#666">üìù Drafts</text>
                        
                        <rect x="290" y="184" width="80" height="25" fill="transparent"/>
                        <text x="330" y="201" text-anchor="middle" font-size="10" fill="#666">üóëÔ∏è Trash</text>
                        
                        <rect x="290" y="212" width="80" height="25" fill="transparent"/>
                        <text x="330" y="229" text-anchor="middle" font-size="10" fill="#666">‚öôÔ∏è Settings</text>
                        
                        <!-- Arrow -->
                        <path d="M435,185 L465,185" stroke="#333" stroke-width="2" marker-end="url(#arrowBlack)"/>
                        <text x="450" y="175" text-anchor="middle" font-size="9" fill="#666">select</text>
                        
                        <!-- Phone 3: After selection -->
                        <text x="550" y="55" text-anchor="middle" font-size="11" fill="#666">New Screen</text>
                        <rect x="475" y="65" width="150" height="240" fill="#fff" stroke="#333" stroke-width="2" rx="15"/>
                        <rect x="485" y="85" width="130" height="200" fill="#f5f5f5"/>
                        
                        <!-- Header -->
                        <rect x="485" y="85" width="130" height="35" fill="#2196F3"/>
                        <text x="500" y="107" font-size="16" fill="white">‚ò∞</text>
                        <text x="550" y="108" text-anchor="middle" font-size="12" fill="white" font-weight="bold">Drafts</text>
                        
                        <!-- Different content -->
                        <rect x="495" y="130" width="110" height="20" fill="#fff3cd" rx="2"/>
                        <rect x="495" y="155" width="110" height="20" fill="#fff3cd" rx="2"/>
                        
                        <!-- Defs -->
                        <defs>
                            <marker id="arrowBlack" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
                            </marker>
                        </defs>
                    </svg>
                </div>

                <div class="card" style="background-color: #fff3cd; border-left: 4px solid #ffc107;">
                    <h4>‚ö†Ô∏è Drawer Navigation Considerations</h4>
                    <p>Drawer navigation has fallen out of favor for primary navigation on iOS (Apple discourages it) and is less common on modern Android apps too. The hidden nature of drawers means lower discoverability‚Äîusers might not know options exist. Consider drawers for secondary navigation or account-switching rather than primary app navigation.</p>
                </div>

                <h3>When to Use Drawer Navigation</h3>

                <ul>
                    <li>Apps with many sections that users access infrequently</li>
                    <li>Account switching (multiple email accounts, profiles)</li>
                    <li>Settings and secondary features</li>
                    <li>Complex enterprise apps with deep feature sets</li>
                </ul>
            </section>
            <!-- Modal Navigation -->
            <section id="modal-navigation">
                <h2>Modal Navigation: Focused Interactions</h2>

                <p>Modal navigation presents screens that temporarily take over the interface, demanding the user's attention before they can continue. Unlike stack navigation where screens slide in from the side, modals typically slide up from the bottom or appear as overlays.</p>

                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h4 style="color: white;">üìñ Modal Navigation Defined</h4>
                    <p style="color: white;"><strong>Modal navigation</strong> presents content that temporarily blocks interaction with the rest of the app. Modals create a focused context for a specific task, and must be dismissed before returning to the previous context.</p>
                </div>

                <p>Common uses for modals:</p>

                <ul>
                    <li>Composing a new email or tweet</li>
                    <li>Adding an item (new task, new contact)</li>
                    <li>Filters and sort options</li>
                    <li>Login/signup flows</li>
                    <li>Photo/video capture</li>
                    <li>Sharing dialogs</li>
                </ul>

                <!-- SVG: Modal Navigation -->
                <div class="svg-container" style="text-align: center; margin: 2rem 0;">
                    <svg viewBox="0 0 700 350" style="max-width: 100%; height: auto; font-family: system-ui, sans-serif;">
                        <!-- Background -->
                        <rect width="700" height="350" fill="#f8f9fa"/>
                        
                        <!-- Title -->
                        <text x="350" y="25" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">Modal Navigation Styles</text>
                        
                        <!-- Full Screen Modal -->
                        <text x="120" y="55" text-anchor="middle" font-size="11" fill="#666">Full Screen Modal</text>
                        <rect x="50" y="65" width="140" height="260" fill="#fff" stroke="#333" stroke-width="2" rx="15"/>
                        <rect x="58" y="80" width="124" height="230" fill="#f5f5f5"/>
                        
                        <!-- Modal content -->
                        <rect x="58" y="80" width="124" height="35" fill="#4CAF50"/>
                        <text x="75" y="102" font-size="12" fill="white">‚úï</text>
                        <text x="120" y="102" text-anchor="middle" font-size="11" fill="white" font-weight="bold">New Task</text>
                        <text x="165" y="102" font-size="10" fill="white">Save</text>
                        
                        <!-- Form content -->
                        <rect x="68" y="125" width="104" height="25" fill="white" stroke="#ddd" rx="4"/>
                        <text x="120" y="142" text-anchor="middle" font-size="9" fill="#999">Task title...</text>
                        
                        <rect x="68" y="160" width="104" height="60" fill="white" stroke="#ddd" rx="4"/>
                        <text x="120" y="195" text-anchor="middle" font-size="9" fill="#999">Description...</text>
                        
                        <text x="120" y="245" text-anchor="middle" font-size="9" fill="#666">üìÖ Due Date</text>
                        <text x="120" y="265" text-anchor="middle" font-size="9" fill="#666">üè∑Ô∏è Category</text>
                        <text x="120" y="285" text-anchor="middle" font-size="9" fill="#666">‚ö° Priority</text>
                        
                        <!-- Card/Sheet Modal -->
                        <text x="300" y="55" text-anchor="middle" font-size="11" fill="#666">Card/Sheet Modal (iOS)</text>
                        <rect x="230" y="65" width="140" height="260" fill="#fff" stroke="#333" stroke-width="2" rx="15"/>
                        <rect x="238" y="80" width="124" height="230" fill="#e0e0e0"/>
                        
                        <!-- Content behind (dimmed) -->
                        <rect x="248" y="90" width="104" height="100" fill="#bdbdbd" rx="4"/>
                        
                        <!-- Card modal sliding up -->
                        <rect x="238" y="160" width="124" height="150" fill="white" stroke="#e0e0e0" stroke-width="1" rx="12"/>
                        
                        <!-- Drag handle -->
                        <rect x="285" y="168" width="40" height="4" fill="#bdbdbd" rx="2"/>
                        
                        <text x="300" y="195" text-anchor="middle" font-size="11" font-weight="bold" fill="#333">Share</text>
                        
                        <!-- Share options -->
                        <g font-size="9" fill="#666">
                            <text x="262" y="220" text-anchor="middle">üì±</text>
                            <text x="262" y="232" text-anchor="middle">Message</text>
                            
                            <text x="300" y="220" text-anchor="middle">‚úâÔ∏è</text>
                            <text x="300" y="232" text-anchor="middle">Mail</text>
                            
                            <text x="338" y="220" text-anchor="middle">üîó</text>
                            <text x="338" y="232" text-anchor="middle">Copy</text>
                        </g>
                        
                        <rect x="250" y="250" width="100" height="28" fill="#f5f5f5" rx="6"/>
                        <text x="300" y="268" text-anchor="middle" font-size="10" fill="#666">More Options...</text>
                        
                        <!-- Overlay/Dialog Modal -->
                        <text x="480" y="55" text-anchor="middle" font-size="11" fill="#666">Dialog/Alert Modal</text>
                        <rect x="410" y="65" width="140" height="260" fill="#fff" stroke="#333" stroke-width="2" rx="15"/>
                        <rect x="418" y="80" width="124" height="230" fill="rgba(0,0,0,0.5)"/>
                        
                        <!-- Content behind (very dimmed) -->
                        <rect x="428" y="90" width="104" height="130" fill="#757575" rx="4" opacity="0.5"/>
                        
                        <!-- Dialog box -->
                        <rect x="430" y="150" width="100" height="100" fill="white" rx="12"/>
                        
                        <text x="480" y="175" text-anchor="middle" font-size="11" font-weight="bold" fill="#333">Delete Task?</text>
                        <text x="480" y="195" text-anchor="middle" font-size="9" fill="#666">This cannot be undone.</text>
                        
                        <line x1="430" y1="215" x2="530" y2="215" stroke="#e0e0e0" stroke-width="1"/>
                        
                        <line x1="480" y1="215" x2="480" y2="250" stroke="#e0e0e0" stroke-width="1"/>
                        
                        <text x="455" y="237" text-anchor="middle" font-size="10" fill="#2196F3">Cancel</text>
                        <text x="505" y="237" text-anchor="middle" font-size="10" fill="#f44336" font-weight="bold">Delete</text>
                        
                        <!-- Legend -->
                        <rect x="575" y="100" width="110" height="130" fill="white" stroke="#e0e0e0" stroke-width="1" rx="4"/>
                        <text x="630" y="120" text-anchor="middle" font-size="10" font-weight="bold" fill="#333">When to Use</text>
                        <text x="630" y="140" text-anchor="middle" font-size="8" fill="#666">Full: Complex forms</text>
                        <text x="630" y="155" text-anchor="middle" font-size="8" fill="#666">Card: Quick actions</text>
                        <text x="630" y="170" text-anchor="middle" font-size="8" fill="#666">Dialog: Confirmations</text>
                        <line x1="585" y1="185" x2="675" y2="185" stroke="#e0e0e0" stroke-width="1"/>
                        <text x="630" y="203" text-anchor="middle" font-size="8" fill="#666">All block background</text>
                        <text x="630" y="218" text-anchor="middle" font-size="8" fill="#666">until dismissed</text>
                    </svg>
                </div>

                <h3>Modal vs Stack: When to Use Which?</h3>

                <p>The choice between modal and stack presentation often confuses developers. Here's a clear framework:</p>

                <div class="card">
                    <h4>ü§î Decision Framework</h4>
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f5f5f5;">
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Question</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Stack</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Modal</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Is this a step in a flow?</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Yes ‚Üí Stack</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">No, it's a separate task</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Will user return to same screen?</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Usually yes</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Not necessarily</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Is context interruption?</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">No, it's continuation</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Yes ‚Üí Modal</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Creating new content?</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Viewing/editing existing</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Yes, new item ‚Üí Modal</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px;"><strong>Can user swipe back?</strong></td>
                                <td style="padding: 12px;">Yes (iOS gesture)</td>
                                <td style="padding: 12px;">Swipe down to dismiss</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <pre><code class="language-tsx">// Examples of modal vs stack choices

// ‚úÖ STACK: Viewing a product from a list (drilling down)
// List ‚Üí Detail ‚Üí Reviews ‚Üí Single Review
// User is exploring deeper into related content

// ‚úÖ MODAL: Creating a new product review
// Detail ‚Üí [Modal: Write Review]
// User is creating NEW content, not exploring existing

// ‚úÖ STACK: Email ‚Üí Attachment (viewing existing content)
// ‚úÖ MODAL: Email ‚Üí [Modal: Compose Reply] (creating new content)

// ‚úÖ STACK: Settings ‚Üí Privacy ‚Üí Permissions (hierarchical navigation)
// ‚úÖ MODAL: Any screen ‚Üí [Modal: Login Required] (interruption)</code></pre>

                <div class="card" style="background: #e8f5e9; border-left: 4px solid #4CAF50;">
                    <h4>‚úÖ The "New Content" Rule</h4>
                    <p>A helpful heuristic: <strong>If the user is creating something new that could be canceled, use a modal.</strong> The modal's explicit dismiss (X button) and confirm (Save button) reinforce that this is a separate task that can be abandoned without affecting the previous context.</p>
                </div>
            </section>

            <!-- Combining Navigation Patterns -->
            <section id="combining-patterns">
                <h2>Combining Navigation Patterns</h2>

                <p>Real apps don't use just one navigation pattern‚Äîthey combine multiple patterns to create intuitive, powerful navigation architectures. Understanding how patterns nest is crucial for building complex apps.</p>

                <pre class="mermaid">
flowchart TB
    subgraph App["App Navigation Architecture"]
        subgraph Tabs["Tab Navigator"]
            subgraph HomeStack["Home Stack"]
                H1[Home Feed] --> H2[Post Detail]
                H2 --> H3[Comments]
                H2 --> H4[User Profile]
            end
            
            subgraph SearchStack["Search Stack"]
                S1[Search] --> S2[Results]
                S2 --> S3[Item Detail]
            end
            
            subgraph ProfileStack["Profile Stack"]
                P1[My Profile] --> P2[Edit Profile]
                P1 --> P3[Settings]
                P3 --> P4[Privacy]
            end
        end
        
        Modal1[Compose Post Modal]
        Modal2[Login Modal]
    end
    
    HomeStack -.-> Modal1
    SearchStack -.-> Modal1
    ProfileStack -.-> Modal2
    
    style Modal1 fill:#fff3cd,stroke:#ffc107
    style Modal2 fill:#fff3cd,stroke:#ffc107
                </pre>

                <p>In this architecture:</p>

                <ul>
                    <li><strong>Tabs</strong> provide the top-level navigation structure</li>
                    <li><strong>Stacks</strong> within each tab handle hierarchical navigation</li>
                    <li><strong>Modals</strong> can be triggered from anywhere for specific tasks</li>
                </ul>

                <h3>Nesting Rules</h3>

                <div class="card">
                    <h4>üìã How Navigators Nest</h4>
                    <ul>
                        <li><strong>Tabs containing Stacks:</strong> Most common pattern. Each tab has its own navigation history.</li>
                        <li><strong>Stack containing Tabs:</strong> Less common, but used when tabs should be "inside" the app (e.g., after login).</li>
                        <li><strong>Drawer containing Tabs:</strong> Enterprise apps with many features.</li>
                        <li><strong>Modals overlay everything:</strong> They sit above all other navigators.</li>
                    </ul>
                </div>

                <!-- SVG: Common Navigation Architectures -->
                <div class="svg-container" style="text-align: center; margin: 2rem 0;">
                    <svg viewBox="0 0 700 300" style="max-width: 100%; height: auto; font-family: system-ui, sans-serif;">
                        <!-- Background -->
                        <rect width="700" height="300" fill="#f8f9fa"/>
                        
                        <!-- Title -->
                        <text x="350" y="25" text-anchor="middle" font-size="14" font-weight="bold" fill="#333">Common Navigation Architectures</text>
                        
                        <!-- Pattern 1: Tabs with Stacks -->
                        <text x="120" y="55" text-anchor="middle" font-size="11" font-weight="bold" fill="#4CAF50">Most Common</text>
                        <text x="120" y="70" text-anchor="middle" font-size="10" fill="#666">Tabs ‚Üí Stacks</text>
                        
                        <rect x="40" y="80" width="160" height="200" fill="white" stroke="#4CAF50" stroke-width="2" rx="8"/>
                        
                        <!-- Tab bar representation -->
                        <rect x="50" y="240" width="140" height="30" fill="#e8f5e9" rx="4"/>
                        <text x="80" y="260" text-anchor="middle" font-size="9" fill="#4CAF50">üè†</text>
                        <text x="120" y="260" text-anchor="middle" font-size="9" fill="#999">üîç</text>
                        <text x="160" y="260" text-anchor="middle" font-size="9" fill="#999">üë§</text>
                        
                        <!-- Stack representation -->
                        <rect x="55" y="90" width="130" height="140" fill="#e8f5e9" stroke="#4CAF50" stroke-width="1" rx="4"/>
                        <rect x="65" y="180" width="110" height="40" fill="#a5d6a7" rx="3"/>
                        <text x="120" y="205" text-anchor="middle" font-size="9" fill="white">Home</text>
                        <rect x="70" y="140" width="110" height="40" fill="#81c784" rx="3"/>
                        <text x="125" y="165" text-anchor="middle" font-size="9" fill="white">Detail</text>
                        <rect x="75" y="100" width="110" height="40" fill="#66bb6a" rx="3"/>
                        <text x="130" y="125" text-anchor="middle" font-size="9" fill="white">Comments</text>
                        
                        <!-- Pattern 2: Stack with Auth -->
                        <text x="350" y="55" text-anchor="middle" font-size="11" font-weight="bold" fill="#2196F3">Auth Pattern</text>
                        <text x="350" y="70" text-anchor="middle" font-size="10" fill="#666">Stack ‚Üí (Auth or Tabs)</text>
                        
                        <rect x="270" y="80" width="160" height="200" fill="white" stroke="#2196F3" stroke-width="2" rx="8"/>
                        
                        <!-- Root stack -->
                        <rect x="280" y="90" width="140" height="180" fill="#e3f2fd" stroke="#2196F3" stroke-width="1" rx="4"/>
                        
                        <!-- Decision -->
                        <rect x="310" y="100" width="80" height="30" fill="#90caf9" rx="4"/>
                        <text x="350" y="120" text-anchor="middle" font-size="9" fill="#1565c0">Root Stack</text>
                        
                        <!-- Branch -->
                        <path d="M350,130 L350,150 L310,170" stroke="#2196F3" stroke-width="1.5" fill="none"/>
                        <path d="M350,130 L350,150 L390,170" stroke="#2196F3" stroke-width="1.5" fill="none"/>
                        
                        <!-- Auth flow -->
                        <rect x="285" y="175" width="55" height="25" fill="#ffcdd2" rx="3"/>
                        <text x="312" y="192" text-anchor="middle" font-size="8" fill="#c62828">Login</text>
                        
                        <rect x="288" y="205" width="55" height="25" fill="#ffcdd2" rx="3" opacity="0.7"/>
                        <text x="315" y="222" text-anchor="middle" font-size="8" fill="#c62828">Signup</text>
                        
                        <!-- Main app (tabs) -->
                        <rect x="355" y="175" width="55" height="55" fill="#c8e6c9" rx="3"/>
                        <text x="382" y="200" text-anchor="middle" font-size="8" fill="#2e7d32">Tabs</text>
                        <text x="382" y="215" text-anchor="middle" font-size="7" fill="#2e7d32">(main app)</text>
                        
                        <!-- Labels -->
                        <text x="312" y="250" text-anchor="middle" font-size="8" fill="#c62828">Logged Out</text>
                        <text x="382" y="250" text-anchor="middle" font-size="8" fill="#2e7d32">Logged In</text>
                        
                        <!-- Pattern 3: With Modals -->
                        <text x="580" y="55" text-anchor="middle" font-size="11" font-weight="bold" fill="#ff9800">Full Pattern</text>
                        <text x="580" y="70" text-anchor="middle" font-size="10" fill="#666">Tabs + Stacks + Modals</text>
                        
                        <rect x="500" y="80" width="160" height="200" fill="white" stroke="#ff9800" stroke-width="2" rx="8"/>
                        
                        <!-- Base tabs -->
                        <rect x="510" y="220" width="140" height="50" fill="#fff3e0" stroke="#ff9800" stroke-width="1" rx="4"/>
                        <text x="580" y="250" text-anchor="middle" font-size="9" fill="#e65100">Tab Bar + Stacks</text>
                        
                        <!-- Content area -->
                        <rect x="510" y="90" width="140" height="125" fill="#ffe0b2" stroke="#ff9800" stroke-width="1" rx="4"/>
                        <text x="580" y="130" text-anchor="middle" font-size="9" fill="#e65100">Current Stack</text>
                        <text x="580" y="145" text-anchor="middle" font-size="8" fill="#e65100">Screen Content</text>
                        
                        <!-- Modal overlay -->
                        <rect x="525" y="105" width="110" height="100" fill="white" stroke="#ff9800" stroke-width="2" rx="8"/>
                        <text x="580" y="135" text-anchor="middle" font-size="9" font-weight="bold" fill="#e65100">Modal</text>
                        <text x="580" y="150" text-anchor="middle" font-size="8" fill="#666">Overlays</text>
                        <text x="580" y="163" text-anchor="middle" font-size="8" fill="#666">everything</text>
                        <text x="580" y="185" text-anchor="middle" font-size="16">‚úï</text>
                    </svg>
                </div>

                <div class="card" style="background: #e3f2fd; border-left: 4px solid #2196F3;">
                    <h4>üí° Authentication Pattern</h4>
                    <p>A very common pattern is having a root stack that conditionally renders either authentication screens (Login, Signup, Forgot Password) or the main app (usually tabs with stacks). When the user logs in/out, the entire navigation tree changes. We'll implement this exact pattern in Lesson 6: Authentication Flows.</p>
                </div>
            </section>

            <!-- Navigation State -->
            <section id="navigation-state">
                <h2>Navigation State: The Source of Truth</h2>

                <p>Everything you see on screen in a mobile app is determined by navigation state. This state is a JavaScript object that describes which screens are in the stack, which tab is active, what params each screen received, and more.</p>

                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h4 style="color: white;">üìñ Navigation State</h4>
                    <p style="color: white;"><strong>Navigation state</strong> is a serializable object that completely describes the current navigation tree. Given the same state, the navigation library will render the same screens. This enables features like state persistence, deep linking, and time-travel debugging.</p>
                </div>

                <p>Let's look at what navigation state actually looks like:</p>

                <pre><code class="language-tsx">// Example navigation state for a tabs + stacks app
const navigationState = {
  type: 'tab',
  index: 0, // Home tab is active
  routes: [
    {
      key: 'home-tab',
      name: 'HomeTab',
      state: {
        type: 'stack',
        index: 2, // Third screen in stack (0-indexed)
        routes: [
          { key: 'home-1', name: 'HomeFeed' },
          { key: 'post-1', name: 'PostDetail', params: { postId: '123' } },
          { key: 'comments-1', name: 'Comments', params: { postId: '123' } },
        ]
      }
    },
    {
      key: 'search-tab',
      name: 'SearchTab',
      state: {
        type: 'stack',
        index: 0,
        routes: [
          { key: 'search-1', name: 'Search' }
        ]
      }
    },
    {
      key: 'profile-tab',
      name: 'ProfileTab',
      state: {
        type: 'stack',
        index: 1,
        routes: [
          { key: 'profile-1', name: 'Profile' },
          { key: 'settings-1', name: 'Settings' }
        ]
      }
    }
  ]
};

// This state tells us:
// - User is on Home tab
// - Home tab has 3 screens: HomeFeed ‚Üí PostDetail ‚Üí Comments (viewing Comments)
// - Search tab has just the Search screen
// - Profile tab has Profile ‚Üí Settings (user navigated to Settings before switching tabs)</code></pre>

                <h3>Why State Matters</h3>

                <p>Understanding navigation state unlocks powerful capabilities:</p>

                <div class="card">
                    <h4>üîß What You Can Do With Navigation State</h4>
                    <ul>
                        <li><strong>Persist and restore:</strong> Save state to storage, restore when app reopens</li>
                        <li><strong>Deep linking:</strong> Convert a URL into navigation state to open specific screens</li>
                        <li><strong>Analytics:</strong> Track screen views by monitoring state changes</li>
                        <li><strong>Testing:</strong> Assert that navigation actions produce expected state</li>
                        <li><strong>Debugging:</strong> Inspect state to understand current navigation position</li>
                        <li><strong>Reset on logout:</strong> Clear state to return user to initial screens</li>
                    </ul>
                </div>

                <pre class="mermaid">
flowchart LR
    subgraph Inputs["State Changes From"]
        A[User Taps]
        B[Deep Link]
        C[Programmatic Navigation]
        D[Back Button/Gesture]
    end
    
    subgraph State["Navigation State"]
        E[Current State Object]
    end
    
    subgraph Outputs["State Determines"]
        F[Which Screens Render]
        G[Screen Params]
        H[Active Tab]
        I[Animations]
    end
    
    A --> E
    B --> E
    C --> E
    D --> E
    
    E --> F
    E --> G
    E --> H
    E --> I
                </pre>

                <div class="card" style="background: #e8f5e9; border-left: 4px solid #4CAF50;">
                    <h4>‚úÖ The Serializable Advantage</h4>
                    <p>Navigation state is just a JavaScript object with no functions or class instances‚Äîit's fully serializable to JSON. This means you can save it to AsyncStorage, send it over the network, or log it for debugging. This is one of the key architectural wins of modern navigation libraries.</p>
                </div>
            </section>

            <!-- Platform Conventions -->
            <section id="platform-conventions">
                <h2>Platform Conventions</h2>

                <p>iOS and Android have different navigation conventions that users expect. A well-built app respects these conventions, providing a native feel on each platform.</p>

                <!-- SVG: Platform Conventions Comparison -->
                <div class="svg-container" style="text-align: center; margin: 2rem 0;">
                    <svg viewBox="0 0 700 450" style="max-width: 100%; height: auto; font-family: system-ui, sans-serif;">
                        <!-- Background -->
                        <rect width="700" height="450" fill="#f8f9fa"/>
                        
                        <!-- Title -->
                        <text x="350" y="25" text-anchor="middle" font-size="16" font-weight="bold" fill="#333">Platform Navigation Conventions</text>
                        
                        <!-- iOS Side -->
                        <text x="200" y="55" text-anchor="middle" font-size="14" font-weight="bold" fill="#007AFF">iOS Conventions</text>
                        
                        <!-- iOS Phone -->
                        <rect x="100" y="70" width="200" height="360" fill="#fff" stroke="#333" stroke-width="2" rx="30"/>
                        <rect x="160" y="75" width="80" height="25" fill="#333" rx="10"/>
                        <rect x="110" y="105" width="180" height="300" fill="#f0f0f0"/>
                        
                        <!-- iOS Navigation Bar -->
                        <rect x="110" y="105" width="180" height="44" fill="#f8f8f8" stroke="#ddd" stroke-width="1"/>
                        <text x="130" y="132" font-size="12" fill="#007AFF">‚Üê Back</text>
                        <text x="200" y="132" text-anchor="middle" font-size="12" font-weight="bold" fill="#000">Title</text>
                        <text x="270" y="132" text-anchor="middle" font-size="11" fill="#007AFF">Edit</text>
                        
                        <!-- iOS Content area -->
                        <rect x="120" y="160" width="160" height="30" fill="#fff" stroke="#e0e0e0" rx="4"/>
                        <rect x="120" y="195" width="160" height="30" fill="#fff" stroke="#e0e0e0" rx="4"/>
                        <rect x="120" y="230" width="160" height="30" fill="#fff" stroke="#e0e0e0" rx="4"/>
                        
                        <!-- iOS Tab bar -->
                        <rect x="110" y="355" width="180" height="50" fill="#f8f8f8" stroke="#ddd" stroke-width="1"/>
                        <text x="145" y="382" text-anchor="middle" font-size="10" fill="#007AFF">üè†</text>
                        <text x="145" y="395" text-anchor="middle" font-size="7" fill="#007AFF">Home</text>
                        <text x="200" y="382" text-anchor="middle" font-size="10" fill="#8e8e93">üîç</text>
                        <text x="200" y="395" text-anchor="middle" font-size="7" fill="#8e8e93">Search</text>
                        <text x="255" y="382" text-anchor="middle" font-size="10" fill="#8e8e93">üë§</text>
                        <text x="255" y="395" text-anchor="middle" font-size="7" fill="#8e8e93">Profile</text>
                        
                        <!-- Home indicator -->
                        <rect x="170" y="415" width="60" height="5" fill="#333" rx="2"/>
                        
                        <!-- iOS Annotations -->
                        <g font-size="9" fill="#666">
                            <text x="55" y="130">Large title</text>
                            <text x="55" y="142">collapses on scroll</text>
                            <path d="M95,135 L108,135" stroke="#666" stroke-width="1"/>
                            
                            <text x="55" y="380">Tab bar at</text>
                            <text x="55" y="392">bottom always</text>
                            <path d="M95,385 L108,380" stroke="#666" stroke-width="1"/>
                        </g>
                        
                        <!-- Android Side -->
                        <text x="500" y="55" text-anchor="middle" font-size="14" font-weight="bold" fill="#4CAF50">Android Conventions</text>
                        
                        <!-- Android Phone -->
                        <rect x="400" y="70" width="200" height="360" fill="#fff" stroke="#333" stroke-width="2" rx="20"/>
                        <rect x="470" y="77" width="60" height="12" fill="#333" rx="6"/>
                        <rect x="410" y="95" width="180" height="310" fill="#f0f0f0"/>
                        
                        <!-- Android App Bar -->
                        <rect x="410" y="95" width="180" height="56" fill="#4CAF50"/>
                        <text x="430" y="128" font-size="16" fill="white">‚Üê</text>
                        <text x="460" y="128" font-size="13" font-weight="bold" fill="white">Title</text>
                        <text x="560" y="128" font-size="14" fill="white">‚ãÆ</text>
                        
                        <!-- Android Content -->
                        <rect x="420" y="160" width="160" height="35" fill="#fff" stroke="#e0e0e0" rx="4"/>
                        <rect x="420" y="200" width="160" height="35" fill="#fff" stroke="#e0e0e0" rx="4"/>
                        <rect x="420" y="240" width="160" height="35" fill="#fff" stroke="#e0e0e0" rx="4"/>
                        
                        <!-- FAB -->
                        <circle cx="560" cy="350" r="25" fill="#4CAF50"/>
                        <text x="560" y="355" text-anchor="middle" font-size="20" fill="white">+</text>
                        
                        <!-- Android Bottom Nav -->
                        <rect x="410" y="355" width="180" height="50" fill="#fff" stroke="#e0e0e0" stroke-width="1"/>
                        <rect x="410" y="355" width="60" height="50" fill="#e8f5e9"/>
                        <text x="440" y="378" text-anchor="middle" font-size="10" fill="#4CAF50">üè†</text>
                        <text x="440" y="393" text-anchor="middle" font-size="7" fill="#4CAF50">Home</text>
                        <text x="500" y="378" text-anchor="middle" font-size="10" fill="#757575">üîç</text>
                        <text x="500" y="393" text-anchor="middle" font-size="7" fill="#757575">Search</text>
                        <text x="560" y="378" text-anchor="middle" font-size="10" fill="#757575">üë§</text>
                        <text x="560" y="393" text-anchor="middle" font-size="7" fill="#757575">Profile</text>
                        
                        <!-- Android Annotations -->
                        <g font-size="9" fill="#666">
                            <text x="595" y="120">Material You</text>
                            <text x="595" y="132">top app bar</text>
                            <path d="M593,125 L590,125" stroke="#666" stroke-width="1"/>
                            
                            <text x="595" y="350">FAB for primary</text>
                            <text x="595" y="362">action</text>
                            <path d="M593,355 L585,350" stroke="#666" stroke-width="1"/>
                        </g>
                    </svg>
                </div>

                <div class="card">
                    <h4>üìã Key Platform Differences</h4>
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f5f5f5;">
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Feature</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">iOS</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Android</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Back navigation</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Swipe from left edge</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Hardware/gesture back button</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Stack animation</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Slide from right</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Fade or slide up</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Modal animation</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Slide up as card</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Fade in or slide up</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Tab bar style</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Icons + labels, translucent</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Material style, solid</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Header style</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Large titles that collapse</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Fixed app bar height</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px;"><strong>Primary action</strong></td>
                                <td style="padding: 12px;">Text button in nav bar</td>
                                <td style="padding: 12px;">FAB (Floating Action Button)</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <p>The good news: Expo Router and React Navigation automatically apply platform-appropriate animations and styles. You don't need to manually code different behaviors‚Äîthey're built in.</p>

                <div class="card" style="background-color: #fff3cd; border-left: 4px solid #ffc107;">
                    <h4>‚ö†Ô∏è Don't Fight Platform Conventions</h4>
                    <p>Resist the temptation to create a "unified" experience that ignores platform norms. iOS users expect to swipe back; Android users expect the system back button to work. Fighting these expectations creates confusion and frustration.</p>
                </div>

                <h3>Platform-Specific Navigation Code</h3>

                <pre><code class="language-tsx">import { Platform } from 'react-native';

// Adjusting behavior per platform
const screenOptions = {
  // iOS: slide from right, Android: fade
  animation: Platform.select({
    ios: 'slide_from_right',
    android: 'fade',
  }),
  
  // iOS: large titles, Android: standard
  headerLargeTitle: Platform.OS === 'ios',
  
  // iOS: translucent header, Android: solid
  headerTranslucent: Platform.OS === 'ios',
};

// Handling Android back button
import { BackHandler } from 'react-native';
import { useFocusEffect } from '@react-navigation/native';

function MyScreen() {
  useFocusEffect(
    useCallback(() => {
      const onBackPress = () => {
        // Custom back behavior
        // Return true to prevent default behavior
        return false;
      };

      // Only needed on Android
      if (Platform.OS === 'android') {
        BackHandler.addEventListener('hardwareBackPress', onBackPress);
        return () => BackHandler.removeEventListener('hardwareBackPress', onBackPress);
      }
    }, [])
  );
}</code></pre>
            </section>

            <!-- Why Navigation Libraries -->
            <section id="why-libraries">
                <h2>Why Navigation Libraries?</h2>

                <p>You might wonder: if React Native provides basic views and can respond to touches, why do we need a separate navigation library? Can't we just manage our own stack of screens?</p>

                <p>You <em>could</em> build navigation from scratch, but you'd be reinventing a very complex wheel:</p>

                <div class="card" style="background: #ffebee; border-left: 4px solid #f44336;">
                    <h4>üö´ What You'd Have to Build Yourself</h4>
                    <ul>
                        <li>Screen lifecycle management (mount, focus, blur, unmount)</li>
                        <li>Gesture handling for back swipe (iOS) and edge swipe</li>
                        <li>Platform-specific animations with spring physics</li>
                        <li>Hardware back button handling (Android)</li>
                        <li>Deep link URL parsing and state hydration</li>
                        <li>Tab state preservation across switches</li>
                        <li>Modal presentation with proper layering</li>
                        <li>Screen transition interruption handling</li>
                        <li>Accessibility announcements for screen changes</li>
                        <li>Safe area handling in headers and tab bars</li>
                        <li>Keyboard avoiding behavior during navigation</li>
                        <li>State persistence across app restarts</li>
                    </ul>
                </div>

                <p>Navigation libraries solve all of this. They've been battle-tested in millions of apps and handle edge cases you'd never think of.</p>

                <h3>The React Native Navigation Landscape</h3>

                <p>Two main options dominate React Native navigation:</p>

                <div class="card">
                    <h4>üß≠ React Navigation</h4>
                    <p>The most popular navigation library for React Native. It's JavaScript-based, highly customizable, and works with Expo out of the box.</p>
                    <ul>
                        <li>Mature ecosystem with many navigators (stack, tabs, drawer, etc.)</li>
                        <li>Deep linking support</li>
                        <li>TypeScript support</li>
                        <li>Active community and documentation</li>
                    </ul>
                </div>

                <div class="card" style="background: #e3f2fd; border-left: 4px solid #2196F3;">
                    <h4>üöÄ Expo Router (Built on React Navigation)</h4>
                    <p>A file-based router built on top of React Navigation. If you've used Next.js, you'll feel right at home.</p>
                    <ul>
                        <li><strong>File-based routing:</strong> Create a file, get a route automatically</li>
                        <li><strong>Automatic deep linking:</strong> URLs derived from file structure</li>
                        <li><strong>TypeScript routes:</strong> Type-safe navigation</li>
                        <li><strong>Universal links:</strong> Works on iOS, Android, AND web</li>
                        <li><strong>Built on React Navigation:</strong> All its power, better DX</li>
                    </ul>
                </div>

                <p>In this course, we'll use <strong>Expo Router</strong> because:</p>

                <ol>
                    <li>It provides a more intuitive mental model (files = routes)</li>
                    <li>Deep linking works automatically</li>
                    <li>TypeScript integration is excellent</li>
                    <li>It's the recommended approach for new Expo projects</li>
                    <li>Understanding it also teaches you React Navigation concepts</li>
                </ol>

                <pre class="mermaid">
flowchart TB
    subgraph ExpoRouter["Expo Router"]
        direction TB
        ER[File-Based API]
        ER --> |"Provides"| DX[Better Developer Experience]
        ER --> |"Generates"| DL[Automatic Deep Links]
        ER --> |"Enables"| TS[Type-Safe Navigation]
    end
    
    subgraph ReactNav["React Navigation"]
        direction TB
        RN[Core Navigation Engine]
        RN --> |"Provides"| Stack[Stack Navigator]
        RN --> |"Provides"| Tabs[Tab Navigator]
        RN --> |"Provides"| Drawer[Drawer Navigator]
        RN --> |"Handles"| Gestures[Gestures & Animations]
    end
    
    ExpoRouter --> |"Built On"| ReactNav
    
    style ExpoRouter fill:#e3f2fd,stroke:#2196F3
    style ReactNav fill:#e8f5e9,stroke:#4CAF50
                </pre>
            </section>
            <!-- Expo Router Preview -->
            <section id="expo-router-preview">
                <h2>Preview: Expo Router</h2>

                <p>Before we dive into implementation in the next lesson, let's preview what navigation looks like with Expo Router. The core idea is brilliantly simple: <strong>your file structure IS your route structure</strong>.</p>

                <pre><code class="language-text">app/
‚îú‚îÄ‚îÄ _layout.tsx          # Root layout (defines navigators)
‚îú‚îÄ‚îÄ index.tsx            # "/" - Home screen
‚îú‚îÄ‚îÄ about.tsx            # "/about" - About screen
‚îú‚îÄ‚îÄ (tabs)/              # Tab group
‚îÇ   ‚îú‚îÄ‚îÄ _layout.tsx      # Tab navigator configuration
‚îÇ   ‚îú‚îÄ‚îÄ index.tsx        # "/tabs" or first tab
‚îÇ   ‚îú‚îÄ‚îÄ search.tsx       # "/tabs/search"
‚îÇ   ‚îî‚îÄ‚îÄ profile.tsx      # "/tabs/profile"
‚îú‚îÄ‚îÄ product/
‚îÇ   ‚îú‚îÄ‚îÄ _layout.tsx      # Stack for product screens
‚îÇ   ‚îî‚îÄ‚îÄ [id].tsx         # "/product/123" - Dynamic route
‚îî‚îÄ‚îÄ (auth)/              # Auth group (parentheses = not in URL)
    ‚îú‚îÄ‚îÄ _layout.tsx      # Auth stack
    ‚îú‚îÄ‚îÄ login.tsx        # "/login"
    ‚îî‚îÄ‚îÄ signup.tsx       # "/signup"</code></pre>

                <p>Each file automatically becomes a route. No configuration needed. Let's see what the code looks like:</p>

                <pre><code class="language-tsx">// app/_layout.tsx - Root layout
import { Stack } from 'expo-router';

export default function RootLayout() {
  return (
    &lt;Stack&gt;
      &lt;Stack.Screen name="(tabs)" options={{ headerShown: false }} /&gt;
      &lt;Stack.Screen name="(auth)" options={{ headerShown: false }} /&gt;
      &lt;Stack.Screen name="product/[id]" options={{ title: 'Product' }} /&gt;
    &lt;/Stack&gt;
  );
}

// app/(tabs)/_layout.tsx - Tab navigator
import { Tabs } from 'expo-router';

export default function TabLayout() {
  return (
    &lt;Tabs&gt;
      &lt;Tabs.Screen 
        name="index" 
        options={{ 
          title: 'Home',
          tabBarIcon: ({ color }) =&gt; &lt;Ionicons name="home" color={color} /&gt;
        }} 
      /&gt;
      &lt;Tabs.Screen 
        name="search"
        options={{
          title: 'Search',
          tabBarIcon: ({ color }) =&gt; &lt;Ionicons name="search" color={color} /&gt;
        }}
      /&gt;
      &lt;Tabs.Screen
        name="profile"
        options={{
          title: 'Profile',
          tabBarIcon: ({ color }) =&gt; &lt;Ionicons name="person" color={color} /&gt;
        }}
      /&gt;
    &lt;/Tabs&gt;
  );
}

// app/(tabs)/index.tsx - Home screen
import { View, Text, Pressable } from 'react-native';
import { Link } from 'expo-router';

export default function HomeScreen() {
  return (
    &lt;View&gt;
      &lt;Text&gt;Welcome Home!&lt;/Text&gt;
      
      {/* Navigate using Link component */}
      &lt;Link href="/product/123"&gt;
        View Product 123
      &lt;/Link&gt;
      
      {/* Or with more control */}
      &lt;Link href="/search" asChild&gt;
        &lt;Pressable&gt;
          &lt;Text&gt;Go to Search&lt;/Text&gt;
        &lt;/Pressable&gt;
      &lt;/Link&gt;
    &lt;/View&gt;
  );
}

// app/product/[id].tsx - Dynamic route
import { useLocalSearchParams } from 'expo-router';

export default function ProductScreen() {
  const { id } = useLocalSearchParams();
  
  return (
    &lt;View&gt;
      &lt;Text&gt;Product ID: {id}&lt;/Text&gt;
    &lt;/View&gt;
  );
}</code></pre>

                <div class="card" style="background: #e8f5e9; border-left: 4px solid #4CAF50;">
                    <h4>‚úÖ What Expo Router Gives You</h4>
                    <ul>
                        <li><strong>Automatic routes:</strong> Create a file, get a route</li>
                        <li><strong>Automatic deep linking:</strong> <code>/product/123</code> works immediately</li>
                        <li><strong>Type-safe navigation:</strong> TypeScript knows your routes</li>
                        <li><strong>Web support:</strong> Same code works on web with proper URLs</li>
                        <li><strong>Nested layouts:</strong> <code>_layout.tsx</code> files define structure</li>
                        <li><strong>Groups:</strong> Parentheses <code>(auth)</code> organize without affecting URLs</li>
                    </ul>
                </div>

                <h3>What We'll Build in This Module</h3>

                <p>Over the next seven lessons, you'll build a complete navigation system:</p>

                <pre class="mermaid">
flowchart TB
    subgraph Module6["Module 6: Navigation with Expo Router"]
        L1[Lesson 1: Concepts] --> L2[Lesson 2: Setup]
        L2 --> L3[Lesson 3: Stack Navigation]
        L3 --> L4[Lesson 4: Tab Navigation]
        L4 --> L5[Lesson 5: Nested Navigation]
        L5 --> L6[Lesson 6: Auth Flows]
        L6 --> L7[Lesson 7: Deep Linking]
        L7 --> L8[Lesson 8: Advanced Patterns]
    end
    
    L8 --> Project[Module Project:<br/>Multi-tab app with auth,<br/>protected routes, deep links]
    
    style L1 fill:#4CAF50,color:#fff
    style Project fill:#ff9800,color:#fff
                </pre>

                <p>By the end of this module, you'll have built an app with:</p>

                <ul>
                    <li>Tab-based main navigation</li>
                    <li>Stack navigation within each tab</li>
                    <li>Authentication flow with protected routes</li>
                    <li>Dynamic routes for data-driven screens</li>
                    <li>Working deep links that open specific screens</li>
                    <li>Modal presentations for focused tasks</li>
                </ul>
            </section>

            <!-- Exercises -->
            <section id="exercises">
                <h2>Hands-On Exercises</h2>

                <p>These exercises help solidify the navigation concepts before we start implementing.</p>

                <!-- Exercise 1 -->
                <div class="exercise-card">
                    <h4>Exercise 1: Navigation Pattern Identification</h4>
                    <p>Open three of your favorite apps and identify the navigation patterns they use.</p>
                    
                    <p><strong>For each app, document:</strong></p>
                    <ul>
                        <li>What type of primary navigation? (tabs, drawer, single stack)</li>
                        <li>How many levels deep can you navigate?</li>
                        <li>When do modals appear vs stack screens?</li>
                        <li>What happens when you tap an already-active tab?</li>
                        <li>How does the back gesture/button work?</li>
                    </ul>

                    <details>
                        <summary>‚úÖ Example Analysis: Instagram</summary>
                        <div style="margin-top: 1rem;">
                            <p><strong>Primary navigation:</strong> Bottom tabs (5 tabs: Home, Search, Reels, Shop, Profile)</p>
                            
                            <p><strong>Depth:</strong> Deep stacks within each tab</p>
                            <ul>
                                <li>Home ‚Üí Post ‚Üí Comments ‚Üí User Profile ‚Üí Their Posts ‚Üí ...</li>
                                <li>Can go many levels deep</li>
                            </ul>
                            
                            <p><strong>Modals used for:</strong></p>
                            <ul>
                                <li>Creating new posts (full-screen modal with camera/gallery)</li>
                                <li>Stories viewer</li>
                                <li>Share sheet</li>
                                <li>Comments (sometimes as bottom sheet)</li>
                            </ul>
                            
                            <p><strong>Tab tap behavior:</strong></p>
                            <ul>
                                <li>If at root: Scrolls to top</li>
                                <li>If deep in stack: Pops to root</li>
                            </ul>
                            
                            <p><strong>Back behavior:</strong></p>
                            <ul>
                                <li>iOS: Swipe from left edge</li>
                                <li>Android: System back button</li>
                                <li>Both: Back arrow in header</li>
                            </ul>
                        </div>
                    </details>
                </div>

                <!-- Exercise 2 -->
                <div class="exercise-card">
                    <h4>Exercise 2: Design a Navigation Architecture</h4>
                    <p>Design the navigation structure for a recipe app with these features:</p>
                    
                    <ul>
                        <li>Browse recipes by category</li>
                        <li>Search recipes</li>
                        <li>View recipe details with ingredients and steps</li>
                        <li>Save favorite recipes</li>
                        <li>Create and edit your own recipes</li>
                        <li>User profile with settings</li>
                        <li>Shopping list feature</li>
                    </ul>

                    <p><strong>Create:</strong></p>
                    <ol>
                        <li>A diagram showing the navigation structure</li>
                        <li>Decision explanations: why tabs vs stack vs modal for each section</li>
                        <li>The file structure if using Expo Router</li>
                    </ol>

                    <details>
                        <summary>‚úÖ Solution</summary>
                        <div style="margin-top: 1rem;">
                            <p><strong>Navigation Structure:</strong></p>
                            <pre><code class="language-text">Root Stack
‚îú‚îÄ‚îÄ (tabs) - Bottom Tab Navigator
‚îÇ   ‚îú‚îÄ‚îÄ Home Stack
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index (Home/Featured)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ category/[id] (Category listing)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ recipe/[id] (Recipe detail)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Search Stack  
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index (Search screen)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ recipe/[id] (Recipe detail)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Favorites Stack
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index (Saved recipes list)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ recipe/[id] (Recipe detail)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ Shopping Stack
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index (Shopping list)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ Profile Stack
‚îÇ       ‚îú‚îÄ‚îÄ index (Profile)
‚îÇ       ‚îú‚îÄ‚îÄ my-recipes (My recipes list)
‚îÇ       ‚îú‚îÄ‚îÄ recipe/[id] (View my recipe)
‚îÇ       ‚îî‚îÄ‚îÄ settings (Settings)
‚îÇ
‚îú‚îÄ‚îÄ (modals) - Modal group
‚îÇ   ‚îú‚îÄ‚îÄ create-recipe (Full-screen modal)
‚îÇ   ‚îú‚îÄ‚îÄ edit-recipe/[id] (Full-screen modal)
‚îÇ   ‚îî‚îÄ‚îÄ add-to-list (Bottom sheet modal)
‚îÇ
‚îî‚îÄ‚îÄ (auth) - Auth group (when logged out)
    ‚îú‚îÄ‚îÄ login
    ‚îî‚îÄ‚îÄ signup</code></pre>

                            <p><strong>Design Decisions:</strong></p>
                            <ul>
                                <li><strong>Tabs:</strong> 5 main areas (Home, Search, Favorites, Shopping, Profile) - all frequently accessed</li>
                                <li><strong>Stacks:</strong> Within each tab for drilling into content</li>
                                <li><strong>Modals:</strong> Creating/editing recipes (new content, can be canceled), adding to shopping list (quick action)</li>
                                <li><strong>Recipe detail shared:</strong> Same screen accessible from multiple tabs</li>
                            </ul>

                            <p><strong>File Structure:</strong></p>
                            <pre><code class="language-text">app/
‚îú‚îÄ‚îÄ _layout.tsx
‚îú‚îÄ‚îÄ (tabs)/
‚îÇ   ‚îú‚îÄ‚îÄ _layout.tsx
‚îÇ   ‚îú‚îÄ‚îÄ index.tsx
‚îÇ   ‚îú‚îÄ‚îÄ search.tsx
‚îÇ   ‚îú‚îÄ‚îÄ favorites.tsx
‚îÇ   ‚îú‚îÄ‚îÄ shopping.tsx
‚îÇ   ‚îî‚îÄ‚îÄ profile/
‚îÇ       ‚îú‚îÄ‚îÄ _layout.tsx
‚îÇ       ‚îú‚îÄ‚îÄ index.tsx
‚îÇ       ‚îú‚îÄ‚îÄ my-recipes.tsx
‚îÇ       ‚îî‚îÄ‚îÄ settings.tsx
‚îú‚îÄ‚îÄ category/
‚îÇ   ‚îî‚îÄ‚îÄ [id].tsx
‚îú‚îÄ‚îÄ recipe/
‚îÇ   ‚îî‚îÄ‚îÄ [id].tsx
‚îú‚îÄ‚îÄ create-recipe.tsx
‚îú‚îÄ‚îÄ edit-recipe/
‚îÇ   ‚îî‚îÄ‚îÄ [id].tsx
‚îî‚îÄ‚îÄ (auth)/
    ‚îú‚îÄ‚îÄ _layout.tsx
    ‚îú‚îÄ‚îÄ login.tsx
    ‚îî‚îÄ‚îÄ signup.tsx</code></pre>
                        </div>
                    </details>
                </div>

                <!-- Exercise 3 -->
                <div class="exercise-card">
                    <h4>Exercise 3: Navigation State Visualization</h4>
                    <p>Given this navigation state, describe what the user would see:</p>
                    
                    <pre><code class="language-json">{
  "type": "tab",
  "index": 2,
  "routes": [
    {
      "name": "HomeTab",
      "state": {
        "type": "stack",
        "index": 0,
        "routes": [{ "name": "Home" }]
      }
    },
    {
      "name": "SearchTab",
      "state": {
        "type": "stack",
        "index": 1,
        "routes": [
          { "name": "Search" },
          { "name": "Results", "params": { "query": "pizza" } }
        ]
      }
    },
    {
      "name": "ProfileTab",
      "state": {
        "type": "stack",
        "index": 2,
        "routes": [
          { "name": "Profile" },
          { "name": "Settings" },
          { "name": "Privacy" }
        ]
      }
    }
  ]
}</code></pre>

                    <p><strong>Answer these questions:</strong></p>
                    <ol>
                        <li>Which tab is currently active?</li>
                        <li>What screen is the user viewing?</li>
                        <li>What happens if the user taps "Back"?</li>
                        <li>What happens if the user taps the "Search" tab?</li>
                        <li>What happens if the user taps the "Home" tab?</li>
                    </ol>

                    <details>
                        <summary>‚úÖ Answers</summary>
                        <div style="margin-top: 1rem;">
                            <ol>
                                <li><strong>Active tab:</strong> ProfileTab (index: 2)</li>
                                <li><strong>Current screen:</strong> Privacy (it's at index 2 of the Profile stack)</li>
                                <li><strong>If user taps Back:</strong> They'll see Settings (pop Privacy off the stack)</li>
                                <li><strong>If user taps Search tab:</strong> They'll see the Results screen with "pizza" query (the Search tab's stack is preserved at index 1)</li>
                                <li><strong>If user taps Home tab:</strong> They'll see the Home screen (Home tab is at its root)</li>
                            </ol>
                            
                            <p>Key insight: Each tab preserves its navigation state. When the user returns to a tab, they're exactly where they left off.</p>
                        </div>
                    </details>
                </div>

                <!-- Exercise 4 -->
                <div class="exercise-card">
                    <h4>Exercise 4: Platform Convention Matching</h4>
                    <p>Match these behaviors to the correct platform (iOS, Android, or Both):</p>
                    
                    <ol>
                        <li>Swipe from left edge to go back</li>
                        <li>Hardware back button</li>
                        <li>Tab bar at bottom of screen</li>
                        <li>Large collapsible titles</li>
                        <li>Floating Action Button (FAB)</li>
                        <li>Pull to refresh</li>
                        <li>Modal slides up from bottom</li>
                        <li>Drawer activated by hamburger menu</li>
                    </ol>

                    <details>
                        <summary>‚úÖ Answers</summary>
                        <div style="margin-top: 1rem;">
                            <ol>
                                <li><strong>Swipe from left edge:</strong> iOS (though Android now has similar gesture navigation)</li>
                                <li><strong>Hardware back button:</strong> Android</li>
                                <li><strong>Tab bar at bottom:</strong> Both (but more emphasized on iOS)</li>
                                <li><strong>Large collapsible titles:</strong> iOS (iOS 11+ feature)</li>
                                <li><strong>Floating Action Button:</strong> Android (Material Design pattern)</li>
                                <li><strong>Pull to refresh:</strong> Both</li>
                                <li><strong>Modal slides up:</strong> Both (standard on iOS, common on Android)</li>
                                <li><strong>Drawer/hamburger:</strong> Both, but more common on Android</li>
                            </ol>
                        </div>
                    </details>
                </div>
            </section>

            <!-- Summary -->
            <section id="summary">
                <h2>Summary</h2>

                <p>You now have a solid conceptual foundation for mobile navigation. Before writing any code, you understand the patterns, the state model, and the platform conventions that make mobile navigation work.</p>

                <div class="card" style="background: #e8f5e9; border-left: 4px solid #4CAF50;">
                    <h4>üéØ Key Takeaways</h4>
                    <ul>
                        <li><strong>Mobile navigation is state-based:</strong> Screens stack and persist, unlike web pages</li>
                        <li><strong>Four core patterns:</strong> Stack (hierarchical), Tabs (parallel), Drawer (hidden menu), Modal (focused task)</li>
                        <li><strong>Patterns combine:</strong> Real apps nest navigators (tabs containing stacks, modals overlaying everything)</li>
                        <li><strong>Navigation state is the source of truth:</strong> A serializable object that determines what renders</li>
                        <li><strong>Platform conventions matter:</strong> iOS and Android users have different expectations</li>
                        <li><strong>Libraries solve complexity:</strong> Gestures, animations, deep linking‚Äîdon't reinvent these</li>
                        <li><strong>Expo Router = file-based routing:</strong> Files become routes with automatic deep linking</li>
                    </ul>
                </div>

                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h4 style="color: white;">üß≠ The Navigation Mental Model</h4>
                    <p style="color: white; font-size: 1.05rem; margin: 0;">
                        Think of your app as a building: <strong>Tabs are floors</strong> (parallel destinations), <strong>Stacks are hallways</strong> (sequences of rooms), and <strong>Modals are popup offices</strong> (focused spaces that demand attention before you can leave). Users move through this building, and the <strong>navigation state</strong> is the map showing exactly where they are.
                    </p>
                </div>

                <h3>What's Next?</h3>

                <p>In the next lesson, we'll set up Expo Router in a new project and explore how the file-based routing system works in practice. You'll create your first routes, navigate between screens, and see how Expo Router handles the complexity we discussed today.</p>

                <p>Get ready to turn these concepts into working code!</p>
            </section>

            <!-- Lesson Navigation -->
            <div class="lesson-nav">
                <a href="m05_l07_flashlist_the_performance_alternative.html" class="prev-link">
                    <span class="arrow">‚Üê</span>
                    <div class="nav-content">
                        <span class="nav-label">Previous</span>
                        <span class="nav-title">FlashList ‚Äî The Performance Alternative</span>
                    </div>
                </a>
                
                <a href="index.html" class="home-link" title="Back to Course Home">
                    üè†
                </a>
                
                <a href="m06_l02_expo_router_setup.html" class="next-link">
                    <div class="nav-content">
                        <span class="nav-label">Next</span>
                        <span class="nav-title">Expo Router Setup</span>
                    </div>
                    <span class="arrow">‚Üí</span>
                </a>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 React Native & Expo Course. All rights reserved.</p>
            <p>
                <a href="index.html">Home</a> |
                <a href="index.html#modules">Modules</a> |
                <a href="index.html#appendices">Appendices</a>
            </p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/course-enhancements.js"></script>
</body>
</html>
