<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn to capture photos and videos, access the media library, and build camera features in React Native with Expo">
    <meta name="author" content="React Native & Expo Course">
    <title>Camera and Media | Module 8: Native Features and Device APIs | React Native & Expo Course</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-to-main">Skip to main content</a>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="index.html" class="nav-logo">üì± RN Course</a>
            <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-expanded="false" aria-controls="nav-links">
                ‚ò∞
            </button>
            <div class="nav-links" id="nav-links">
                <a href="index.html">Home</a>
                <a href="index.html#modules">Modules</a>
                <a href="index.html#appendices">Appendices</a>
                <button id="theme-toggle" aria-label="Toggle theme">üåô</button>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <div class="breadcrumb">
        <div class="container">
            <a href="index.html">Home</a> &gt;
            <a href="index.html#modules">Modules</a> &gt;
            <a href="m08_l01_permissions.html">Module 8</a> &gt;
            <span>Lesson 8.2</span>
        </div>
    </div>

    <!-- Main Content -->
    <main id="main-content">
        <div class="container">
            <!-- Lesson Header -->
            <header>
                <p class="module-tag">Module 8: Native Features and Device APIs</p>
                <h1>Camera and Media</h1>
                <p class="lesson-subtitle">Capturing photos, recording video, and accessing the media library</p>
            </header>

            <!-- Learning Objectives -->
            <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <h2 style="color: white; border: none; margin-top: 0;">üéØ Learning Objectives</h2>
                <ul style="color: white;">
                    <li>Display a camera preview and capture photos</li>
                    <li>Record video with the device camera</li>
                    <li>Switch between front and back cameras</li>
                    <li>Control flash, zoom, and focus</li>
                    <li>Pick images and videos from the media library</li>
                    <li>Save captured media to the device gallery</li>
                    <li>Build a complete camera interface with controls</li>
                </ul>
            </div>

            <!-- Table of Contents -->
            <div class="toc-container">
                <details class="toc-details" open>
                    <summary>üìë Table of Contents</summary>
                    <ul class="toc-list">
                        <li><a href="#expo-packages">Expo Camera Packages</a></li>
                        <li><a href="#camera-preview">Camera Preview</a></li>
                        <li><a href="#taking-photos">Taking Photos</a></li>
                        <li><a href="#recording-video">Recording Video</a></li>
                        <li><a href="#camera-controls">Camera Controls</a></li>
                        <li><a href="#image-picker">Image Picker</a></li>
                        <li><a href="#media-library">Media Library</a></li>
                        <li><a href="#complete-camera">Complete Camera App</a></li>
                        <li><a href="#exercises">Hands-On Exercises</a></li>
                        <li><a href="#summary">Summary</a></li>
                    </ul>
                </details>
            </div>

            <!-- Expo Camera Packages -->
            <section id="expo-packages">
                <h2>Expo Camera Packages</h2>

                <p>Expo provides several packages for working with camera and media. Understanding when to use each one is important for building the right solution.</p>

                <div class="card">
                    <h4>üì¶ Package Overview</h4>
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f5f5f5;">
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Package</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Use For</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Expo Go?</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><code>expo-camera</code></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Custom camera UI, live preview, video recording</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">‚úÖ Yes</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><code>expo-image-picker</code></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Quick photo capture, library selection</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">‚úÖ Yes</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><code>expo-media-library</code></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Save to gallery, browse all photos/videos</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">‚úÖ Yes</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><code>expo-image-manipulator</code></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Resize, crop, rotate, compress images</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">‚úÖ Yes</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Mermaid: Decision Tree -->
                <pre class="mermaid">
flowchart TD
    A[Need camera features?] -->|Yes| B{Custom camera UI?}
    A -->|No, just pick images| C[expo-image-picker]
    
    B -->|Yes, full control| D[expo-camera]
    B -->|No, quick capture| C
    
    D --> E{Save to gallery?}
    C --> E
    
    E -->|Yes| F[expo-media-library]
    E -->|No| G[Use image directly]
    
    style D fill:#667eea,color:#fff
    style C fill:#4CAF50,color:#fff
    style F fill:#FF9800,color:#fff
                </pre>

                <h3>Installation</h3>

                <pre><code># Install all camera-related packages
npx expo install expo-camera expo-image-picker expo-media-library expo-image-manipulator</code></pre>

                <div class="card" style="background: #e3f2fd; border-left: 4px solid #2196F3;">
                    <h4>üí° Quick Rule of Thumb</h4>
                    <ul>
                        <li><strong>Profile photo upload?</strong> ‚Üí Use <code>expo-image-picker</code></li>
                        <li><strong>Instagram-style camera?</strong> ‚Üí Use <code>expo-camera</code></li>
                        <li><strong>Save captured photos?</strong> ‚Üí Add <code>expo-media-library</code></li>
                    </ul>
                </div>
            </section>

            <!-- Camera Preview -->
            <section id="camera-preview">
                <h2>Camera Preview</h2>

                <p>The <code>expo-camera</code> package provides a <code>CameraView</code> component that displays a live camera preview. Let's start with the basics.</p>

                <h3>Basic Camera Preview</h3>

                <pre><code>import { useState } from 'react';
import { View, Text, StyleSheet, Pressable } from 'react-native';
import { CameraView, useCameraPermissions } from 'expo-camera';

export default function BasicCamera() {
  const [permission, requestPermission] = useCameraPermissions();

  // Handle loading
  if (!permission) {
    return &lt;View /&gt;;
  }

  // Handle no permission
  if (!permission.granted) {
    return (
      &lt;View style={styles.container}&gt;
        &lt;Text style={styles.message}&gt;
          We need camera permission to show the preview
        &lt;/Text&gt;
        &lt;Pressable style={styles.button} onPress={requestPermission}&gt;
          &lt;Text style={styles.buttonText}&gt;Grant Permission&lt;/Text&gt;
        &lt;/Pressable&gt;
      &lt;/View&gt;
    );
  }

  // Show camera
  return (
    &lt;View style={styles.container}&gt;
      &lt;CameraView style={styles.camera} /&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    justifyContent: 'center',
  },
  camera: {
    flex: 1,
  },
  message: {
    textAlign: 'center',
    paddingBottom: 10,
  },
  button: {
    backgroundColor: '#667eea',
    padding: 16,
    borderRadius: 8,
    marginHorizontal: 20,
    alignItems: 'center',
  },
  buttonText: {
    color: 'white',
    fontWeight: '600',
  },
});</code></pre>

                <h3>Camera Facing (Front/Back)</h3>

                <pre><code>import { useState } from 'react';
import { View, Pressable, Text, StyleSheet } from 'react-native';
import { CameraView, CameraType, useCameraPermissions } from 'expo-camera';

export default function CameraWithFlip() {
  const [facing, setFacing] = useState&lt;CameraType&gt;('back');
  const [permission, requestPermission] = useCameraPermissions();

  if (!permission?.granted) {
    return (
      &lt;View style={styles.container}&gt;
        &lt;Pressable onPress={requestPermission}&gt;
          &lt;Text&gt;Grant Permission&lt;/Text&gt;
        &lt;/Pressable&gt;
      &lt;/View&gt;
    );
  }

  const toggleCameraFacing = () => {
    setFacing(current => (current === 'back' ? 'front' : 'back'));
  };

  return (
    &lt;View style={styles.container}&gt;
      &lt;CameraView style={styles.camera} facing={facing}&gt;
        &lt;View style={styles.buttonContainer}&gt;
          &lt;Pressable style={styles.flipButton} onPress={toggleCameraFacing}&gt;
            &lt;Text style={styles.flipText}&gt;üîÑ Flip&lt;/Text&gt;
          &lt;/Pressable&gt;
        &lt;/View&gt;
      &lt;/CameraView&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
  },
  camera: {
    flex: 1,
  },
  buttonContainer: {
    flex: 1,
    flexDirection: 'row',
    backgroundColor: 'transparent',
    margin: 64,
  },
  flipButton: {
    flex: 1,
    alignSelf: 'flex-end',
    alignItems: 'center',
    backgroundColor: 'rgba(0,0,0,0.4)',
    padding: 15,
    borderRadius: 10,
  },
  flipText: {
    fontSize: 18,
    fontWeight: 'bold',
    color: 'white',
  },
});</code></pre>
            </section>

            <!-- Taking Photos -->
            <section id="taking-photos">
                <h2>Taking Photos</h2>

                <p>To capture photos, you need a reference to the camera and call the <code>takePictureAsync</code> method.</p>

                <h3>Capture a Photo</h3>

                <pre><code>import { useState, useRef } from 'react';
import { View, Image, Pressable, Text, StyleSheet } from 'react-native';
import { CameraView, useCameraPermissions } from 'expo-camera';

export default function PhotoCapture() {
  const [photo, setPhoto] = useState&lt;string | null&gt;(null);
  const cameraRef = useRef&lt;CameraView&gt;(null);
  const [permission, requestPermission] = useCameraPermissions();

  if (!permission?.granted) {
    return (
      &lt;View style={styles.container}&gt;
        &lt;Pressable style={styles.button} onPress={requestPermission}&gt;
          &lt;Text style={styles.buttonText}&gt;Grant Permission&lt;/Text&gt;
        &lt;/Pressable&gt;
      &lt;/View&gt;
    );
  }

  const takePicture = async () => {
    if (cameraRef.current) {
      const result = await cameraRef.current.takePictureAsync({
        quality: 0.8,        // 0-1, compression quality
        base64: false,       // Include base64 data
        exif: true,          // Include EXIF metadata
        skipProcessing: false, // Skip Android processing for speed
      });
      
      if (result) {
        setPhoto(result.uri);
        console.log('Photo taken:', result);
        // result contains: { uri, width, height, exif?, base64? }
      }
    }
  };

  // Show captured photo
  if (photo) {
    return (
      &lt;View style={styles.container}&gt;
        &lt;Image source={{ uri: photo }} style={styles.preview} /&gt;
        &lt;View style={styles.previewButtons}&gt;
          &lt;Pressable 
            style={[styles.button, styles.retakeButton]} 
            onPress={() => setPhoto(null)}
          &gt;
            &lt;Text style={styles.buttonText}&gt;Retake&lt;/Text&gt;
          &lt;/Pressable&gt;
          &lt;Pressable 
            style={[styles.button, styles.useButton]}
            onPress={() => console.log('Use photo:', photo)}
          &gt;
            &lt;Text style={styles.buttonText}&gt;Use Photo&lt;/Text&gt;
          &lt;/Pressable&gt;
        &lt;/View&gt;
      &lt;/View&gt;
    );
  }

  // Show camera
  return (
    &lt;View style={styles.container}&gt;
      &lt;CameraView ref={cameraRef} style={styles.camera}&gt;
        &lt;View style={styles.cameraOverlay}&gt;
          &lt;Pressable style={styles.captureButton} onPress={takePicture}&gt;
            &lt;View style={styles.captureButtonInner} /&gt;
          &lt;/Pressable&gt;
        &lt;/View&gt;
      &lt;/CameraView&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: 'black',
  },
  camera: {
    flex: 1,
  },
  cameraOverlay: {
    flex: 1,
    backgroundColor: 'transparent',
    justifyContent: 'flex-end',
    alignItems: 'center',
    paddingBottom: 40,
  },
  captureButton: {
    width: 80,
    height: 80,
    borderRadius: 40,
    backgroundColor: 'rgba(255,255,255,0.3)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  captureButtonInner: {
    width: 65,
    height: 65,
    borderRadius: 35,
    backgroundColor: 'white',
  },
  preview: {
    flex: 1,
  },
  previewButtons: {
    flexDirection: 'row',
    justifyContent: 'space-around',
    padding: 20,
    backgroundColor: 'black',
  },
  button: {
    paddingHorizontal: 30,
    paddingVertical: 15,
    borderRadius: 8,
  },
  retakeButton: {
    backgroundColor: '#666',
  },
  useButton: {
    backgroundColor: '#667eea',
  },
  buttonText: {
    color: 'white',
    fontSize: 16,
    fontWeight: '600',
  },
});</code></pre>

                <h3>Photo Options Reference</h3>

                <div class="card">
                    <h4>üì∏ takePictureAsync Options</h4>
                    <pre><code>const options = {
  // Image quality (0-1)
  quality: 0.8,
  
  // Include base64 encoded image
  base64: false,
  
  // Include EXIF metadata
  exif: true,
  
  // Skip processing on Android (faster but no rotation fix)
  skipProcessing: false,
  
  // Mirror the image (useful for selfies)
  mirror: false,
  
  // Image format (iOS only)
  imageType: 'jpg', // 'jpg' | 'png'
};

const result = await cameraRef.current.takePictureAsync(options);
// Returns: { uri, width, height, exif?, base64? }</code></pre>
                </div>
            </section>

            <!-- Recording Video -->
            <section id="recording-video">
                <h2>Recording Video</h2>

                <p>Video recording requires microphone permission in addition to camera permission. The API is similar to taking photos but with start/stop control.</p>

                <h3>Video Recording Component</h3>

                <pre><code>import { useState, useRef } from 'react';
import { View, Pressable, Text, StyleSheet } from 'react-native';
import { CameraView, useCameraPermissions, useMicrophonePermissions } from 'expo-camera';
import { Video, ResizeMode } from 'expo-av';

export default function VideoRecorder() {
  const [isRecording, setIsRecording] = useState(false);
  const [videoUri, setVideoUri] = useState&lt;string | null&gt;(null);
  const cameraRef = useRef&lt;CameraView&gt;(null);
  
  const [cameraPermission, requestCameraPermission] = useCameraPermissions();
  const [micPermission, requestMicPermission] = useMicrophonePermissions();

  // Check both permissions
  const hasPermissions = cameraPermission?.granted && micPermission?.granted;

  if (!hasPermissions) {
    return (
      &lt;View style={styles.container}&gt;
        &lt;Text style={styles.message}&gt;Camera and microphone access needed&lt;/Text&gt;
        &lt;Pressable 
          style={styles.button} 
          onPress={async () => {
            await requestCameraPermission();
            await requestMicPermission();
          }}
        &gt;
          &lt;Text style={styles.buttonText}&gt;Grant Permissions&lt;/Text&gt;
        &lt;/Pressable&gt;
      &lt;/View&gt;
    );
  }

  const startRecording = async () => {
    if (cameraRef.current) {
      setIsRecording(true);
      
      const video = await cameraRef.current.recordAsync({
        maxDuration: 60,      // Max recording time in seconds
        maxFileSize: 50 * 1024 * 1024, // 50MB max
        mute: false,          // Record audio
      });
      
      if (video) {
        setVideoUri(video.uri);
        console.log('Video recorded:', video);
      }
      
      setIsRecording(false);
    }
  };

  const stopRecording = () => {
    if (cameraRef.current && isRecording) {
      cameraRef.current.stopRecording();
    }
  };

  // Show recorded video
  if (videoUri) {
    return (
      &lt;View style={styles.container}&gt;
        &lt;Video
          source={{ uri: videoUri }}
          style={styles.video}
          useNativeControls
          resizeMode={ResizeMode.CONTAIN}
          isLooping
        /&gt;
        &lt;View style={styles.previewButtons}&gt;
          &lt;Pressable 
            style={[styles.button, styles.retakeButton]}
            onPress={() => setVideoUri(null)}
          &gt;
            &lt;Text style={styles.buttonText}&gt;Record Again&lt;/Text&gt;
          &lt;/Pressable&gt;
        &lt;/View&gt;
      &lt;/View&gt;
    );
  }

  return (
    &lt;View style={styles.container}&gt;
      &lt;CameraView 
        ref={cameraRef} 
        style={styles.camera}
        mode="video"
      &gt;
        &lt;View style={styles.cameraOverlay}&gt;
          {isRecording && (
            &lt;View style={styles.recordingIndicator}&gt;
              &lt;View style={styles.recordingDot} /&gt;
              &lt;Text style={styles.recordingText}&gt;Recording...&lt;/Text&gt;
            &lt;/View&gt;
          )}
          
          &lt;Pressable 
            style={[
              styles.recordButton,
              isRecording && styles.recordButtonActive
            ]}
            onPress={isRecording ? stopRecording : startRecording}
          &gt;
            &lt;View style={[
              styles.recordButtonInner,
              isRecording && styles.recordButtonInnerActive
            ]} /&gt;
          &lt;/Pressable&gt;
        &lt;/View&gt;
      &lt;/CameraView&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: 'black',
  },
  camera: {
    flex: 1,
  },
  video: {
    flex: 1,
  },
  cameraOverlay: {
    flex: 1,
    backgroundColor: 'transparent',
    justifyContent: 'flex-end',
    alignItems: 'center',
    paddingBottom: 40,
  },
  recordingIndicator: {
    flexDirection: 'row',
    alignItems: 'center',
    position: 'absolute',
    top: 50,
    backgroundColor: 'rgba(0,0,0,0.5)',
    paddingHorizontal: 16,
    paddingVertical: 8,
    borderRadius: 20,
  },
  recordingDot: {
    width: 12,
    height: 12,
    borderRadius: 6,
    backgroundColor: '#f44336',
    marginRight: 8,
  },
  recordingText: {
    color: 'white',
    fontSize: 14,
    fontWeight: '600',
  },
  recordButton: {
    width: 80,
    height: 80,
    borderRadius: 40,
    backgroundColor: 'rgba(255,255,255,0.3)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  recordButtonActive: {
    backgroundColor: 'rgba(244,67,54,0.3)',
  },
  recordButtonInner: {
    width: 65,
    height: 65,
    borderRadius: 35,
    backgroundColor: '#f44336',
  },
  recordButtonInnerActive: {
    width: 30,
    height: 30,
    borderRadius: 4,
  },
  message: {
    color: 'white',
    textAlign: 'center',
    marginBottom: 20,
  },
  button: {
    backgroundColor: '#667eea',
    paddingHorizontal: 30,
    paddingVertical: 15,
    borderRadius: 8,
    marginHorizontal: 20,
  },
  buttonText: {
    color: 'white',
    fontSize: 16,
    fontWeight: '600',
    textAlign: 'center',
  },
  previewButtons: {
    padding: 20,
    backgroundColor: 'black',
  },
  retakeButton: {
    backgroundColor: '#666',
  },
});</code></pre>
            </section>

            <!-- Camera Controls -->
            <section id="camera-controls">
                <h2>Camera Controls</h2>

                <p>Beyond basic capture, you can control flash, zoom, and other camera settings.</p>

                <h3>Flash Control</h3>

                <pre><code>import { useState } from 'react';
import { CameraView, FlashMode } from 'expo-camera';

function CameraWithFlash() {
  const [flash, setFlash] = useState&lt;FlashMode&gt;('off');

  const toggleFlash = () => {
    setFlash(current => {
      switch (current) {
        case 'off': return 'on';
        case 'on': return 'auto';
        case 'auto': return 'off';
        default: return 'off';
      }
    });
  };

  const getFlashIcon = () => {
    switch (flash) {
      case 'on': return '‚ö°';
      case 'auto': return '‚ö°A';
      case 'off': return '‚ö°‚úï';
    }
  };

  return (
    &lt;CameraView 
      style={{ flex: 1 }} 
      flash={flash}
    &gt;
      &lt;Pressable onPress={toggleFlash}&gt;
        &lt;Text&gt;{getFlashIcon()}&lt;/Text&gt;
      &lt;/Pressable&gt;
    &lt;/CameraView&gt;
  );
}</code></pre>

                <h3>Zoom Control</h3>

                <pre><code>import { useState } from 'react';
import { View, StyleSheet } from 'react-native';
import { CameraView } from 'expo-camera';
import Slider from '@react-native-community/slider';

function CameraWithZoom() {
  const [zoom, setZoom] = useState(0); // 0 to 1

  return (
    &lt;View style={styles.container}&gt;
      &lt;CameraView 
        style={styles.camera} 
        zoom={zoom}
      /&gt;
      
      &lt;View style={styles.controls}&gt;
        &lt;Text style={styles.zoomText}&gt;Zoom: {(zoom * 100).toFixed(0)}%&lt;/Text&gt;
        &lt;Slider
          style={styles.slider}
          minimumValue={0}
          maximumValue={1}
          value={zoom}
          onValueChange={setZoom}
          minimumTrackTintColor="#667eea"
          maximumTrackTintColor="#ddd"
          thumbTintColor="#667eea"
        /&gt;
      &lt;/View&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: { flex: 1 },
  camera: { flex: 1 },
  controls: {
    position: 'absolute',
    bottom: 100,
    left: 20,
    right: 20,
    backgroundColor: 'rgba(0,0,0,0.5)',
    padding: 15,
    borderRadius: 10,
  },
  zoomText: {
    color: 'white',
    textAlign: 'center',
    marginBottom: 10,
  },
  slider: {
    width: '100%',
  },
});</code></pre>

                <h3>Pinch to Zoom with Gesture Handler</h3>

                <pre><code>import { useState } from 'react';
import { StyleSheet } from 'react-native';
import { CameraView } from 'expo-camera';
import { GestureDetector, Gesture } from 'react-native-gesture-handler';
import Animated from 'react-native-reanimated';

function CameraWithPinchZoom() {
  const [zoom, setZoom] = useState(0);
  const [lastZoom, setLastZoom] = useState(0);

  const pinchGesture = Gesture.Pinch()
    .onUpdate((event) => {
      // Scale factor to zoom level (0-1)
      const newZoom = Math.min(
        Math.max(lastZoom + (event.scale - 1) * 0.5, 0),
        1
      );
      setZoom(newZoom);
    })
    .onEnd(() => {
      setLastZoom(zoom);
    });

  return (
    &lt;GestureDetector gesture={pinchGesture}&gt;
      &lt;Animated.View style={{ flex: 1 }}&gt;
        &lt;CameraView style={styles.camera} zoom={zoom} /&gt;
      &lt;/Animated.View&gt;
    &lt;/GestureDetector&gt;
  );
}</code></pre>

                <h3>CameraView Props Reference</h3>

                <div class="card">
                    <h4>üéõÔ∏è CameraView Props</h4>
                    <pre><code>&lt;CameraView
  // Camera selection
  facing="back"           // 'front' | 'back'
  
  // Flash mode
  flash="off"             // 'off' | 'on' | 'auto'
  
  // Zoom level (0-1)
  zoom={0}
  
  // Mode for photo or video
  mode="picture"          // 'picture' | 'video'
  
  // Enable/disable sounds
  mute={false}
  
  // Mirror the preview (selfie camera)
  mirror={false}
  
  // Enable barcode scanning
  barcodeScannerSettings={{
    barcodeTypes: ['qr', 'ean13'],
  }}
  
  // Callbacks
  onCameraReady={() => {}}
  onMountError={(error) => {}}
  onBarcodeScanned={(data) => {}}
/&gt;</code></pre>
                </div>
            </section>

            <!-- Image Picker -->
            <section id="image-picker">
                <h2>Image Picker</h2>

                <p>For most apps, <code>expo-image-picker</code> is the simpler choice. It provides a system UI for capturing photos or selecting from the library‚Äîno need to build a custom camera interface.</p>

                <h3>Pick from Library</h3>

                <pre><code>import { useState } from 'react';
import { View, Image, Pressable, Text, StyleSheet } from 'react-native';
import * as ImagePicker from 'expo-image-picker';

export default function ImagePickerDemo() {
  const [image, setImage] = useState&lt;string | null&gt;(null);

  const pickImage = async () => {
    // No permissions request needed for launching the image library
    const result = await ImagePicker.launchImageLibraryAsync({
      mediaTypes: ['images'],
      allowsEditing: true,
      aspect: [4, 3],
      quality: 1,
    });

    if (!result.canceled) {
      setImage(result.assets[0].uri);
    }
  };

  return (
    &lt;View style={styles.container}&gt;
      {image && &lt;Image source={{ uri: image }} style={styles.image} /&gt;}
      &lt;Pressable style={styles.button} onPress={pickImage}&gt;
        &lt;Text style={styles.buttonText}&gt;Pick an image&lt;/Text&gt;
      &lt;/Pressable&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: 'center',
    justifyContent: 'center',
  },
  image: {
    width: 300,
    height: 300,
    borderRadius: 10,
    marginBottom: 20,
  },
  button: {
    backgroundColor: '#667eea',
    paddingHorizontal: 30,
    paddingVertical: 15,
    borderRadius: 8,
  },
  buttonText: {
    color: 'white',
    fontSize: 16,
    fontWeight: '600',
  },
});</code></pre>

                <h3>Take Photo with System Camera</h3>

                <pre><code>import * as ImagePicker from 'expo-image-picker';

async function takePhoto() {
  // Request camera permission
  const { status } = await ImagePicker.requestCameraPermissionsAsync();
  
  if (status !== 'granted') {
    alert('Camera permission is required');
    return null;
  }

  // Launch system camera
  const result = await ImagePicker.launchCameraAsync({
    allowsEditing: true,
    aspect: [1, 1],    // Square crop
    quality: 0.8,
  });

  if (!result.canceled) {
    return result.assets[0].uri;
  }
  
  return null;
}</code></pre>

                <h3>Multiple Selection</h3>

                <pre><code>import * as ImagePicker from 'expo-image-picker';

async function pickMultipleImages() {
  const result = await ImagePicker.launchImageLibraryAsync({
    mediaTypes: ['images'],
    allowsMultipleSelection: true,
    selectionLimit: 10,  // Max number of images
    quality: 0.8,
  });

  if (!result.canceled) {
    // result.assets is an array of selected images
    const imageUris = result.assets.map(asset => asset.uri);
    console.log('Selected images:', imageUris);
    return imageUris;
  }
  
  return [];
}</code></pre>

                <h3>ImagePicker Options Reference</h3>

                <div class="card">
                    <h4>üì∑ launchImageLibraryAsync / launchCameraAsync Options</h4>
                    <pre><code>const options = {
  // Media types to show
  mediaTypes: ['images'],           // ['images'] | ['videos'] | ['images', 'videos']
  
  // Allow editing before returning
  allowsEditing: true,
  
  // Aspect ratio for crop (when editing)
  aspect: [4, 3],                   // [width, height]
  
  // Image quality (0-1)
  quality: 1,
  
  // Include base64 data
  base64: false,
  
  // Include EXIF data
  exif: false,
  
  // Allow multiple selection (library only)
  allowsMultipleSelection: false,
  
  // Max selection count
  selectionLimit: 0,                // 0 = unlimited
  
  // Video options
  videoMaxDuration: 60,             // seconds
  videoQuality: 1,                  // 0-1
  
  // Presentation style (iOS)
  presentationStyle: 'pageSheet',   // 'fullScreen' | 'pageSheet' | etc.
};

const result = await ImagePicker.launchImageLibraryAsync(options);

// Result structure
{
  canceled: false,
  assets: [{
    uri: 'file://...',
    width: 1920,
    height: 1080,
    type: 'image',
    fileName: 'IMG_001.jpg',
    fileSize: 1234567,
    base64?: '...',
    exif?: {...},
    duration?: 10.5,  // for videos
  }]
}</code></pre>
                </div>
            </section>
            <!-- Media Library -->
            <section id="media-library">
                <h2>Media Library</h2>

                <p>The <code>expo-media-library</code> package lets you save photos/videos to the device gallery and browse existing media.</p>

                <h3>Save Photo to Gallery</h3>

                <pre><code>import * as MediaLibrary from 'expo-media-library';

async function saveToGallery(photoUri: string) {
  // Request permission
  const { status } = await MediaLibrary.requestPermissionsAsync();
  
  if (status !== 'granted') {
    alert('Permission to access media library is required');
    return null;
  }

  // Save the photo
  const asset = await MediaLibrary.createAssetAsync(photoUri);
  console.log('Saved to gallery:', asset);
  
  return asset;
}

// Save to a specific album
async function saveToAlbum(photoUri: string, albumName: string) {
  const { status } = await MediaLibrary.requestPermissionsAsync();
  
  if (status !== 'granted') {
    return null;
  }

  // Create the asset
  const asset = await MediaLibrary.createAssetAsync(photoUri);
  
  // Get or create the album
  let album = await MediaLibrary.getAlbumAsync(albumName);
  
  if (!album) {
    // Create new album with this asset
    album = await MediaLibrary.createAlbumAsync(albumName, asset, false);
  } else {
    // Add to existing album
    await MediaLibrary.addAssetsToAlbumAsync([asset], album, false);
  }
  
  return asset;
}</code></pre>

                <h3>Browse Photos from Library</h3>

                <pre><code>import { useState, useEffect } from 'react';
import { View, FlatList, Image, StyleSheet, Pressable, Text } from 'react-native';
import * as MediaLibrary from 'expo-media-library';

export default function PhotoGallery() {
  const [photos, setPhotos] = useState&lt;MediaLibrary.Asset[]&gt;([]);
  const [permission, requestPermission] = MediaLibrary.usePermissions();
  const [hasMore, setHasMore] = useState(true);
  const [endCursor, setEndCursor] = useState&lt;string | undefined&gt;();

  const loadPhotos = async (after?: string) => {
    const { assets, hasNextPage, endCursor: newCursor } = await MediaLibrary.getAssetsAsync({
      first: 50,
      after,
      mediaType: 'photo',
      sortBy: [MediaLibrary.SortBy.creationTime],
    });

    if (after) {
      setPhotos(prev => [...prev, ...assets]);
    } else {
      setPhotos(assets);
    }
    
    setHasMore(hasNextPage);
    setEndCursor(newCursor);
  };

  useEffect(() => {
    if (permission?.granted) {
      loadPhotos();
    }
  }, [permission?.granted]);

  if (!permission?.granted) {
    return (
      &lt;View style={styles.center}&gt;
        &lt;Text&gt;Permission needed to view photos&lt;/Text&gt;
        &lt;Pressable style={styles.button} onPress={requestPermission}&gt;
          &lt;Text style={styles.buttonText}&gt;Grant Permission&lt;/Text&gt;
        &lt;/Pressable&gt;
      &lt;/View&gt;
    );
  }

  const loadMore = () => {
    if (hasMore && endCursor) {
      loadPhotos(endCursor);
    }
  };

  return (
    &lt;FlatList
      data={photos}
      numColumns={3}
      keyExtractor={(item) => item.id}
      onEndReached={loadMore}
      onEndReachedThreshold={0.5}
      renderItem={({ item }) => (
        &lt;Pressable 
          style={styles.photoContainer}
          onPress={() => console.log('Selected:', item.uri)}
        &gt;
          &lt;Image source={{ uri: item.uri }} style={styles.photo} /&gt;
        &lt;/Pressable&gt;
      )}
    /&gt;
  );
}

const styles = StyleSheet.create({
  center: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
  },
  photoContainer: {
    flex: 1/3,
    aspectRatio: 1,
    padding: 1,
  },
  photo: {
    flex: 1,
  },
  button: {
    backgroundColor: '#667eea',
    paddingHorizontal: 20,
    paddingVertical: 12,
    borderRadius: 8,
    marginTop: 16,
  },
  buttonText: {
    color: 'white',
    fontWeight: '600',
  },
});</code></pre>

                <h3>Get Albums</h3>

                <pre><code>import * as MediaLibrary from 'expo-media-library';

async function getAlbums() {
  const albums = await MediaLibrary.getAlbumsAsync({
    includeSmartAlbums: true,  // iOS only: include Camera Roll, Favorites, etc.
  });
  
  console.log('Albums:', albums);
  // Each album: { id, title, assetCount, type }
  
  return albums;
}

// Get photos from a specific album
async function getAlbumPhotos(albumId: string) {
  const { assets } = await MediaLibrary.getAssetsAsync({
    album: albumId,
    first: 100,
    mediaType: 'photo',
  });
  
  return assets;
}</code></pre>

                <h3>Delete Assets</h3>

                <pre><code>import * as MediaLibrary from 'expo-media-library';
import { Alert } from 'react-native';

async function deletePhoto(assetId: string) {
  // Confirm with user
  return new Promise((resolve) => {
    Alert.alert(
      'Delete Photo',
      'Are you sure you want to delete this photo?',
      [
        { text: 'Cancel', style: 'cancel', onPress: () => resolve(false) },
        {
          text: 'Delete',
          style: 'destructive',
          onPress: async () => {
            const deleted = await MediaLibrary.deleteAssetsAsync([assetId]);
            resolve(deleted);
          },
        },
      ]
    );
  });
}</code></pre>
            </section>

            <!-- Complete Camera App -->
            <section id="complete-camera">
                <h2>Complete Camera App</h2>

                <p>Let's build a complete camera app with all the features we've covered: photo capture, front/back switching, flash, zoom, and saving to gallery.</p>

                <pre><code>import { useState, useRef } from 'react';
import { View, Image, Pressable, Text, StyleSheet, Alert } from 'react-native';
import { 
  CameraView, 
  CameraType, 
  FlashMode,
  useCameraPermissions 
} from 'expo-camera';
import * as MediaLibrary from 'expo-media-library';

export default function FullCameraApp() {
  // State
  const [facing, setFacing] = useState&lt;CameraType&gt;('back');
  const [flash, setFlash] = useState&lt;FlashMode&gt;('off');
  const [zoom, setZoom] = useState(0);
  const [photo, setPhoto] = useState&lt;string | null&gt;(null);
  const [isTakingPhoto, setIsTakingPhoto] = useState(false);
  
  // Refs
  const cameraRef = useRef&lt;CameraView&gt;(null);
  
  // Permissions
  const [cameraPermission, requestCameraPermission] = useCameraPermissions();
  const [mediaPermission, requestMediaPermission] = MediaLibrary.usePermissions();

  // Check permissions
  if (!cameraPermission?.granted) {
    return (
      &lt;View style={styles.permissionContainer}&gt;
        &lt;Text style={styles.permissionText}&gt;
          Camera access is required to take photos
        &lt;/Text&gt;
        &lt;Pressable style={styles.permissionButton} onPress={requestCameraPermission}&gt;
          &lt;Text style={styles.permissionButtonText}&gt;Enable Camera&lt;/Text&gt;
        &lt;/Pressable&gt;
      &lt;/View&gt;
    );
  }

  // Actions
  const toggleFacing = () => {
    setFacing(prev => prev === 'back' ? 'front' : 'back');
  };

  const cycleFlash = () => {
    setFlash(prev => {
      switch (prev) {
        case 'off': return 'on';
        case 'on': return 'auto';
        case 'auto': return 'off';
      }
    });
  };

  const getFlashIcon = () => {
    switch (flash) {
      case 'off': return '‚ö°‚úï';
      case 'on': return '‚ö°';
      case 'auto': return '‚ö°A';
    }
  };

  const takePicture = async () => {
    if (!cameraRef.current || isTakingPhoto) return;
    
    setIsTakingPhoto(true);
    
    try {
      const result = await cameraRef.current.takePictureAsync({
        quality: 0.9,
        exif: true,
      });
      
      if (result) {
        setPhoto(result.uri);
      }
    } catch (error) {
      Alert.alert('Error', 'Failed to take photo');
    } finally {
      setIsTakingPhoto(false);
    }
  };

  const savePhoto = async () => {
    if (!photo) return;
    
    // Request media permission if needed
    if (!mediaPermission?.granted) {
      const { granted } = await requestMediaPermission();
      if (!granted) {
        Alert.alert('Permission Required', 'Media library access is needed to save photos');
        return;
      }
    }
    
    try {
      await MediaLibrary.createAssetAsync(photo);
      Alert.alert('Saved!', 'Photo saved to your gallery');
      setPhoto(null);
    } catch (error) {
      Alert.alert('Error', 'Failed to save photo');
    }
  };

  const discardPhoto = () => {
    setPhoto(null);
  };

  // Photo preview screen
  if (photo) {
    return (
      &lt;View style={styles.container}&gt;
        &lt;Image source={{ uri: photo }} style={styles.preview} /&gt;
        
        &lt;View style={styles.previewControls}&gt;
          &lt;Pressable style={styles.previewButton} onPress={discardPhoto}&gt;
            &lt;Text style={styles.previewButtonText}&gt;‚úï Discard&lt;/Text&gt;
          &lt;/Pressable&gt;
          &lt;Pressable 
            style={[styles.previewButton, styles.saveButton]} 
            onPress={savePhoto}
          &gt;
            &lt;Text style={styles.previewButtonText}&gt;üíæ Save&lt;/Text&gt;
          &lt;/Pressable&gt;
        &lt;/View&gt;
      &lt;/View&gt;
    );
  }

  // Camera screen
  return (
    &lt;View style={styles.container}&gt;
      &lt;CameraView
        ref={cameraRef}
        style={styles.camera}
        facing={facing}
        flash={flash}
        zoom={zoom}
      &gt;
        {/* Top controls */}
        &lt;View style={styles.topControls}&gt;
          &lt;Pressable style={styles.controlButton} onPress={cycleFlash}&gt;
            &lt;Text style={styles.controlText}&gt;{getFlashIcon()}&lt;/Text&gt;
          &lt;/Pressable&gt;
        &lt;/View&gt;

        {/* Bottom controls */}
        &lt;View style={styles.bottomControls}&gt;
          {/* Gallery button */}
          &lt;Pressable style={styles.sideButton}&gt;
            &lt;Text style={styles.sideButtonText}&gt;üñºÔ∏è&lt;/Text&gt;
          &lt;/Pressable&gt;

          {/* Capture button */}
          &lt;Pressable 
            style={[styles.captureButton, isTakingPhoto && styles.captureButtonDisabled]}
            onPress={takePicture}
            disabled={isTakingPhoto}
          &gt;
            &lt;View style={styles.captureButtonInner} /&gt;
          &lt;/Pressable&gt;

          {/* Flip button */}
          &lt;Pressable style={styles.sideButton} onPress={toggleFacing}&gt;
            &lt;Text style={styles.sideButtonText}&gt;üîÑ&lt;/Text&gt;
          &lt;/Pressable&gt;
        &lt;/View&gt;

        {/* Zoom slider */}
        &lt;View style={styles.zoomContainer}&gt;
          &lt;Text style={styles.zoomText}&gt;{zoom === 0 ? '1x' : `${(1 + zoom * 4).toFixed(1)}x`}&lt;/Text&gt;
          &lt;View style={styles.zoomButtons}&gt;
            {[0, 0.25, 0.5].map((z) => (
              &lt;Pressable 
                key={z}
                style={[styles.zoomButton, zoom === z && styles.zoomButtonActive]}
                onPress={() => setZoom(z)}
              &gt;
                &lt;Text style={[styles.zoomButtonText, zoom === z && styles.zoomButtonTextActive]}&gt;
                  {z === 0 ? '1x' : z === 0.25 ? '2x' : '3x'}
                &lt;/Text&gt;
              &lt;/Pressable&gt;
            ))}
          &lt;/View&gt;
        &lt;/View&gt;
      &lt;/CameraView&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: 'black',
  },
  camera: {
    flex: 1,
  },
  preview: {
    flex: 1,
  },
  
  // Permission screen
  permissionContainer: {
    flex: 1,
    justifyContent: 'center',
    alignItems: 'center',
    backgroundColor: 'black',
    padding: 20,
  },
  permissionText: {
    color: 'white',
    fontSize: 16,
    textAlign: 'center',
    marginBottom: 20,
  },
  permissionButton: {
    backgroundColor: '#667eea',
    paddingHorizontal: 30,
    paddingVertical: 15,
    borderRadius: 8,
  },
  permissionButtonText: {
    color: 'white',
    fontSize: 16,
    fontWeight: '600',
  },
  
  // Top controls
  topControls: {
    flexDirection: 'row',
    justifyContent: 'flex-end',
    padding: 20,
    paddingTop: 60,
  },
  controlButton: {
    width: 44,
    height: 44,
    borderRadius: 22,
    backgroundColor: 'rgba(0,0,0,0.4)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  controlText: {
    fontSize: 18,
    color: 'white',
  },
  
  // Bottom controls
  bottomControls: {
    position: 'absolute',
    bottom: 40,
    left: 0,
    right: 0,
    flexDirection: 'row',
    justifyContent: 'space-around',
    alignItems: 'center',
    paddingHorizontal: 30,
  },
  sideButton: {
    width: 50,
    height: 50,
    borderRadius: 25,
    backgroundColor: 'rgba(255,255,255,0.2)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  sideButtonText: {
    fontSize: 24,
  },
  captureButton: {
    width: 80,
    height: 80,
    borderRadius: 40,
    backgroundColor: 'rgba(255,255,255,0.3)',
    justifyContent: 'center',
    alignItems: 'center',
  },
  captureButtonDisabled: {
    opacity: 0.5,
  },
  captureButtonInner: {
    width: 65,
    height: 65,
    borderRadius: 35,
    backgroundColor: 'white',
  },
  
  // Zoom controls
  zoomContainer: {
    position: 'absolute',
    bottom: 140,
    left: 0,
    right: 0,
    alignItems: 'center',
  },
  zoomText: {
    color: 'white',
    fontSize: 12,
    marginBottom: 8,
  },
  zoomButtons: {
    flexDirection: 'row',
    backgroundColor: 'rgba(0,0,0,0.4)',
    borderRadius: 20,
    padding: 4,
  },
  zoomButton: {
    paddingHorizontal: 16,
    paddingVertical: 8,
    borderRadius: 16,
  },
  zoomButtonActive: {
    backgroundColor: 'white',
  },
  zoomButtonText: {
    color: 'white',
    fontSize: 12,
    fontWeight: '600',
  },
  zoomButtonTextActive: {
    color: 'black',
  },
  
  // Preview controls
  previewControls: {
    flexDirection: 'row',
    justifyContent: 'space-around',
    padding: 20,
    backgroundColor: 'black',
  },
  previewButton: {
    flexDirection: 'row',
    alignItems: 'center',
    backgroundColor: '#444',
    paddingHorizontal: 30,
    paddingVertical: 15,
    borderRadius: 8,
  },
  saveButton: {
    backgroundColor: '#667eea',
  },
  previewButtonText: {
    color: 'white',
    fontSize: 16,
    fontWeight: '600',
  },
});</code></pre>
            </section>

            <!-- Hands-On Exercises -->
            <section id="exercises">
                <h2>Hands-On Exercises</h2>

                <div class="exercise-card">
                    <h3>Exercise 1: Profile Photo Picker</h3>
                    <p>Build a profile photo component that lets users take a photo or pick from library.</p>
                    
                    <h4>Requirements:</h4>
                    <ul>
                        <li>Show a circular avatar placeholder</li>
                        <li>Tap to show action sheet: "Take Photo" or "Choose from Library"</li>
                        <li>Allow square cropping (1:1 aspect ratio)</li>
                        <li>Display the selected image in the avatar</li>
                    </ul>

                    <details>
                        <summary>Show Hint</summary>
                        <p>Use <code>Alert.alert</code> with multiple buttons to create an action sheet. Use <code>ImagePicker.launchCameraAsync</code> and <code>launchImageLibraryAsync</code> with <code>allowsEditing: true</code> and <code>aspect: [1, 1]</code>.</p>
                    </details>

                    <details>
                        <summary>Show Solution</summary>
                        <pre><code>import { useState } from 'react';
import { View, Image, Pressable, Text, Alert, StyleSheet } from 'react-native';
import * as ImagePicker from 'expo-image-picker';

export default function ProfilePhotoPicker() {
  const [photo, setPhoto] = useState&lt;string | null&gt;(null);

  const pickImage = async (useCamera: boolean) => {
    const options: ImagePicker.ImagePickerOptions = {
      mediaTypes: ['images'],
      allowsEditing: true,
      aspect: [1, 1],
      quality: 0.8,
    };

    let result;
    
    if (useCamera) {
      const { status } = await ImagePicker.requestCameraPermissionsAsync();
      if (status !== 'granted') {
        Alert.alert('Permission needed', 'Camera permission is required');
        return;
      }
      result = await ImagePicker.launchCameraAsync(options);
    } else {
      result = await ImagePicker.launchImageLibraryAsync(options);
    }

    if (!result.canceled) {
      setPhoto(result.assets[0].uri);
    }
  };

  const showOptions = () => {
    Alert.alert(
      'Change Profile Photo',
      'Choose an option',
      [
        { text: 'Take Photo', onPress: () => pickImage(true) },
        { text: 'Choose from Library', onPress: () => pickImage(false) },
        { text: 'Cancel', style: 'cancel' },
      ]
    );
  };

  return (
    &lt;View style={styles.container}&gt;
      &lt;Pressable onPress={showOptions}&gt;
        &lt;View style={styles.avatarContainer}&gt;
          {photo ? (
            &lt;Image source={{ uri: photo }} style={styles.avatar} /&gt;
          ) : (
            &lt;View style={[styles.avatar, styles.placeholder]}&gt;
              &lt;Text style={styles.placeholderText}&gt;üë§&lt;/Text&gt;
            &lt;/View&gt;
          )}
          &lt;View style={styles.editBadge}&gt;
            &lt;Text style={styles.editBadgeText}&gt;üì∑&lt;/Text&gt;
          &lt;/View&gt;
        &lt;/View&gt;
      &lt;/Pressable&gt;
      &lt;Text style={styles.hint}&gt;Tap to change photo&lt;/Text&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: { alignItems: 'center', padding: 20 },
  avatarContainer: { position: 'relative' },
  avatar: { width: 120, height: 120, borderRadius: 60 },
  placeholder: { backgroundColor: '#e0e0e0', justifyContent: 'center', alignItems: 'center' },
  placeholderText: { fontSize: 48 },
  editBadge: { position: 'absolute', bottom: 0, right: 0, backgroundColor: '#667eea', width: 36, height: 36, borderRadius: 18, justifyContent: 'center', alignItems: 'center', borderWidth: 3, borderColor: 'white' },
  editBadgeText: { fontSize: 16 },
  hint: { marginTop: 12, color: '#666', fontSize: 14 },
});</code></pre>
                    </details>
                </div>

                <div class="exercise-card">
                    <h3>Exercise 2: QR Code Scanner</h3>
                    <p>Build a QR code scanner using expo-camera's barcode scanning feature.</p>
                    
                    <h4>Requirements:</h4>
                    <ul>
                        <li>Display camera preview focused on scanning area</li>
                        <li>Draw a frame overlay showing scan area</li>
                        <li>When QR code detected, show the data in an alert</li>
                        <li>Allow scanning another code after dismissing alert</li>
                    </ul>

                    <details>
                        <summary>Show Hint</summary>
                        <p>Use <code>CameraView</code> with <code>barcodeScannerSettings={{ barcodeTypes: ['qr'] }}</code> and the <code>onBarcodeScanned</code> prop. Use a state variable to prevent multiple scans of the same code.</p>
                    </details>

                    <details>
                        <summary>Show Solution</summary>
                        <pre><code>import { useState } from 'react';
import { View, Text, StyleSheet, Alert, Pressable } from 'react-native';
import { CameraView, useCameraPermissions, BarcodeScanningResult } from 'expo-camera';

export default function QRScanner() {
  const [scanned, setScanned] = useState(false);
  const [permission, requestPermission] = useCameraPermissions();

  if (!permission?.granted) {
    return (
      &lt;View style={styles.container}&gt;
        &lt;Text&gt;Camera permission needed&lt;/Text&gt;
        &lt;Pressable style={styles.button} onPress={requestPermission}&gt;
          &lt;Text style={styles.buttonText}&gt;Grant Permission&lt;/Text&gt;
        &lt;/Pressable&gt;
      &lt;/View&gt;
    );
  }

  const handleBarCodeScanned = (result: BarcodeScanningResult) => {
    if (scanned) return;
    
    setScanned(true);
    
    Alert.alert(
      'QR Code Scanned!',
      result.data,
      [
        { 
          text: 'OK', 
          onPress: () => setScanned(false) 
        }
      ]
    );
  };

  return (
    &lt;View style={styles.container}&gt;
      &lt;CameraView
        style={styles.camera}
        barcodeScannerSettings={{
          barcodeTypes: ['qr'],
        }}
        onBarcodeScanned={handleBarCodeScanned}
      &gt;
        {/* Scan frame overlay */}
        &lt;View style={styles.overlay}&gt;
          &lt;View style={styles.unfocusedContainer}&gt;&lt;/View&gt;
          &lt;View style={styles.middleContainer}&gt;
            &lt;View style={styles.unfocusedContainer}&gt;&lt;/View&gt;
            &lt;View style={styles.focusedContainer}&gt;
              &lt;View style={[styles.corner, styles.topLeft]} /&gt;
              &lt;View style={[styles.corner, styles.topRight]} /&gt;
              &lt;View style={[styles.corner, styles.bottomLeft]} /&gt;
              &lt;View style={[styles.corner, styles.bottomRight]} /&gt;
            &lt;/View&gt;
            &lt;View style={styles.unfocusedContainer}&gt;&lt;/View&gt;
          &lt;/View&gt;
          &lt;View style={styles.unfocusedContainer}&gt;&lt;/View&gt;
        &lt;/View&gt;
        
        &lt;Text style={styles.instruction}&gt;
          Point camera at a QR code
        &lt;/Text&gt;
      &lt;/CameraView&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, justifyContent: 'center', alignItems: 'center' },
  camera: { flex: 1, width: '100%' },
  button: { backgroundColor: '#667eea', padding: 16, borderRadius: 8, marginTop: 16 },
  buttonText: { color: 'white', fontWeight: '600' },
  overlay: { ...StyleSheet.absoluteFillObject },
  unfocusedContainer: { flex: 1, backgroundColor: 'rgba(0,0,0,0.5)' },
  middleContainer: { flexDirection: 'row', flex: 1.5 },
  focusedContainer: { flex: 6, position: 'relative' },
  corner: { position: 'absolute', width: 30, height: 30, borderColor: '#667eea', borderWidth: 4 },
  topLeft: { top: 0, left: 0, borderRightWidth: 0, borderBottomWidth: 0 },
  topRight: { top: 0, right: 0, borderLeftWidth: 0, borderBottomWidth: 0 },
  bottomLeft: { bottom: 0, left: 0, borderRightWidth: 0, borderTopWidth: 0 },
  bottomRight: { bottom: 0, right: 0, borderLeftWidth: 0, borderTopWidth: 0 },
  instruction: { position: 'absolute', bottom: 100, alignSelf: 'center', color: 'white', fontSize: 16, backgroundColor: 'rgba(0,0,0,0.5)', padding: 12, borderRadius: 8 },
});</code></pre>
                    </details>
                </div>

                <div class="exercise-card">
                    <h3>Exercise 3: Photo Gallery with Delete</h3>
                    <p>Build a gallery that displays photos from a specific album with delete functionality.</p>
                    
                    <h4>Requirements:</h4>
                    <ul>
                        <li>Load photos from device library</li>
                        <li>Display in a 3-column grid</li>
                        <li>Long-press to select for deletion</li>
                        <li>Show delete confirmation before removing</li>
                    </ul>

                    <details>
                        <summary>Show Hint</summary>
                        <p>Use <code>MediaLibrary.getAssetsAsync()</code> for loading. Track selected photos in state. Use <code>Pressable</code> with <code>onLongPress</code> for selection. Call <code>MediaLibrary.deleteAssetsAsync()</code> after confirmation.</p>
                    </details>

                    <details>
                        <summary>Show Solution</summary>
                        <pre><code>import { useState, useEffect } from 'react';
import { View, FlatList, Image, Pressable, Text, Alert, StyleSheet } from 'react-native';
import * as MediaLibrary from 'expo-media-library';

export default function PhotoGalleryWithDelete() {
  const [photos, setPhotos] = useState&lt;MediaLibrary.Asset[]&gt;([]);
  const [selected, setSelected] = useState&lt;Set&lt;string&gt;&gt;(new Set());
  const [permission, requestPermission] = MediaLibrary.usePermissions();
  const [isSelecting, setIsSelecting] = useState(false);

  const loadPhotos = async () => {
    const { assets } = await MediaLibrary.getAssetsAsync({
      first: 100,
      mediaType: 'photo',
      sortBy: [MediaLibrary.SortBy.creationTime],
    });
    setPhotos(assets);
  };

  useEffect(() => {
    if (permission?.granted) loadPhotos();
  }, [permission?.granted]);

  if (!permission?.granted) {
    return (
      &lt;View style={styles.center}&gt;
        &lt;Pressable style={styles.button} onPress={requestPermission}&gt;
          &lt;Text style={styles.buttonText}&gt;Grant Permission&lt;/Text&gt;
        &lt;/Pressable&gt;
      &lt;/View&gt;
    );
  }

  const toggleSelect = (id: string) => {
    setSelected(prev => {
      const next = new Set(prev);
      if (next.has(id)) {
        next.delete(id);
        if (next.size === 0) setIsSelecting(false);
      } else {
        next.add(id);
      }
      return next;
    });
  };

  const startSelecting = (id: string) => {
    setIsSelecting(true);
    setSelected(new Set([id]));
  };

  const deleteSelected = () => {
    Alert.alert(
      'Delete Photos',
      `Delete ${selected.size} photo(s)?`,
      [
        { text: 'Cancel', style: 'cancel' },
        {
          text: 'Delete',
          style: 'destructive',
          onPress: async () => {
            await MediaLibrary.deleteAssetsAsync([...selected]);
            setSelected(new Set());
            setIsSelecting(false);
            loadPhotos();
          },
        },
      ]
    );
  };

  const cancelSelection = () => {
    setSelected(new Set());
    setIsSelecting(false);
  };

  return (
    &lt;View style={styles.container}&gt;
      {isSelecting && (
        &lt;View style={styles.toolbar}&gt;
          &lt;Pressable onPress={cancelSelection}&gt;
            &lt;Text style={styles.toolbarText}&gt;Cancel&lt;/Text&gt;
          &lt;/Pressable&gt;
          &lt;Text style={styles.toolbarText}&gt;{selected.size} selected&lt;/Text&gt;
          &lt;Pressable onPress={deleteSelected}&gt;
            &lt;Text style={[styles.toolbarText, styles.deleteText]}&gt;Delete&lt;/Text&gt;
          &lt;/Pressable&gt;
        &lt;/View&gt;
      )}
      
      &lt;FlatList
        data={photos}
        numColumns={3}
        keyExtractor={(item) => item.id}
        renderItem={({ item }) => (
          &lt;Pressable
            style={styles.photoContainer}
            onPress={() => isSelecting && toggleSelect(item.id)}
            onLongPress={() => !isSelecting && startSelecting(item.id)}
          &gt;
            &lt;Image source={{ uri: item.uri }} style={styles.photo} /&gt;
            {selected.has(item.id) && (
              &lt;View style={styles.selectedOverlay}&gt;
                &lt;Text style={styles.checkmark}&gt;‚úì&lt;/Text&gt;
              &lt;/View&gt;
            )}
          &lt;/Pressable&gt;
        )}
      /&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: { flex: 1 },
  center: { flex: 1, justifyContent: 'center', alignItems: 'center' },
  button: { backgroundColor: '#667eea', padding: 16, borderRadius: 8 },
  buttonText: { color: 'white', fontWeight: '600' },
  toolbar: { flexDirection: 'row', justifyContent: 'space-between', padding: 16, backgroundColor: '#f5f5f5' },
  toolbarText: { fontSize: 16, fontWeight: '600' },
  deleteText: { color: '#f44336' },
  photoContainer: { flex: 1/3, aspectRatio: 1, padding: 1 },
  photo: { flex: 1 },
  selectedOverlay: { ...StyleSheet.absoluteFillObject, backgroundColor: 'rgba(102,126,234,0.5)', justifyContent: 'center', alignItems: 'center' },
  checkmark: { fontSize: 32, color: 'white' },
});</code></pre>
                    </details>
                </div>
            </section>

            <!-- Summary -->
            <section id="summary">
                <h2>Summary</h2>

                <p>You now have a complete toolkit for working with camera and media in React Native. Choose the right tool for your needs and remember to handle permissions properly.</p>

                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h4 style="color: white;">üéØ Key Takeaways</h4>
                    <ul style="color: white;">
                        <li><strong>expo-image-picker</strong> for quick photo capture and library selection</li>
                        <li><strong>expo-camera</strong> for custom camera UI with full control</li>
                        <li><strong>expo-media-library</strong> for saving to gallery and browsing media</li>
                        <li><strong>CameraView</strong> uses refs for takePictureAsync and recordAsync</li>
                        <li><strong>Video recording</strong> requires microphone permission too</li>
                        <li><strong>Flash, zoom, and facing</strong> are controlled via props</li>
                        <li><strong>Barcode scanning</strong> is built into CameraView</li>
                        <li><strong>Always handle permissions</strong> before accessing camera features</li>
                    </ul>
                </div>

                <p>In the next lesson, we'll explore location services‚Äîgetting the user's position, tracking movement, and working with maps.</p>
            </section>

            <!-- Lesson Navigation -->
            <div class="lesson-nav">
                <a href="m08_l01_permissions.html" class="prev-link">‚Üê Previous: Permissions</a>
                <a href="index.html" class="home-link">üè† Home</a>
                <a href="m08_l03_location_services.html" class="next-link">Next: Location Services ‚Üí</a>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 React Native & Expo Course. All rights reserved.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/clipboard.js"></script>
    <script src="js/course-enhancements.js"></script>
</body>
</html>
