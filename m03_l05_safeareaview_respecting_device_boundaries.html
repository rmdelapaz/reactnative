<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn how to use SafeAreaView and safe area insets to respect device boundaries like notches, status bars, and home indicators">
    <meta name="author" content="React Native Course">
    <title>SafeAreaView: Respecting Device Boundaries - React Native & Expo Course</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#e3f2fd',
                primaryTextColor: '#1565c0',
                primaryBorderColor: '#1976d2',
                lineColor: '#64b5f6'
            }
        });
    </script>
</head>
<body>
    <!-- Skip to main content for accessibility -->
    <a href="#main-content" class="skip-to-main">Skip to main content</a>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="index.html" class="nav-logo">üì± RN & Expo Course</a>
            <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-expanded="false" aria-controls="nav-links">
                ‚ò∞
            </button>
            <div class="nav-links" id="nav-links">
                <a href="index.html">Home</a>
                <a href="index.html#modules">Modules</a>
                <button id="theme-toggle" aria-label="Toggle theme">üåô</button>
            </div>
        </div>
    </nav>

    <!-- Breadcrumb -->
    <nav class="breadcrumb" aria-label="Breadcrumb">
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="index.html#modules">Module 3</a></li>
            <li aria-current="page">Lesson 3.5: SafeAreaView ‚Äî Respecting Device Boundaries</li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main id="main-content">
        <div class="container">
            <!-- Lesson Header -->
            <header>
                <h1>üõ°Ô∏è SafeAreaView: Respecting Device Boundaries</h1>
                <p class="lead" style="text-align: center; font-size: 1.1rem; margin-bottom: 2rem;">
                    Ensuring your content avoids notches, status bars, and home indicators
                </p>
                
                <!-- Learning objectives -->
                <div class="card">
                    <h2>üéØ Learning Objectives</h2>
                    <p>By the end of this lesson, you will be able to:</p>
                    <ul>
                        <li>Understand what safe areas are and why they matter</li>
                        <li>Use React Native's built-in SafeAreaView component</li>
                        <li>Work with react-native-safe-area-context for more control</li>
                        <li>Apply safe area insets selectively to specific edges</li>
                        <li>Handle safe areas in different screen contexts (modals, tabs)</li>
                        <li>Create layouts that work across all device types</li>
                    </ul>
                    <p><strong>‚è±Ô∏è Estimated Time:</strong> 20-30 minutes</p>
                </div>
            </header>

            <!-- Table of Contents -->
            <details class="card" open style="position: sticky; top: 80px; z-index: 100; background: var(--secondary-color); box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 2rem;">
                <summary style="cursor: pointer; font-weight: bold; padding: 0.5rem 1rem; user-select: none;">
                    üìë In This Lesson
                </summary>
                <nav aria-label="Table of Contents" style="padding: 0 1rem 1rem 1rem;">
                    <ol>
                        <li><a href="#what-are-safe-areas">What Are Safe Areas?</a></li>
                        <li><a href="#basic-safeareaview">Basic SafeAreaView</a></li>
                        <li><a href="#safe-area-context">react-native-safe-area-context</a></li>
                        <li><a href="#selective-insets">Selective Insets</a></li>
                        <li><a href="#common-patterns">Common Patterns</a></li>
                        <li><a href="#exercises">Hands-On Exercises</a></li>
                        <li><a href="#summary">Summary</a></li>
                    </ol>
                </nav>
            </details>

            <!-- Section 1: What Are Safe Areas -->
            <section id="what-are-safe-areas" class="lesson-section">
                <h2>What Are Safe Areas?</h2>
                
                <p>Modern mobile devices have various hardware elements that intrude into the screen area: notches, Dynamic Island, rounded corners, status bars, and home indicators. The <strong>safe area</strong> is the portion of the screen where your content won't be obscured by these elements.</p>

                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h4 style="color: white;">üìñ Key Concept</h4>
                    <p style="color: white;">Safe areas define the region of the screen that's guaranteed to be fully visible and interactive, avoiding hardware obstructions and system UI elements.</p>
                </div>

                <!-- SVG: Safe area visualization -->
                <svg viewBox="0 0 700 400" style="width: 100%; max-width: 700px; margin: 2rem auto; display: block;">
                    <!-- Background -->
                    <rect x="0" y="0" width="700" height="400" fill="#f8f9fa" rx="10"/>
                    
                    <!-- Title -->
                    <text x="350" y="30" text-anchor="middle" font-weight="bold" font-size="16" fill="#333">Device Safe Areas</text>
                    
                    <!-- iPhone with notch -->
                    <g transform="translate(100, 50)">
                        <text x="75" y="0" text-anchor="middle" font-size="12" fill="#666">iPhone (Notch)</text>
                        
                        <!-- Phone frame -->
                        <rect x="0" y="15" width="150" height="320" rx="20" fill="#1a1a2e" stroke="#333" stroke-width="2"/>
                        
                        <!-- Screen -->
                        <rect x="8" y="23" width="134" height="304" rx="16" fill="#e3f2fd"/>
                        
                        <!-- Notch -->
                        <path d="M45,23 L45,38 Q45,48 55,48 L95,48 Q105,48 105,38 L105,23" fill="#1a1a2e"/>
                        
                        <!-- Safe area -->
                        <rect x="8" y="55" width="134" height="238" fill="#4caf50" opacity="0.3"/>
                        <text x="75" y="175" text-anchor="middle" font-size="11" fill="#2e7d32" font-weight="bold">Safe Area</text>
                        
                        <!-- Top inset indicator -->
                        <line x1="8" y1="55" x2="142" y2="55" stroke="#f44336" stroke-width="2" stroke-dasharray="4"/>
                        <text x="75" y="45" text-anchor="middle" font-size="9" fill="#f44336">Top Inset (~47px)</text>
                        
                        <!-- Bottom inset indicator -->
                        <line x1="8" y1="293" x2="142" y2="293" stroke="#f44336" stroke-width="2" stroke-dasharray="4"/>
                        <text x="75" y="310" text-anchor="middle" font-size="9" fill="#f44336">Bottom Inset (~34px)</text>
                        
                        <!-- Home indicator -->
                        <rect x="50" y="315" width="50" height="5" rx="2" fill="#666"/>
                    </g>
                    
                    <!-- iPhone with Dynamic Island -->
                    <g transform="translate(280, 50)">
                        <text x="75" y="0" text-anchor="middle" font-size="12" fill="#666">iPhone (Dynamic Island)</text>
                        
                        <!-- Phone frame -->
                        <rect x="0" y="15" width="150" height="320" rx="20" fill="#1a1a2e" stroke="#333" stroke-width="2"/>
                        
                        <!-- Screen -->
                        <rect x="8" y="23" width="134" height="304" rx="16" fill="#e3f2fd"/>
                        
                        <!-- Dynamic Island -->
                        <rect x="45" y="30" width="60" height="20" rx="10" fill="#1a1a2e"/>
                        
                        <!-- Safe area -->
                        <rect x="8" y="60" width="134" height="233" fill="#4caf50" opacity="0.3"/>
                        <text x="75" y="175" text-anchor="middle" font-size="11" fill="#2e7d32" font-weight="bold">Safe Area</text>
                        
                        <!-- Top inset -->
                        <line x1="8" y1="60" x2="142" y2="60" stroke="#f44336" stroke-width="2" stroke-dasharray="4"/>
                        <text x="75" y="53" text-anchor="middle" font-size="9" fill="#f44336">Top Inset (~59px)</text>
                        
                        <!-- Bottom inset -->
                        <line x1="8" y1="293" x2="142" y2="293" stroke="#f44336" stroke-width="2" stroke-dasharray="4"/>
                        
                        <!-- Home indicator -->
                        <rect x="50" y="315" width="50" height="5" rx="2" fill="#666"/>
                    </g>
                    
                    <!-- Android phone -->
                    <g transform="translate(460, 50)">
                        <text x="75" y="0" text-anchor="middle" font-size="12" fill="#666">Android (Status Bar)</text>
                        
                        <!-- Phone frame -->
                        <rect x="0" y="15" width="150" height="320" rx="15" fill="#1a1a2e" stroke="#333" stroke-width="2"/>
                        
                        <!-- Screen -->
                        <rect x="8" y="23" width="134" height="304" rx="10" fill="#e3f2fd"/>
                        
                        <!-- Status bar area -->
                        <rect x="8" y="23" width="134" height="24" fill="#333"/>
                        <text x="75" y="39" text-anchor="middle" font-size="8" fill="#fff">9:41      üì∂ üîã</text>
                        
                        <!-- Safe area -->
                        <rect x="8" y="47" width="134" height="280" fill="#4caf50" opacity="0.3"/>
                        <text x="75" y="180" text-anchor="middle" font-size="11" fill="#2e7d32" font-weight="bold">Safe Area</text>
                        
                        <!-- Top inset -->
                        <line x1="8" y1="47" x2="142" y2="47" stroke="#f44336" stroke-width="2" stroke-dasharray="4"/>
                        <text x="75" y="60" text-anchor="middle" font-size="9" fill="#f44336">Top Inset (~24px)</text>
                        
                        <!-- Navigation hint -->
                        <text x="75" y="310" text-anchor="middle" font-size="8" fill="#999">Nav bar may add bottom inset</text>
                    </g>
                </svg>
                <p class="caption"><em>Different devices have different safe area insets based on their hardware</em></p>

                <h3>The Problem Without Safe Areas</h3>

                <pre><code class="language-tsx">// ‚ùå Content hidden behind notch and home indicator
export default function App() {
  return (
    &lt;View style={{ flex: 1 }}&gt;
      &lt;Text style={{ fontSize: 24 }}&gt;Welcome!&lt;/Text&gt;
      {/* This text might be hidden behind the notch! */}
    &lt;/View&gt;
  );
}</code></pre>

                <h3>Why This Matters</h3>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin: 1.5rem 0;">
                    <div class="card">
                        <h4>üì± Device Variety</h4>
                        <p>iPhones have notches or Dynamic Island. Some Android phones have camera punch-holes. Insets vary by device.</p>
                    </div>
                    <div class="card">
                        <h4>üîÑ Orientation Changes</h4>
                        <p>Safe areas change when rotating between portrait and landscape modes.</p>
                    </div>
                    <div class="card">
                        <h4>üéØ Touch Targets</h4>
                        <p>Buttons near edges might be unreachable if they're under the home indicator area.</p>
                    </div>
                    <div class="card">
                        <h4>üëÅÔ∏è Content Visibility</h4>
                        <p>Important text or images shouldn't be obscured by hardware elements.</p>
                    </div>
                </div>

            </section>

            <!-- Section 2: Basic SafeAreaView -->
            <section id="basic-safeareaview" class="lesson-section">
                <h2>Basic SafeAreaView</h2>

                <p>React Native includes a built-in <code>SafeAreaView</code> component that automatically adds padding to avoid device boundaries.</p>

                <h3>Simple Usage</h3>

                <pre><code class="language-tsx">import { SafeAreaView, View, Text, StyleSheet } from 'react-native';

export default function App() {
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;Text style={styles.title}&gt;Welcome!&lt;/Text&gt;
      &lt;Text&gt;This content respects the safe area.&lt;/Text&gt;
    &lt;/SafeAreaView&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff',
  },
  title: {
    fontSize: 24,
    fontWeight: 'bold',
  },
});</code></pre>

                <div class="card" style="background-color: #fff3cd; border-left: 4px solid #ffc107;">
                    <h4>‚ö†Ô∏è Limitations of Built-in SafeAreaView</h4>
                    <ul>
                        <li><strong>iOS only</strong> ‚Äî On Android, it behaves like a regular View</li>
                        <li><strong>All-or-nothing</strong> ‚Äî Can't selectively apply insets to specific edges</li>
                        <li><strong>No access to inset values</strong> ‚Äî Can't use the numbers for calculations</li>
                    </ul>
                    <p>For most apps, you'll want to use <code>react-native-safe-area-context</code> instead.</p>
                </div>

                <h3>Typical App Structure</h3>

                <pre><code class="language-tsx">// Basic structure with SafeAreaView at root
import { SafeAreaView, ScrollView, View, Text } from 'react-native';

export default function HomeScreen() {
  return (
    &lt;SafeAreaView style={{ flex: 1, backgroundColor: '#f5f5f5' }}&gt;
      {/* Header */}
      &lt;View style={styles.header}&gt;
        &lt;Text style={styles.headerTitle}&gt;My App&lt;/Text&gt;
      &lt;/View&gt;
      
      {/* Scrollable Content */}
      &lt;ScrollView contentContainerStyle={styles.content}&gt;
        {/* Your content here */}
      &lt;/ScrollView&gt;
      
      {/* Footer/Tab Bar would go here */}
    &lt;/SafeAreaView&gt;
  );
}</code></pre>

            </section>

            <!-- Section 3: react-native-safe-area-context -->
            <section id="safe-area-context" class="lesson-section">
                <h2>react-native-safe-area-context</h2>

                <p>The <code>react-native-safe-area-context</code> library is the recommended way to handle safe areas. It works on both iOS and Android, provides access to inset values, and offers more control.</p>

                <h3>Installation</h3>

                <pre><code class="language-bash"># With Expo
npx expo install react-native-safe-area-context

# With bare React Native
npm install react-native-safe-area-context
# Then run pod install for iOS</code></pre>

                <h3>Setup with SafeAreaProvider</h3>

                <p>Wrap your app with <code>SafeAreaProvider</code> at the root:</p>

                <pre><code class="language-tsx">// App.tsx
import { SafeAreaProvider } from 'react-native-safe-area-context';

export default function App() {
  return (
    &lt;SafeAreaProvider&gt;
      &lt;Navigation /&gt;
    &lt;/SafeAreaProvider&gt;
  );
}</code></pre>

                <div class="card" style="background: #e8f5e9; border-left: 4px solid #4CAF50;">
                    <h4>‚úÖ Expo Projects</h4>
                    <p>If you're using Expo Router, the <code>SafeAreaProvider</code> is already set up for you! You can use the safe area hooks and components directly.</p>
                </div>

                <h3>SafeAreaView from the Library</h3>

                <pre><code class="language-tsx">import { SafeAreaView } from 'react-native-safe-area-context';

function HomeScreen() {
  return (
    &lt;SafeAreaView style={{ flex: 1 }}&gt;
      {/* Content is automatically padded on all edges */}
      &lt;Text&gt;Safe content&lt;/Text&gt;
    &lt;/SafeAreaView&gt;
  );
}</code></pre>

                <h3>Using the useSafeAreaInsets Hook</h3>

                <p>For more control, use the <code>useSafeAreaInsets</code> hook to get the actual inset values:</p>

                <pre><code class="language-tsx">import { View, Text, StyleSheet } from 'react-native';
import { useSafeAreaInsets } from 'react-native-safe-area-context';

function CustomHeader() {
  const insets = useSafeAreaInsets();
  
  return (
    &lt;View style={[
      styles.header,
      { paddingTop: insets.top + 10 }  // Safe area + extra padding
    ]}&gt;
      &lt;Text style={styles.title}&gt;My App&lt;/Text&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  header: {
    backgroundColor: '#2196F3',
    paddingHorizontal: 16,
    paddingBottom: 10,
  },
  title: {
    color: 'white',
    fontSize: 20,
    fontWeight: 'bold',
  },
});</code></pre>

                <h3>Inset Values</h3>

                <p>The <code>useSafeAreaInsets</code> hook returns an object with four values:</p>

                <pre><code class="language-tsx">const insets = useSafeAreaInsets();

// insets = {
//   top: 47,     // Status bar / notch
//   right: 0,    // Usually 0 in portrait
//   bottom: 34,  // Home indicator
//   left: 0,     // Usually 0 in portrait
// }

// In landscape, left/right might have values for notch</code></pre>

                <!-- SVG: Insets diagram -->
                <svg viewBox="0 0 400 320" style="width: 100%; max-width: 400px; margin: 2rem auto; display: block;">
                    <!-- Background -->
                    <rect x="0" y="0" width="400" height="320" fill="#f8f9fa" rx="10"/>
                    
                    <!-- Phone outline -->
                    <rect x="125" y="30" width="150" height="260" rx="20" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
                    
                    <!-- Top inset -->
                    <rect x="125" y="30" width="150" height="40" fill="#ffcdd2" opacity="0.7"/>
                    <text x="200" y="55" text-anchor="middle" font-size="11" fill="#c62828">insets.top</text>
                    
                    <!-- Bottom inset -->
                    <rect x="125" y="255" width="150" height="35" fill="#ffcdd2" opacity="0.7"/>
                    <text x="200" y="278" text-anchor="middle" font-size="11" fill="#c62828">insets.bottom</text>
                    
                    <!-- Left inset (small for landscape indication) -->
                    <rect x="125" y="70" width="15" height="185" fill="#c8e6c9" opacity="0.7"/>
                    <text x="90" y="160" text-anchor="middle" font-size="10" fill="#2e7d32" transform="rotate(-90, 90, 160)">insets.left</text>
                    
                    <!-- Right inset -->
                    <rect x="260" y="70" width="15" height="185" fill="#c8e6c9" opacity="0.7"/>
                    <text x="310" y="160" text-anchor="middle" font-size="10" fill="#2e7d32" transform="rotate(90, 310, 160)">insets.right</text>
                    
                    <!-- Safe area -->
                    <rect x="140" y="70" width="120" height="185" fill="#fff" stroke="#4caf50" stroke-width="2" stroke-dasharray="5"/>
                    <text x="200" y="165" text-anchor="middle" font-size="12" fill="#2e7d32" font-weight="bold">Safe Area</text>
                </svg>
                <p class="caption"><em>The four inset values define padding needed on each edge</em></p>

            </section>

            <!-- Section 4: Selective Insets -->
            <section id="selective-insets" class="lesson-section">
                <h2>Selective Insets</h2>

                <p>Often you don't want safe area padding on all edges. For example, a screen with a tab bar already handles the bottom inset, so you only need the top.</p>

                <h3>Using the edges Prop</h3>

                <pre><code class="language-tsx">import { SafeAreaView } from 'react-native-safe-area-context';

// Only apply safe area to top
&lt;SafeAreaView edges={['top']} style={{ flex: 1 }}&gt;
  {/* Content */}
&lt;/SafeAreaView&gt;

// Apply to top and bottom only
&lt;SafeAreaView edges={['top', 'bottom']} style={{ flex: 1 }}&gt;
  {/* Content */}
&lt;/SafeAreaView&gt;

// All edges except bottom (for screens with tab bar)
&lt;SafeAreaView edges={['top', 'left', 'right']} style={{ flex: 1 }}&gt;
  {/* Content */}
&lt;/SafeAreaView&gt;</code></pre>

                <h3>Common Edge Configurations</h3>

                <table>
                    <thead>
                        <tr>
                            <th>Screen Type</th>
                            <th>Edges</th>
                            <th>Reason</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Root screen (no nav)</td>
                            <td><code>['top', 'bottom', 'left', 'right']</code></td>
                            <td>Need all insets</td>
                        </tr>
                        <tr>
                            <td>Screen with header</td>
                            <td><code>['bottom']</code> or <code>[]</code></td>
                            <td>Header handles top</td>
                        </tr>
                        <tr>
                            <td>Screen with tab bar</td>
                            <td><code>['top']</code></td>
                            <td>Tab bar handles bottom</td>
                        </tr>
                        <tr>
                            <td>Screen with both</td>
                            <td><code>[]</code></td>
                            <td>Navigation handles both</td>
                        </tr>
                        <tr>
                            <td>Modal (full screen)</td>
                            <td><code>['top', 'bottom']</code></td>
                            <td>Usually portrait only</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Manual Inset Application</h3>

                <p>Using the hook gives you full control over which insets to apply and how:</p>

                <pre><code class="language-tsx">import { View, StyleSheet } from 'react-native';
import { useSafeAreaInsets } from 'react-native-safe-area-context';

function ScreenWithTabBar() {
  const insets = useSafeAreaInsets();

  return (
    &lt;View style={[
      styles.container,
      { 
        // Only apply top inset - tab bar handles bottom
        paddingTop: insets.top,
        // In landscape, apply left/right for notch
        paddingLeft: insets.left,
        paddingRight: insets.right,
      }
    ]}&gt;
      {/* Content */}
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff',
  },
});</code></pre>

                <h3>Insets in ScrollView</h3>

                <p>For ScrollView, you can apply insets to the content area instead of the container:</p>

                <pre><code class="language-tsx">import { ScrollView } from 'react-native';
import { useSafeAreaInsets } from 'react-native-safe-area-context';

function ScrollableScreen() {
  const insets = useSafeAreaInsets();

  return (
    &lt;ScrollView
      style={{ flex: 1 }}
      contentContainerStyle={{
        paddingTop: insets.top,
        paddingBottom: insets.bottom + 20,  // Extra padding at bottom
        paddingHorizontal: 16,
      }}
    &gt;
      {/* Scrollable content */}
    &lt;/ScrollView&gt;
  );
}</code></pre>

            </section>

            <!-- Section 5: Common Patterns -->
            <section id="common-patterns" class="lesson-section">
                <h2>Common Patterns</h2>

                <p>Let's look at real-world patterns for handling safe areas in different scenarios.</p>

                <h3>Full-Screen Background with Safe Content</h3>

                <p>When you want a background color or image to extend edge-to-edge, but content stays in the safe area:</p>

                <pre><code class="language-tsx">import { View, StyleSheet } from 'react-native';
import { useSafeAreaInsets } from 'react-native-safe-area-context';

function FullScreenWithSafeContent() {
  const insets = useSafeAreaInsets();

  return (
    &lt;View style={styles.container}&gt;
      {/* Background extends to edges */}
      
      &lt;View style={[
        styles.content,
        {
          paddingTop: insets.top,
          paddingBottom: insets.bottom,
          paddingLeft: insets.left,
          paddingRight: insets.right,
        }
      ]}&gt;
        {/* Content stays in safe area */}
        &lt;Text style={styles.title}&gt;Welcome&lt;/Text&gt;
      &lt;/View&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#667eea',  // Extends to all edges
  },
  content: {
    flex: 1,
  },
  title: {
    color: 'white',
    fontSize: 32,
  },
});</code></pre>

                <h3>Custom Header Component</h3>

                <pre><code class="language-tsx">import { View, Text, Pressable, StyleSheet } from 'react-native';
import { useSafeAreaInsets } from 'react-native-safe-area-context';

interface HeaderProps {
  title: string;
  onBack?: () => void;
}

function Header({ title, onBack }: HeaderProps) {
  const insets = useSafeAreaInsets();

  return (
    &lt;View style={[
      styles.header,
      { paddingTop: insets.top }
    ]}&gt;
      &lt;View style={styles.headerContent}&gt;
        {onBack && (
          &lt;Pressable onPress={onBack} style={styles.backButton}&gt;
            &lt;Text style={styles.backText}&gt;‚Üê Back&lt;/Text&gt;
          &lt;/Pressable&gt;
        )}
        &lt;Text style={styles.title}&gt;{title}&lt;/Text&gt;
        &lt;View style={styles.placeholder} /&gt;
      &lt;/View&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  header: {
    backgroundColor: '#2196F3',
  },
  headerContent: {
    flexDirection: 'row',
    alignItems: 'center',
    justifyContent: 'space-between',
    height: 56,
    paddingHorizontal: 16,
  },
  backButton: {
    width: 60,
  },
  backText: {
    color: 'white',
    fontSize: 16,
  },
  title: {
    color: 'white',
    fontSize: 18,
    fontWeight: 'bold',
  },
  placeholder: {
    width: 60,
  },
});</code></pre>

                <h3>Bottom Action Bar</h3>

                <pre><code class="language-tsx">import { View, Text, Pressable, StyleSheet } from 'react-native';
import { useSafeAreaInsets } from 'react-native-safe-area-context';

function BottomActionBar() {
  const insets = useSafeAreaInsets();

  return (
    &lt;View style={[
      styles.container,
      { paddingBottom: Math.max(insets.bottom, 16) }
    ]}&gt;
      &lt;Pressable style={styles.button}&gt;
        &lt;Text style={styles.buttonText}&gt;Add to Cart ‚Äî $99&lt;/Text&gt;
      &lt;/Pressable&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    backgroundColor: 'white',
    borderTopWidth: 1,
    borderTopColor: '#e0e0e0',
    paddingHorizontal: 16,
    paddingTop: 12,
  },
  button: {
    backgroundColor: '#2196F3',
    paddingVertical: 16,
    borderRadius: 12,
    alignItems: 'center',
  },
  buttonText: {
    color: 'white',
    fontSize: 16,
    fontWeight: 'bold',
  },
});</code></pre>

                <div class="card" style="background: #e3f2fd; border-left: 4px solid #2196F3;">
                    <h4>üí° Math.max for Minimum Padding</h4>
                    <p>Use <code>Math.max(insets.bottom, 16)</code> to ensure at least some padding even on devices with no bottom inset. This prevents content from sitting flush against the edge.</p>
                </div>

                <h3>Modal Screens</h3>

                <p>Modals often need their own safe area handling:</p>

                <pre><code class="language-tsx">import { View, Modal, StyleSheet } from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';

function FullScreenModal({ visible, onClose, children }) {
  return (
    &lt;Modal
      visible={visible}
      animationType="slide"
      presentationStyle="fullScreen"
    &gt;
      &lt;SafeAreaView style={styles.modal} edges={['top', 'bottom']}&gt;
        &lt;View style={styles.header}&gt;
          &lt;Pressable onPress={onClose}&gt;
            &lt;Text&gt;Close&lt;/Text&gt;
          &lt;/Pressable&gt;
        &lt;/View&gt;
        &lt;View style={styles.content}&gt;
          {children}
        &lt;/View&gt;
      &lt;/SafeAreaView&gt;
    &lt;/Modal&gt;
  );
}

const styles = StyleSheet.create({
  modal: {
    flex: 1,
    backgroundColor: 'white',
  },
  header: {
    padding: 16,
    borderBottomWidth: 1,
    borderBottomColor: '#e0e0e0',
  },
  content: {
    flex: 1,
  },
});</code></pre>

                <h3>Landscape Considerations</h3>

                <p>In landscape mode, the notch may be on the left or right side:</p>

                <pre><code class="language-tsx">import { View, StyleSheet, useWindowDimensions } from 'react-native';
import { useSafeAreaInsets } from 'react-native-safe-area-context';

function LandscapeAwareScreen() {
  const insets = useSafeAreaInsets();
  const { width, height } = useWindowDimensions();
  const isLandscape = width > height;

  return (
    &lt;View style={[
      styles.container,
      {
        paddingTop: insets.top,
        paddingBottom: insets.bottom,
        // In landscape, notch creates left or right inset
        paddingLeft: Math.max(insets.left, 16),
        paddingRight: Math.max(insets.right, 16),
      }
    ]}&gt;
      {/* Content */}
    &lt;/View&gt;
  );
}</code></pre>

                <!-- Mermaid: Decision diagram -->
                <pre class="mermaid">
flowchart TD
    A[Need Safe Area?] --> B{Using Navigation<br/>React Navigation / Expo Router?}
    B -->|Yes| C{Screen Type?}
    B -->|No| D[Wrap with SafeAreaView<br/>edges=all]
    
    C -->|Stack screen| E[Header handles top<br/>May need bottom for content]
    C -->|Tab screen| F[Tab bar handles bottom<br/>Header handles top]
    C -->|Modal| G[Usually need top + bottom<br/>Check presentationStyle]
    
    E --> H{Has scrollable content?}
    F --> H
    G --> H
    
    H -->|Yes| I[Apply insets to<br/>contentContainerStyle]
    H -->|No| J[Apply insets to<br/>container View]
    
    style D fill:#e8f5e9,stroke:#4caf50
    style I fill:#e3f2fd,stroke:#1976d2
    style J fill:#e3f2fd,stroke:#1976d2
                </pre>
                <p class="caption"><em>Decision tree for applying safe area insets in different contexts</em></p>

            </section>

            <!-- Section 6: Exercises -->
            <section id="exercises" class="lesson-section">
                <h2>Hands-On Exercises</h2>

                <p>Practice makes perfect! These exercises will help you master safe areas.</p>

                <h3>Exercise 1: Simple Safe Screen</h3>

                <div class="card">
                    <p><strong>Goal:</strong> Create a screen that displays content safely on any device.</p>
                    
                    <p><strong>Requirements:</strong></p>
                    <ul>
                        <li>Use react-native-safe-area-context's SafeAreaView</li>
                        <li>Display a title "Welcome" at the top</li>
                        <li>Display some body text below</li>
                        <li>Add a button at the bottom that stays above the home indicator</li>
                    </ul>

                    <details>
                        <summary>üí° Hint</summary>
                        <p>Use <code>flex: 1</code> on the SafeAreaView and <code>justifyContent: 'space-between'</code> to push the button to the bottom.</p>
                    </details>

                    <details>
                        <summary>‚úÖ Solution</summary>
                        <pre><code class="language-tsx">import { View, Text, Pressable, StyleSheet } from 'react-native';
import { SafeAreaView } from 'react-native-safe-area-context';

export default function SafeScreen() {
  return (
    &lt;SafeAreaView style={styles.container}&gt;
      &lt;View style={styles.content}&gt;
        &lt;View&gt;
          &lt;Text style={styles.title}&gt;Welcome&lt;/Text&gt;
          &lt;Text style={styles.body}&gt;
            This content is safely positioned away from the notch 
            and home indicator on all devices.
          &lt;/Text&gt;
        &lt;/View&gt;
        
        &lt;Pressable style={styles.button}&gt;
          &lt;Text style={styles.buttonText}&gt;Get Started&lt;/Text&gt;
        &lt;/Pressable&gt;
      &lt;/View&gt;
    &lt;/SafeAreaView&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f5f5f5',
  },
  content: {
    flex: 1,
    justifyContent: 'space-between',
    padding: 20,
  },
  title: {
    fontSize: 32,
    fontWeight: 'bold',
    color: '#333',
    marginBottom: 12,
  },
  body: {
    fontSize: 16,
    color: '#666',
    lineHeight: 24,
  },
  button: {
    backgroundColor: '#2196F3',
    paddingVertical: 16,
    borderRadius: 12,
    alignItems: 'center',
  },
  buttonText: {
    color: 'white',
    fontSize: 16,
    fontWeight: 'bold',
  },
});</code></pre>
                    </details>
                </div>

                <h3>Exercise 2: Custom Header with Insets</h3>

                <div class="card">
                    <p><strong>Goal:</strong> Create a custom header that uses useSafeAreaInsets.</p>
                    
                    <p><strong>Requirements:</strong></p>
                    <ul>
                        <li>Header with colored background that extends under the status bar</li>
                        <li>Title text positioned below the status bar area</li>
                        <li>Use useSafeAreaInsets to get the correct top padding</li>
                        <li>Fixed height content area (56px) plus the inset</li>
                    </ul>

                    <details>
                        <summary>üí° Hint</summary>
                        <p>Apply <code>paddingTop: insets.top</code> to the header container, then add your fixed-height content below that.</p>
                    </details>

                    <details>
                        <summary>‚úÖ Solution</summary>
                        <pre><code class="language-tsx">import { View, Text, StyleSheet } from 'react-native';
import { useSafeAreaInsets } from 'react-native-safe-area-context';

export default function CustomHeaderScreen() {
  const insets = useSafeAreaInsets();

  return (
    &lt;View style={styles.screen}&gt;
      {/* Header with safe area */}
      &lt;View style={[
        styles.header,
        { paddingTop: insets.top }
      ]}&gt;
        &lt;View style={styles.headerContent}&gt;
          &lt;Text style={styles.headerTitle}&gt;My Custom Header&lt;/Text&gt;
        &lt;/View&gt;
      &lt;/View&gt;
      
      {/* Body content */}
      &lt;View style={styles.body}&gt;
        &lt;Text style={styles.bodyText}&gt;
          The header background extends under the status bar,
          but the title is positioned safely below it.
        &lt;/Text&gt;
        &lt;Text style={styles.insetInfo}&gt;
          Top inset: {insets.top}px
        &lt;/Text&gt;
      &lt;/View&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  screen: {
    flex: 1,
    backgroundColor: '#fff',
  },
  header: {
    backgroundColor: '#667eea',
  },
  headerContent: {
    height: 56,
    justifyContent: 'center',
    alignItems: 'center',
  },
  headerTitle: {
    color: 'white',
    fontSize: 18,
    fontWeight: 'bold',
  },
  body: {
    flex: 1,
    padding: 20,
  },
  bodyText: {
    fontSize: 16,
    color: '#333',
    lineHeight: 24,
    marginBottom: 20,
  },
  insetInfo: {
    fontSize: 14,
    color: '#666',
    fontStyle: 'italic',
  },
});</code></pre>
                    </details>
                </div>

                <h3>Exercise 3: Bottom Sheet with Safe Bottom</h3>

                <div class="card">
                    <p><strong>Goal:</strong> Create a simulated bottom sheet that respects the home indicator.</p>
                    
                    <p><strong>Requirements:</strong></p>
                    <ul>
                        <li>A View positioned at the bottom of the screen</li>
                        <li>Content area with a title and some options</li>
                        <li>Bottom padding that accounts for the home indicator</li>
                        <li>Use Math.max to ensure minimum padding even without inset</li>
                    </ul>

                    <details>
                        <summary>üí° Hint</summary>
                        <p>Use absolute positioning to place the sheet at the bottom, and apply <code>Math.max(insets.bottom, 20)</code> for the bottom padding.</p>
                    </details>

                    <details>
                        <summary>‚úÖ Solution</summary>
                        <pre><code class="language-tsx">import { View, Text, Pressable, StyleSheet } from 'react-native';
import { useSafeAreaInsets } from 'react-native-safe-area-context';

export default function BottomSheetDemo() {
  const insets = useSafeAreaInsets();

  return (
    &lt;View style={styles.container}&gt;
      &lt;Text style={styles.backgroundText}&gt;Main Content Area&lt;/Text&gt;
      
      {/* Bottom Sheet */}
      &lt;View style={[
        styles.bottomSheet,
        { paddingBottom: Math.max(insets.bottom, 20) }
      ]}&gt;
        &lt;View style={styles.handle} /&gt;
        &lt;Text style={styles.sheetTitle}&gt;Quick Actions&lt;/Text&gt;
        
        {['Share', 'Save', 'Edit', 'Delete'].map((action) => (
          &lt;Pressable key={action} style={styles.option}&gt;
            &lt;Text style={styles.optionText}&gt;{action}&lt;/Text&gt;
          &lt;/Pressable&gt;
        ))}
      &lt;/View&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f0f0f0',
  },
  backgroundText: {
    textAlign: 'center',
    marginTop: 100,
    fontSize: 18,
    color: '#999',
  },
  bottomSheet: {
    position: 'absolute',
    bottom: 0,
    left: 0,
    right: 0,
    backgroundColor: 'white',
    borderTopLeftRadius: 20,
    borderTopRightRadius: 20,
    paddingTop: 12,
    paddingHorizontal: 20,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: -2 },
    shadowOpacity: 0.1,
    shadowRadius: 10,
    elevation: 10,
  },
  handle: {
    width: 40,
    height: 4,
    backgroundColor: '#ddd',
    borderRadius: 2,
    alignSelf: 'center',
    marginBottom: 16,
  },
  sheetTitle: {
    fontSize: 18,
    fontWeight: 'bold',
    marginBottom: 16,
    color: '#333',
  },
  option: {
    paddingVertical: 16,
    borderBottomWidth: 1,
    borderBottomColor: '#f0f0f0',
  },
  optionText: {
    fontSize: 16,
    color: '#333',
  },
});</code></pre>
                    </details>
                </div>

                <h3>Challenge: Adaptive Layout</h3>

                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h4 style="color: white;">üèÜ Bonus Challenge</h4>
                    <p style="color: white;"><strong>Goal:</strong> Create a layout that adapts to both portrait and landscape orientations with proper safe area handling.</p>
                    
                    <p style="color: white;"><strong>Features:</strong></p>
                    <ul style="color: white;">
                        <li>Display different layouts for portrait vs landscape</li>
                        <li>Show the current inset values on screen</li>
                        <li>Apply insets correctly in both orientations</li>
                        <li>Use useWindowDimensions to detect orientation</li>
                    </ul>
                    
                    <details>
                        <summary style="color: white; cursor: pointer;">‚úÖ Solution</summary>
                        <div style="background: rgba(0,0,0,0.2); padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                        <pre><code class="language-tsx">import { View, Text, StyleSheet, useWindowDimensions } from 'react-native';
import { useSafeAreaInsets } from 'react-native-safe-area-context';

export default function AdaptiveLayout() {
  const insets = useSafeAreaInsets();
  const { width, height } = useWindowDimensions();
  const isLandscape = width > height;

  return (
    &lt;View style={[
      styles.container,
      {
        paddingTop: insets.top,
        paddingBottom: insets.bottom,
        paddingLeft: Math.max(insets.left, 16),
        paddingRight: Math.max(insets.right, 16),
      }
    ]}&gt;
      &lt;Text style={styles.title}&gt;
        {isLandscape ? 'üåÑ Landscape' : 'üì± Portrait'}
      &lt;/Text&gt;
      
      &lt;View style={[
        styles.infoBox,
        isLandscape && styles.infoBoxLandscape
      ]}&gt;
        &lt;Text style={styles.label}&gt;Safe Area Insets:&lt;/Text&gt;
        &lt;View style={[
          styles.insetGrid,
          isLandscape && styles.insetGridLandscape
        ]}&gt;
          &lt;View style={styles.insetItem}&gt;
            &lt;Text style={styles.insetLabel}&gt;Top&lt;/Text&gt;
            &lt;Text style={styles.insetValue}&gt;{insets.top}px&lt;/Text&gt;
          &lt;/View&gt;
          &lt;View style={styles.insetItem}&gt;
            &lt;Text style={styles.insetLabel}&gt;Right&lt;/Text&gt;
            &lt;Text style={styles.insetValue}&gt;{insets.right}px&lt;/Text&gt;
          &lt;/View&gt;
          &lt;View style={styles.insetItem}&gt;
            &lt;Text style={styles.insetLabel}&gt;Bottom&lt;/Text&gt;
            &lt;Text style={styles.insetValue}&gt;{insets.bottom}px&lt;/Text&gt;
          &lt;/View&gt;
          &lt;View style={styles.insetItem}&gt;
            &lt;Text style={styles.insetLabel}&gt;Left&lt;/Text&gt;
            &lt;Text style={styles.insetValue}&gt;{insets.left}px&lt;/Text&gt;
          &lt;/View&gt;
        &lt;/View&gt;
      &lt;/View&gt;
      
      &lt;Text style={styles.dimensions}&gt;
        Screen: {Math.round(width)} √ó {Math.round(height)}
      &lt;/Text&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#667eea',
  },
  title: {
    fontSize: 28,
    fontWeight: 'bold',
    color: 'white',
    textAlign: 'center',
    marginVertical: 20,
  },
  infoBox: {
    backgroundColor: 'rgba(255,255,255,0.2)',
    borderRadius: 16,
    padding: 20,
    margin: 16,
  },
  infoBoxLandscape: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  label: {
    color: 'white',
    fontSize: 16,
    fontWeight: '600',
    marginBottom: 16,
  },
  insetGrid: {
    flexDirection: 'row',
    flexWrap: 'wrap',
    justifyContent: 'space-between',
  },
  insetGridLandscape: {
    flex: 1,
    marginLeft: 20,
  },
  insetItem: {
    width: '48%',
    backgroundColor: 'rgba(255,255,255,0.2)',
    borderRadius: 8,
    padding: 12,
    marginBottom: 8,
    alignItems: 'center',
  },
  insetLabel: {
    color: 'rgba(255,255,255,0.8)',
    fontSize: 12,
    marginBottom: 4,
  },
  insetValue: {
    color: 'white',
    fontSize: 20,
    fontWeight: 'bold',
  },
  dimensions: {
    color: 'rgba(255,255,255,0.7)',
    textAlign: 'center',
    marginTop: 20,
  },
});</code></pre>
                        </div>
                    </details>
                </div>

            </section>

            <!-- Section 7: Summary -->
            <section id="summary" class="lesson-section">
                <h2>Summary</h2>
                
                <div class="card" style="background: #e8f5e9; border-left: 4px solid #4CAF50;">
                    <h3>üéâ Key Takeaways</h3>
                    <ul>
                        <li><strong>Safe areas protect content</strong> from notches, status bars, and home indicators</li>
                        <li><strong>Built-in SafeAreaView</strong> is iOS-only and limited in control</li>
                        <li><strong>react-native-safe-area-context</strong> is the recommended solution for cross-platform</li>
                        <li><strong>SafeAreaProvider</strong> must wrap your app (Expo Router includes it automatically)</li>
                        <li><strong>useSafeAreaInsets hook</strong> gives you the actual inset values for calculations</li>
                        <li><strong>edges prop</strong> lets you apply insets selectively (top, bottom, left, right)</li>
                        <li><strong>Math.max(insets.X, 16)</strong> ensures minimum padding even without insets</li>
                        <li><strong>Navigation libraries</strong> often handle safe areas ‚Äî don't double-apply!</li>
                    </ul>
                </div>
                
                <h3>Quick Reference</h3>

                <pre><code class="language-tsx">// Setup (App.tsx)
import { SafeAreaProvider } from 'react-native-safe-area-context';
&lt;SafeAreaProvider&gt;{children}&lt;/SafeAreaProvider&gt;

// Simple usage
import { SafeAreaView } from 'react-native-safe-area-context';
&lt;SafeAreaView style={{ flex: 1 }}&gt;{content}&lt;/SafeAreaView&gt;

// Selective edges
&lt;SafeAreaView edges={['top', 'left', 'right']}&gt;

// Hook for manual control
import { useSafeAreaInsets } from 'react-native-safe-area-context';
const insets = useSafeAreaInsets();
// insets.top, insets.right, insets.bottom, insets.left

// Common pattern
&lt;View style={{ 
  paddingTop: insets.top,
  paddingBottom: Math.max(insets.bottom, 16) 
}}&gt;</code></pre>

                <h3>üöÄ What's Next?</h3>
                <p>Now that you can properly position content on any device, we'll explore <strong>Pressable</strong> ‚Äî the modern way to handle touch interactions in React Native.</p>

                <!-- Encouragement Card -->
                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-align: center; padding: 2rem;">
                    <h3 style="color: white;">üõ°Ô∏è Safe Areas Mastered!</h3>
                    <p style="color: white;">Your apps will now look polished on every device ‚Äî from the oldest iPhone SE to the newest iPhone with Dynamic Island. No more content hiding behind notches!</p>
                </div>
            </section>

            <!-- Lesson Navigation -->
            <nav class="lesson-nav" aria-label="Lesson Navigation">
                <a href="m03_l04_scrollview_when_content_overflows.html" class="prev-lesson">‚Üê Previous: ScrollView ‚Äî When Content Overflows</a>
                <a href="index.html" class="home-link">üè† Course Home</a>
                <a href="m03_l06_pressable_handling_touch.html" class="next-lesson">Next: Pressable ‚Äî Handling Touch ‚Üí</a>
            </nav>
        </div>
    </main>

    <!-- Footer -->
    <footer style="background: var(--primary-color); color: white; padding: 2rem; text-align: center; margin-top: 4rem;">
        <p>&copy; 2025 React Native & Expo Mastery Course. All rights reserved.</p>
        <p style="margin-top: 0.5rem; opacity: 0.9;">Building the next generation of mobile developers.</p>
    </footer>

    <!-- JavaScript -->
    <script src="js/clipboard.js"></script>
    <script src="js/course-enhancements.js"></script>
</body>
</html>
