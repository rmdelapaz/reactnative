<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn testing fundamentals for React Native applications with Expo">
    <meta name="author" content="React Native & Expo Course">
    <title>Testing Fundamentals | Module 10: Testing and Quality Assurance | React Native & Expo Course</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="icon" type="image/png" href="favicon.png">
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
    </script>
</head>
<body>
    <a href="#main-content" class="skip-to-main">Skip to main content</a>
    <nav>
        <div class="nav-container">
            <a href="index.html" class="nav-logo">üì± RN Course</a>
            <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-expanded="false" aria-controls="nav-links">‚ò∞</button>
            <div class="nav-links" id="nav-links">
                <a href="index.html">Home</a>
                <a href="index.html#modules">Modules</a>
                <a href="index.html#appendices">Appendices</a>
                <button id="theme-toggle" aria-label="Toggle theme">üåô</button>
            </div>
        </div>
    </nav>
    <div class="breadcrumb">
        <div class="container">
            <a href="index.html">Home</a> &gt;
            <a href="index.html#modules">Modules</a> &gt;
            <a href="m10_l01_testing_fundamentals.html">Module 10</a> &gt;
            <span>Lesson 10.1</span>
        </div>
    </div>
    <main id="main-content">
        <div class="container">
            <header>
                <p class="module-tag">Module 10: Testing and Quality Assurance</p>
                <h1>Testing Fundamentals</h1>
                <p class="lesson-subtitle">Why we test, testing strategies, and setting up your testing environment</p>
            </header>
            <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                <h2 style="color: white; border: none; margin-top: 0;">üéØ Learning Objectives</h2>
                <ul style="color: white;">
                    <li>Understand why testing is essential for mobile development</li>
                    <li>Learn the different types of tests and when to use each</li>
                    <li>Set up Jest and React Native Testing Library</li>
                    <li>Write your first tests for React Native components</li>
                    <li>Understand the testing pyramid and coverage strategies</li>
                    <li>Configure testing for Expo projects</li>
                </ul>
            </div>
            <div class="toc-container">
                <details class="toc-details" open>
                    <summary>üìë Table of Contents</summary>
                    <ul class="toc-list">
                        <li><a href="#why-testing">Why Testing Matters</a></li>
                        <li><a href="#testing-types">Types of Tests</a></li>
                        <li><a href="#testing-pyramid">The Testing Pyramid</a></li>
                        <li><a href="#setup">Setting Up Testing</a></li>
                        <li><a href="#first-tests">Writing Your First Tests</a></li>
                        <li><a href="#test-structure">Test Structure and Organization</a></li>
                        <li><a href="#running-tests">Running Tests</a></li>
                        <li><a href="#best-practices">Testing Best Practices</a></li>
                        <li><a href="#exercises">Hands-On Exercises</a></li>
                        <li><a href="#summary">Summary</a></li>
                    </ul>
                </details>
            </div>
            <section id="why-testing">
                <h2>Why Testing Matters</h2>
                <p>Testing is not just about finding bugs‚Äîit's about building confidence in your code and enabling sustainable development. For mobile apps, testing is especially critical because:</p>
                <div class="svg-container" style="text-align: center; margin: 2rem 0;">
                    <svg viewBox="0 0 700 300" style="max-width: 100%; height: auto; font-family: system-ui, sans-serif;">
                        <rect width="700" height="300" fill="#f8f9fa"/>
                        <text x="350" y="25" text-anchor="middle" font-size="14" font-weight="bold" fill="#333">Benefits of Testing</text>
                        <rect x="30" y="50" width="145" height="100" fill="#4CAF50" stroke="#388E3C" stroke-width="2" rx="8"/>
                        <text x="102" y="85" text-anchor="middle" font-size="28">üêõ</text>
                        <text x="102" y="110" text-anchor="middle" font-size="10" font-weight="bold" fill="white">Catch Bugs Early</text>
                        <text x="102" y="125" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">Find issues before</text>
                        <text x="102" y="137" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">users do</text>
                        <rect x="195" y="50" width="145" height="100" fill="#2196F3" stroke="#1976D2" stroke-width="2" rx="8"/>
                        <text x="267" y="85" text-anchor="middle" font-size="28">üîß</text>
                        <text x="267" y="110" text-anchor="middle" font-size="10" font-weight="bold" fill="white">Refactor Safely</text>
                        <text x="267" y="125" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">Change code with</text>
                        <text x="267" y="137" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">confidence</text>
                        <rect x="360" y="50" width="145" height="100" fill="#FF9800" stroke="#F57C00" stroke-width="2" rx="8"/>
                        <text x="432" y="85" text-anchor="middle" font-size="28">üìù</text>
                        <text x="432" y="110" text-anchor="middle" font-size="10" font-weight="bold" fill="white">Document Behavior</text>
                        <text x="432" y="125" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">Tests show how</text>
                        <text x="432" y="137" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">code should work</text>
                        <rect x="525" y="50" width="145" height="100" fill="#9C27B0" stroke="#7B1FA2" stroke-width="2" rx="8"/>
                        <text x="597" y="85" text-anchor="middle" font-size="28">üöÄ</text>
                        <text x="597" y="110" text-anchor="middle" font-size="10" font-weight="bold" fill="white">Ship Faster</text>
                        <text x="597" y="125" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">Less manual testing,</text>
                        <text x="597" y="137" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">faster releases</text>
                        <rect x="112" y="170" width="145" height="100" fill="#00BCD4" stroke="#0097A7" stroke-width="2" rx="8"/>
                        <text x="184" y="205" text-anchor="middle" font-size="28">üí∞</text>
                        <text x="184" y="230" text-anchor="middle" font-size="10" font-weight="bold" fill="white">Reduce Costs</text>
                        <text x="184" y="245" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">Fix bugs before</text>
                        <text x="184" y="257" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">production is cheaper</text>
                        <rect x="277" y="170" width="145" height="100" fill="#E91E63" stroke="#C2185B" stroke-width="2" rx="8"/>
                        <text x="349" y="205" text-anchor="middle" font-size="28">üèóÔ∏è</text>
                        <text x="349" y="230" text-anchor="middle" font-size="10" font-weight="bold" fill="white">Better Design</text>
                        <text x="349" y="245" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">Testable code is</text>
                        <text x="349" y="257" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">often cleaner code</text>
                        <rect x="442" y="170" width="145" height="100" fill="#667eea" stroke="#5a67d8" stroke-width="2" rx="8"/>
                        <text x="514" y="205" text-anchor="middle" font-size="28">üë•</text>
                        <text x="514" y="230" text-anchor="middle" font-size="10" font-weight="bold" fill="white">Team Confidence</text>
                        <text x="514" y="245" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">New team members</text>
                        <text x="514" y="257" text-anchor="middle" font-size="8" fill="rgba(255,255,255,0.9)">can contribute safely</text>
                    </svg>
                </div>
                <h3>The Cost of Bugs</h3>
                <p>The later a bug is found, the more expensive it is to fix:</p>
                <div class="card">
                    <h4>üí∞ Bug Fix Cost by Stage</h4>
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f5f5f5;">
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Stage</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Relative Cost</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Example</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>During coding</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">1x</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Test catches typo immediately</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Code review</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">5x</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Colleague spots issue in PR</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>QA testing</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">10x</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Manual tester finds bug</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Production</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">100x+</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">User reports crash, hotfix needed</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="card" style="background: #e3f2fd; border-left: 4px solid #2196F3;">
                    <h4>üì± Mobile-Specific Testing Challenges</h4>
                    <ul>
                        <li><strong>App Store delays:</strong> Fixes take days to reach users</li>
                        <li><strong>Device fragmentation:</strong> Many screen sizes and OS versions</li>
                        <li><strong>Native bridges:</strong> JavaScript and native code must work together</li>
                        <li><strong>Offline scenarios:</strong> Apps must handle network issues gracefully</li>
                        <li><strong>User expectations:</strong> Mobile users expect polished experiences</li>
                    </ul>
                </div>
            </section>
            <section id="testing-types">
                <h2>Types of Tests</h2>
                <p>Different types of tests serve different purposes. Understanding when to use each type is crucial for an effective testing strategy.</p>
                <h3>Unit Tests</h3>
                <p>Unit tests verify that individual functions, hooks, or small pieces of logic work correctly in isolation.</p>
                <pre><code>// A simple utility function
function formatPrice(cents: number): string {
  return `$${(cents / 100).toFixed(2)}`;
}

// Unit test for the function
describe('formatPrice', () =&gt; {
  it('formats cents as dollars', () =&gt; {
    expect(formatPrice(999)).toBe('$9.99');
    expect(formatPrice(100)).toBe('$1.00');
    expect(formatPrice(0)).toBe('$0.00');
  });
});</code></pre>
                <div class="card" style="background: #e8f5e9; border-left: 4px solid #4CAF50;">
                    <h4>‚úÖ Unit Tests Are Best For:</h4>
                    <ul>
                        <li>Utility functions and helpers</li>
                        <li>Data transformations</li>
                        <li>Business logic</li>
                        <li>Custom hooks (logic portion)</li>
                        <li>State reducers</li>
                    </ul>
                </div>
                <h3>Component Tests</h3>
                <p>Component tests verify that React components render correctly and respond to user interactions as expected.</p>
                <pre><code>import { render, screen, fireEvent } from '@testing-library/react-native';
import Counter from './Counter';

describe('Counter', () =&gt; {
  it('displays initial count', () =&gt; {
    render(&lt;Counter initialValue={5} /&gt;);
    expect(screen.getByText('5')).toBeTruthy();
  });

  it('increments when plus button is pressed', () =&gt; {
    render(&lt;Counter initialValue={0} /&gt;);
    fireEvent.press(screen.getByText('+'));
    expect(screen.getByText('1')).toBeTruthy();
  });
});</code></pre>
                <div class="card" style="background: #e3f2fd; border-left: 4px solid #2196F3;">
                    <h4>üß© Component Tests Are Best For:</h4>
                    <ul>
                        <li>Rendering logic</li>
                        <li>User interactions (taps, inputs)</li>
                        <li>Conditional rendering</li>
                        <li>Props handling</li>
                        <li>State changes</li>
                    </ul>
                </div>
                <h3>Integration Tests</h3>
                <p>Integration tests verify that multiple components or systems work together correctly.</p>
                <pre><code>import { render, screen, fireEvent, waitFor } from '@testing-library/react-native';
import { NavigationContainer } from '@react-navigation/native';
import App from './App';

describe('Login Flow', () =&gt; {
  it('navigates to home after successful login', async () =&gt; {
    render(
      &lt;NavigationContainer&gt;
        &lt;App /&gt;
      &lt;/NavigationContainer&gt;
    );

    fireEvent.changeText(screen.getByPlaceholderText('Email'), 'test@example.com');
    fireEvent.changeText(screen.getByPlaceholderText('Password'), 'password123');
    fireEvent.press(screen.getByText('Login'));

    await waitFor(() =&gt; {
      expect(screen.getByText('Welcome!')).toBeTruthy();
    });
  });
});</code></pre>
                <div class="card" style="background: #fff3e0; border-left: 4px solid #FF9800;">
                    <h4>üîó Integration Tests Are Best For:</h4>
                    <ul>
                        <li>Navigation flows</li>
                        <li>Form submissions</li>
                        <li>Data fetching and display</li>
                        <li>Component interactions</li>
                        <li>State management across components</li>
                    </ul>
                </div>
                <h3>End-to-End (E2E) Tests</h3>
                <p>E2E tests verify the entire application from the user's perspective, running on real or simulated devices.</p>
                <pre><code># Using Maestro (declarative E2E testing)
# flow: login.yaml
appId: com.myapp
---
- launchApp
- tapOn: "Email"
- inputText: "test@example.com"
- tapOn: "Password"
- inputText: "password123"
- tapOn: "Login"
- assertVisible: "Welcome!"</code></pre>
                <div class="card" style="background: #fce4ec; border-left: 4px solid #E91E63;">
                    <h4>üéØ E2E Tests Are Best For:</h4>
                    <ul>
                        <li>Critical user journeys</li>
                        <li>Smoke tests before release</li>
                        <li>Cross-platform verification</li>
                        <li>Real device behavior</li>
                        <li>Native module integration</li>
                    </ul>
                </div>
            </section>
            <section id="testing-pyramid">
                <h2>The Testing Pyramid</h2>
                <p>The testing pyramid is a guide for balancing different types of tests. The goal is to have many fast, cheap unit tests and fewer slow, expensive E2E tests.</p>
                <div class="svg-container" style="text-align: center; margin: 2rem 0;">
                    <svg viewBox="0 0 500 350" style="max-width: 500px; height: auto; font-family: system-ui, sans-serif;">
                        <rect width="500" height="350" fill="#f8f9fa"/>
                        <polygon points="250,30 310,100 190,100" fill="#E91E63" stroke="#C2185B" stroke-width="2"/>
                        <text x="250" y="75" text-anchor="middle" font-size="11" font-weight="bold" fill="white">E2E</text>
                        <polygon points="190,100 310,100 370,180 130,180" fill="#FF9800" stroke="#F57C00" stroke-width="2"/>
                        <text x="250" y="150" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Integration</text>
                        <polygon points="130,180 370,180 430,280 70,280" fill="#4CAF50" stroke="#388E3C" stroke-width="2"/>
                        <text x="250" y="240" text-anchor="middle" font-size="14" font-weight="bold" fill="white">Unit Tests</text>
                        <text x="50" y="75" text-anchor="end" font-size="10" fill="#666">Slow</text>
                        <text x="50" y="90" text-anchor="end" font-size="10" fill="#666">Expensive</text>
                        <text x="50" y="105" text-anchor="end" font-size="10" fill="#666">Few</text>
                        <text x="50" y="240" text-anchor="end" font-size="10" fill="#666">Fast</text>
                        <text x="50" y="255" text-anchor="end" font-size="10" fill="#666">Cheap</text>
                        <text x="50" y="270" text-anchor="end" font-size="10" fill="#666">Many</text>
                        <text x="400" y="75" font-size="10" fill="#E91E63">~10% of tests</text>
                        <text x="400" y="150" font-size="10" fill="#FF9800">~20% of tests</text>
                        <text x="400" y="240" font-size="10" fill="#4CAF50">~70% of tests</text>
                        <text x="250" y="320" text-anchor="middle" font-size="14" font-weight="bold" fill="#333">The Testing Pyramid</text>
                    </svg>
                </div>
                <div class="card">
                    <h4>‚öñÔ∏è Balancing Your Test Suite</h4>
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f5f5f5;">
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Test Type</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Speed</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Maintenance</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Confidence</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Unit</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">‚ö° Very fast (ms)</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">üü¢ Low</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Function works</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Component</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">‚ö° Fast (ms-sec)</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">üü° Medium</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Component works</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>Integration</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">üê¢ Moderate (sec)</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">üü° Medium</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">Features work together</td>
                            </tr>
                            <tr>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;"><strong>E2E</strong></td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">üêå Slow (min)</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">üî¥ High</td>
                                <td style="padding: 12px; border-bottom: 1px solid #eee;">App works for users</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
            <section id="setup">
                <h2>Setting Up Testing</h2>
                <p>Expo projects come with Jest pre-configured, but we need to add React Native Testing Library for component testing.</p>
                <h3>Install Dependencies</h3>
                <pre><code># Core testing libraries
npm install --save-dev jest @testing-library/react-native @testing-library/jest-native

# Additional utilities
npm install --save-dev jest-expo</code></pre>
                <h3>Configure Jest</h3>
                <pre><code>// jest.config.js
module.exports = {
  preset: 'jest-expo',
  setupFilesAfterEnv: ['@testing-library/jest-native/extend-expect'],
  transformIgnorePatterns: [
    'node_modules/(?!((jest-)?react-native|@react-native(-community)?)|expo(nent)?|@expo(nent)?/.*|@expo-google-fonts/.*|react-navigation|@react-navigation/.*|@unimodules/.*|unimodules|sentry-expo|native-base|react-native-svg)',
  ],
  moduleFileExtensions: ['ts', 'tsx', 'js', 'jsx'],
  collectCoverageFrom: [
    '**/*.{ts,tsx}',
    '!**/coverage/**',
    '!**/node_modules/**',
    '!**/babel.config.js',
    '!**/jest.setup.js',
  ],
};</code></pre>
                <h3>Setup File</h3>
                <pre><code>// jest.setup.js
import '@testing-library/jest-native/extend-expect';

// Mock commonly used native modules
jest.mock('react-native/Libraries/Animated/NativeAnimatedHelper');

// Mock Expo modules that aren't available in tests
jest.mock('expo-font');
jest.mock('expo-asset');

// Silence React Native warnings in tests
jest.mock('react-native/Libraries/LogBox/LogBox', () =&gt; ({
  ignoreLogs: jest.fn(),
  ignoreAllLogs: jest.fn(),
}));</code></pre>
                <h3>Update package.json</h3>
                <pre><code>// package.json
{
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage"
  },
  "jest": {
    "preset": "jest-expo",
    "setupFilesAfterEnv": [
      "./jest.setup.js"
    ]
  }
}</code></pre>
                <h3>Project Structure</h3>
                <pre><code>my-app/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Button.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Button.test.tsx      # Test file next to component
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useCounter.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useCounter.test.ts
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ format.ts
‚îÇ       ‚îî‚îÄ‚îÄ format.test.ts
‚îú‚îÄ‚îÄ __tests__/                    # Or separate test directory
‚îÇ   ‚îî‚îÄ‚îÄ integration/
‚îÇ       ‚îî‚îÄ‚îÄ LoginFlow.test.tsx
‚îú‚îÄ‚îÄ jest.config.js
‚îî‚îÄ‚îÄ jest.setup.js</code></pre>
                <div class="card" style="background-color: #fff3cd; border-left: 4px solid #ffc107;">
                    <h4>üí° Test File Naming Conventions</h4>
                    <ul>
                        <li><code>Component.test.tsx</code> - Test file next to component</li>
                        <li><code>Component.spec.tsx</code> - Alternative naming</li>
                        <li><code>__tests__/Component.tsx</code> - Tests in dedicated folder</li>
                    </ul>
                    <p>Jest finds all files matching <code>*.test.{js,jsx,ts,tsx}</code> or <code>*.spec.{js,jsx,ts,tsx}</code></p>
                </div>
            </section>
            <section id="first-tests">
                <h2>Writing Your First Tests</h2>
                <p>Let's write tests for a simple component to understand the basics.</p>
                <h3>The Component to Test</h3>
                <pre><code>// components/Greeting.tsx
import { View, Text, StyleSheet } from 'react-native';

interface GreetingProps {
  name: string;
  showEmoji?: boolean;
}

export function Greeting({ name, showEmoji = true }: GreetingProps) {
  return (
    &lt;View style={styles.container}&gt;
      &lt;Text style={styles.text}&gt;
        Hello, {name}!{showEmoji ? ' üëã' : ''}
      &lt;/Text&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: { padding: 16 },
  text: { fontSize: 24 },
});</code></pre>
                <h3>Writing the Test</h3>
                <pre><code>// components/Greeting.test.tsx
import { render, screen } from '@testing-library/react-native';
import { Greeting } from './Greeting';

describe('Greeting', () =&gt; {
  it('renders the name', () =&gt; {
    render(&lt;Greeting name="Alice" /&gt;);
    expect(screen.getByText(/Hello, Alice!/)).toBeTruthy();
  });

  it('shows emoji by default', () =&gt; {
    render(&lt;Greeting name="Bob" /&gt;);
    expect(screen.getByText(/üëã/)).toBeTruthy();
  });

  it('hides emoji when showEmoji is false', () =&gt; {
    render(&lt;Greeting name="Charlie" showEmoji={false} /&gt;);
    expect(screen.getByText('Hello, Charlie!')).toBeTruthy();
    expect(screen.queryByText(/üëã/)).toBeNull();
  });
});</code></pre>
                <h3>Testing User Interactions</h3>
                <pre><code>// components/Counter.tsx
import { useState } from 'react';
import { View, Text, Pressable, StyleSheet } from 'react-native';

interface CounterProps {
  initialValue?: number;
}

export function Counter({ initialValue = 0 }: CounterProps) {
  const [count, setCount] = useState(initialValue);

  return (
    &lt;View style={styles.container}&gt;
      &lt;Text testID="count-display" style={styles.count}&gt;{count}&lt;/Text&gt;
      &lt;View style={styles.buttons}&gt;
        &lt;Pressable 
          testID="decrement-button"
          onPress={() =&gt; setCount(c =&gt; c - 1)}
          style={styles.button}
        &gt;
          &lt;Text style={styles.buttonText}&gt;-&lt;/Text&gt;
        &lt;/Pressable&gt;
        &lt;Pressable 
          testID="increment-button"
          onPress={() =&gt; setCount(c =&gt; c + 1)}
          style={styles.button}
        &gt;
          &lt;Text style={styles.buttonText}&gt;+&lt;/Text&gt;
        &lt;/Pressable&gt;
      &lt;/View&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: { alignItems: 'center', padding: 20 },
  count: { fontSize: 48, fontWeight: 'bold' },
  buttons: { flexDirection: 'row', marginTop: 20 },
  button: { backgroundColor: '#667eea', padding: 20, marginHorizontal: 10, borderRadius: 8 },
  buttonText: { color: 'white', fontSize: 24 },
});</code></pre>
                <pre><code>// components/Counter.test.tsx
import { render, screen, fireEvent } from '@testing-library/react-native';
import { Counter } from './Counter';

describe('Counter', () =&gt; {
  it('displays initial value', () =&gt; {
    render(&lt;Counter initialValue={5} /&gt;);
    expect(screen.getByTestId('count-display')).toHaveTextContent('5');
  });

  it('defaults to 0', () =&gt; {
    render(&lt;Counter /&gt;);
    expect(screen.getByTestId('count-display')).toHaveTextContent('0');
  });

  it('increments when + is pressed', () =&gt; {
    render(&lt;Counter initialValue={0} /&gt;);
    fireEvent.press(screen.getByTestId('increment-button'));
    expect(screen.getByTestId('count-display')).toHaveTextContent('1');
  });

  it('decrements when - is pressed', () =&gt; {
    render(&lt;Counter initialValue={5} /&gt;);
    fireEvent.press(screen.getByTestId('decrement-button'));
    expect(screen.getByTestId('count-display')).toHaveTextContent('4');
  });

  it('handles multiple interactions', () =&gt; {
    render(&lt;Counter initialValue={0} /&gt;);
    fireEvent.press(screen.getByTestId('increment-button'));
    fireEvent.press(screen.getByTestId('increment-button'));
    fireEvent.press(screen.getByTestId('increment-button'));
    fireEvent.press(screen.getByTestId('decrement-button'));
    expect(screen.getByTestId('count-display')).toHaveTextContent('2');
  });
});</code></pre>
            </section>
            <section id="test-structure">
                <h2>Test Structure and Organization</h2>
                <p>Well-organized tests are easier to read, maintain, and debug. Follow these patterns for consistent, clear tests.</p>
                <h3>The AAA Pattern</h3>
                <p>Structure each test with three clear phases: Arrange, Act, Assert.</p>
                <pre><code>it('increments the counter when button is pressed', () =&gt; {
  // Arrange - Set up the test
  render(&lt;Counter initialValue={0} /&gt;);
  const button = screen.getByTestId('increment-button');

  // Act - Perform the action
  fireEvent.press(button);

  // Assert - Verify the result
  expect(screen.getByTestId('count-display')).toHaveTextContent('1');
});</code></pre>
                <h3>Describe Blocks</h3>
                <p>Use <code>describe</code> blocks to group related tests and create clear hierarchies.</p>
                <pre><code>describe('LoginForm', () =&gt; {
  describe('validation', () =&gt; {
    it('shows error for invalid email', () =&gt; { /* ... */ });
    it('shows error for short password', () =&gt; { /* ... */ });
    it('shows error for empty fields', () =&gt; { /* ... */ });
  });

  describe('submission', () =&gt; {
    it('calls onSubmit with form data', () =&gt; { /* ... */ });
    it('disables button while submitting', () =&gt; { /* ... */ });
    it('shows error message on failure', () =&gt; { /* ... */ });
  });

  describe('accessibility', () =&gt; {
    it('has accessible labels', () =&gt; { /* ... */ });
  });
});</code></pre>
                <h3>Test Utilities</h3>
                <pre><code>// test-utils.tsx
import { render, RenderOptions } from '@testing-library/react-native';
import { NavigationContainer } from '@react-navigation/native';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { ThemeProvider } from './contexts/ThemeContext';

function AllTheProviders({ children }: { children: React.ReactNode }) {
  const queryClient = new QueryClient({
    defaultOptions: { queries: { retry: false } },
  });

  return (
    &lt;QueryClientProvider client={queryClient}&gt;
      &lt;ThemeProvider&gt;
        &lt;NavigationContainer&gt;
          {children}
        &lt;/NavigationContainer&gt;
      &lt;/ThemeProvider&gt;
    &lt;/QueryClientProvider&gt;
  );
}

const customRender = (
  ui: React.ReactElement,
  options?: Omit&lt;RenderOptions, 'wrapper'&gt;
) =&gt; render(ui, { wrapper: AllTheProviders, ...options });

export * from '@testing-library/react-native';
export { customRender as render };</code></pre>
                <h3>Test Data Factories</h3>
                <pre><code>// test-utils/factories.ts
interface User {
  id: string;
  name: string;
  email: string;
  avatar?: string;
}

export function createUser(overrides: Partial&lt;User&gt; = {}): User {
  return {
    id: 'user-1',
    name: 'Test User',
    email: 'test@example.com',
    avatar: undefined,
    ...overrides,
  };
}

// Usage
const user = createUser({ name: 'Alice' });
const outOfStock = createProduct({ inStock: false });</code></pre>
            </section>
            <section id="running-tests">
                <h2>Running Tests</h2>
                <h3>Basic Commands</h3>
                <pre><code># Run all tests
npm test

# Run tests in watch mode (re-runs on file changes)
npm test -- --watch

# Run specific test file
npm test -- Counter.test.tsx

# Run tests matching a pattern
npm test -- --testNamePattern="increments"

# Run with coverage report
npm test -- --coverage

# Run only changed files
npm test -- --onlyChanged</code></pre>
                <h3>Watch Mode Commands</h3>
                <div class="card">
                    <h4>‚å®Ô∏è Watch Mode Shortcuts</h4>
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: #f5f5f5;">
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Key</th>
                                <th style="padding: 12px; text-align: left; border-bottom: 2px solid #ddd;">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td style="padding: 12px; border-bottom: 1px solid #eee;"><code>a</code></td><td style="padding: 12px; border-bottom: 1px solid #eee;">Run all tests</td></tr>
                            <tr><td style="padding: 12px; border-bottom: 1px solid #eee;"><code>f</code></td><td style="padding: 12px; border-bottom: 1px solid #eee;">Run only failed tests</td></tr>
                            <tr><td style="padding: 12px; border-bottom: 1px solid #eee;"><code>p</code></td><td style="padding: 12px; border-bottom: 1px solid #eee;">Filter by filename pattern</td></tr>
                            <tr><td style="padding: 12px; border-bottom: 1px solid #eee;"><code>t</code></td><td style="padding: 12px; border-bottom: 1px solid #eee;">Filter by test name pattern</td></tr>
                            <tr><td style="padding: 12px; border-bottom: 1px solid #eee;"><code>o</code></td><td style="padding: 12px; border-bottom: 1px solid #eee;">Run only changed files</td></tr>
                            <tr><td style="padding: 12px; border-bottom: 1px solid #eee;"><code>q</code></td><td style="padding: 12px; border-bottom: 1px solid #eee;">Quit watch mode</td></tr>
                            <tr><td style="padding: 12px; border-bottom: 1px solid #eee;"><code>Enter</code></td><td style="padding: 12px; border-bottom: 1px solid #eee;">Re-run tests</td></tr>
                        </tbody>
                    </table>
                </div>
                <h3>Code Coverage</h3>
                <pre><code># Generate coverage report
npm test -- --coverage

# Output:
--------------------|---------|----------|---------|---------|-------------------
File                | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
--------------------|---------|----------|---------|---------|-------------------
All files           |   85.71 |    66.67 |     100 |   85.71 |                   
 Counter.tsx        |     100 |      100 |     100 |     100 |                   
 Greeting.tsx       |   71.43 |       50 |     100 |   71.43 | 12-14             
--------------------|---------|----------|---------|---------|-------------------</code></pre>
                <div class="card" style="background: #e3f2fd; border-left: 4px solid #2196F3;">
                    <h4>üìä Coverage Metrics</h4>
                    <ul>
                        <li><strong>Statements:</strong> % of code statements executed</li>
                        <li><strong>Branches:</strong> % of if/else branches tested</li>
                        <li><strong>Functions:</strong> % of functions called</li>
                        <li><strong>Lines:</strong> % of lines executed</li>
                    </ul>
                    <p>Aim for 70-80% coverage on critical code. 100% coverage doesn't guarantee bug-free code!</p>
                </div>
            </section>
            <section id="best-practices">
                <h2>Testing Best Practices</h2>
                <h3>Test Behavior, Not Implementation</h3>
                <pre><code>// ‚ùå Bad - Tests implementation details
it('sets isLoading state to true', () =&gt; {
  const { result } = renderHook(() =&gt; useData());
  act(() =&gt; { result.current.fetchData(); });
  expect(result.current.isLoading).toBe(true);
});

// ‚úÖ Good - Tests observable behavior
it('shows loading indicator while fetching', async () =&gt; {
  render(&lt;DataComponent /&gt;);
  fireEvent.press(screen.getByText('Load Data'));
  expect(screen.getByTestId('loading-spinner')).toBeTruthy();
  await waitFor(() =&gt; {
    expect(screen.queryByTestId('loading-spinner')).toBeNull();
  });
});</code></pre>
                <h3>Use Accessible Queries</h3>
                <pre><code>// Query priority (from best to worst)

// 1. Accessible queries (best)
screen.getByRole('button', { name: 'Submit' })
screen.getByLabelText('Email address')
screen.getByPlaceholderText('Enter your email')
screen.getByText('Welcome!')

// 2. Semantic queries
screen.getByDisplayValue('current value')

// 3. Test IDs (when needed)
screen.getByTestId('submit-button')

// ‚ùå Avoid - Fragile selectors
container.querySelector('.btn-primary')</code></pre>
                <h3>Keep Tests Independent</h3>
                <pre><code>// ‚ùå Bad - Tests depend on each other
let count = 0;
it('increments count', () =&gt; { count++; expect(count).toBe(1); });
it('count is now 1', () =&gt; { expect(count).toBe(1); }); // Fails if run alone!

// ‚úÖ Good - Each test is independent
describe('Counter', () =&gt; {
  it('starts at 0', () =&gt; {
    render(&lt;Counter /&gt;);
    expect(screen.getByTestId('count')).toHaveTextContent('0');
  });

  it('can increment', () =&gt; {
    render(&lt;Counter /&gt;);
    fireEvent.press(screen.getByText('+'));
    expect(screen.getByTestId('count')).toHaveTextContent('1');
  });
});</code></pre>
                <h3>Write Descriptive Test Names</h3>
                <pre><code>// ‚ùå Bad - Vague names
it('works', () =&gt; { /* ... */ });
it('test 1', () =&gt; { /* ... */ });

// ‚úÖ Good - Descriptive names
it('displays the user name after successful login', () =&gt; { /* ... */ });
it('shows validation error when email is invalid', () =&gt; { /* ... */ });
it('disables submit button while form is submitting', () =&gt; { /* ... */ });</code></pre>
                <div class="card">
                    <h4>‚úÖ Testing Checklist</h4>
                    <ul>
                        <li>‚òê Tests are independent and can run in any order</li>
                        <li>‚òê Test names describe what is being tested</li>
                        <li>‚òê Tests verify behavior, not implementation</li>
                        <li>‚òê Edge cases and error states are covered</li>
                        <li>‚òê Async operations use proper waiting</li>
                        <li>‚òê Mocks are cleaned up between tests</li>
                        <li>‚òê Tests don't rely on network or external services</li>
                        <li>‚òê Accessibility queries are preferred</li>
                    </ul>
                </div>
            </section>
            <section id="exercises">
                <h2>Hands-On Exercises</h2>
                <div class="exercise-card">
                    <h3>Exercise 1: Test a Utility Function</h3>
                    <p>Write tests for a password validation utility function.</p>
                    <h4>The Function:</h4>
                    <pre><code>// utils/validatePassword.ts
interface ValidationResult {
  isValid: boolean;
  errors: string[];
}

export function validatePassword(password: string): ValidationResult {
  const errors: string[] = [];
  if (password.length &lt; 8) errors.push('Password must be at least 8 characters');
  if (!/[A-Z]/.test(password)) errors.push('Password must contain an uppercase letter');
  if (!/[a-z]/.test(password)) errors.push('Password must contain a lowercase letter');
  if (!/[0-9]/.test(password)) errors.push('Password must contain a number');
  return { isValid: errors.length === 0, errors };
}</code></pre>
                    <h4>Requirements:</h4>
                    <ul>
                        <li>Test valid passwords return isValid: true</li>
                        <li>Test each validation rule individually</li>
                        <li>Test multiple failures at once</li>
                        <li>Test edge cases (empty string, very long password)</li>
                    </ul>
                    <details>
                        <summary>Show Solution</summary>
                        <pre><code>describe('validatePassword', () =&gt; {
  describe('valid passwords', () =&gt; {
    it('accepts password meeting all requirements', () =&gt; {
      const result = validatePassword('Password123');
      expect(result.isValid).toBe(true);
      expect(result.errors).toHaveLength(0);
    });
  });

  describe('length validation', () =&gt; {
    it('rejects passwords shorter than 8 characters', () =&gt; {
      const result = validatePassword('Pass1');
      expect(result.isValid).toBe(false);
      expect(result.errors).toContain('Password must be at least 8 characters');
    });
  });

  describe('uppercase validation', () =&gt; {
    it('rejects passwords without uppercase', () =&gt; {
      const result = validatePassword('password123');
      expect(result.isValid).toBe(false);
      expect(result.errors).toContain('Password must contain an uppercase letter');
    });
  });

  describe('edge cases', () =&gt; {
    it('handles empty string', () =&gt; {
      const result = validatePassword('');
      expect(result.isValid).toBe(false);
    });
  });
});</code></pre>
                    </details>
                </div>
                <div class="exercise-card">
                    <h3>Exercise 2: Test a Toggle Component</h3>
                    <p>Write tests for a toggle switch component.</p>
                    <h4>Requirements:</h4>
                    <ul>
                        <li>Test the label renders correctly</li>
                        <li>Test pressing calls onValueChange with opposite value</li>
                        <li>Test disabled state prevents interaction</li>
                        <li>Test accessibility properties</li>
                    </ul>
                    <details>
                        <summary>Show Solution</summary>
                        <pre><code>describe('Toggle', () =&gt; {
  const defaultProps = {
    label: 'Dark Mode',
    value: false,
    onValueChange: jest.fn(),
  };

  beforeEach(() =&gt; { jest.clearAllMocks(); });

  it('renders the label', () =&gt; {
    render(&lt;Toggle {...defaultProps} /&gt;);
    expect(screen.getByText('Dark Mode')).toBeTruthy();
  });

  it('calls onValueChange with true when toggling off to on', () =&gt; {
    const onValueChange = jest.fn();
    render(&lt;Toggle {...defaultProps} value={false} onValueChange={onValueChange} /&gt;);
    fireEvent.press(screen.getByTestId('toggle-button'));
    expect(onValueChange).toHaveBeenCalledWith(true);
  });

  it('does not call onValueChange when disabled', () =&gt; {
    const onValueChange = jest.fn();
    render(&lt;Toggle {...defaultProps} disabled onValueChange={onValueChange} /&gt;);
    fireEvent.press(screen.getByTestId('toggle-button'));
    expect(onValueChange).not.toHaveBeenCalled();
  });
});</code></pre>
                    </details>
                </div>
            </section>
            <section id="summary">
                <h2>Summary</h2>
                <p>Testing is an investment that pays dividends throughout the life of your application. Start with unit tests, add component tests for UI logic, and use integration tests for critical flows.</p>
                <div class="card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <h4 style="color: white;">üéØ Key Takeaways</h4>
                    <ul style="color: white;">
                        <li><strong>Testing pyramid:</strong> Many unit tests, fewer integration tests, even fewer E2E tests</li>
                        <li><strong>Jest + RTL:</strong> The standard testing stack for React Native</li>
                        <li><strong>Test behavior:</strong> Focus on what users see, not implementation details</li>
                        <li><strong>AAA pattern:</strong> Arrange, Act, Assert for clear test structure</li>
                        <li><strong>Independent tests:</strong> Each test should work in isolation</li>
                        <li><strong>Descriptive names:</strong> Test names should explain what's being verified</li>
                        <li><strong>Edge cases:</strong> Don't forget error states and boundary conditions</li>
                        <li><strong>Coverage:</strong> Aim for 70-80% on critical code paths</li>
                    </ul>
                </div>
                <p>In the next lesson, we'll dive deeper into unit testing with Jest, exploring mocking, async testing, and testing hooks.</p>
            </section>
            <div class="lesson-nav">
                <a href="m09_l05_layout_animations.html" class="prev-link">‚Üê Previous: Layout Animations</a>
                <a href="index.html" class="home-link">üè† Home</a>
                <a href="m10_l02_unit_testing.html" class="next-link">Next: Unit Testing with Jest ‚Üí</a>
            </div>
        </div>
    </main>
    <footer>
        <div class="container">
            <p>&copy; 2025 React Native & Expo Course. All rights reserved.</p>
        </div>
    </footer>
    <script src="js/clipboard.js"></script>
    <script src="js/course-enhancements.js"></script>
</body>
</html>